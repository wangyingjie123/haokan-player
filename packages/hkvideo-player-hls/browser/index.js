window.HlsJsPlayer=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(2)),i=s(r(4)),o=s(r(5));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.hlsOpts=e.hlsOpts||{};a.default.util;var n=r;if(r.browser=o.default.getBrowserVersion(),void 0===n.config.useHls){if("mobile"===a.default.sniffer.device&&"MacIntel"!==navigator.platform&&"Win32"!==navigator.platform)return l(r);if(r.browser.indexOf("Safari")>-1)return n.createLiveDom(),l(r)}else if(!n.config.useHls)return l(r);var s=void 0;return s=new i.default(r.hlsOpts),r.hls=s,Object.defineProperty(n,"src",{get:function(){return n.currentSrc},set:function(e){var t=document.querySelector(".hkplayer-live");t&&t.parentNode.removeChild(t);var r=n.paused;n.hls.stopLoad(),n.hls.detachMedia(),n.hls.destroy(),n.hls=new i.default(n.hlsOpts),n.register(),r?n.hls.loadSource(e):(n.pause(),n.once("pause",(function(){n.hls.loadSource(e)}))),n.hls.attachMedia(n.video),n.once("canplay",(function(){n.currentTime=0,n.play().catch((function(e){}))}))},configurable:!0}),r.register(),r.once("complete",(function(){s.attachMedia(n.video),n.once("canplay",(function(){n.play()})),n.config.isLive&&a.default.util.addClass(n.root,"hkplayer-is-live")})),r.once("destroy",(function(){s.stopLoad()})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"createLiveDom",value:function(){var e=this;e.config.closeVideoClick=!0,a.default.util.addClass(e.root,"hkplayer-is-live");var t=a.default.util.createDom("hk-live",'\n            <hk-icon class="hkplayer-icon">\n                <div class="hkplayer-icon-refresh">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n                        <path d="M7.7244531,15.9890117 C8.31573144,17.8402901 9.72737117,19.4075916 11.6948776,20.1237054 C15.0682339,21.3515067 18.7982092,19.6121907 20.0260105,16.2388343 C20.3093493,15.4603674 21.1701128,15.0589868 21.9485797,15.3423256 C22.369653,15.4955837 22.6804008,15.8177811 22.8321392,16.2045147 C22.8991126,16.348457 22.9439009,16.5048609 22.9621092,16.669293 L22.9712948,16.8362369 L22.9712948,20.8118122 C22.9712948,21.6402393 22.2997219,22.3118122 21.4712948,22.3118122 C20.8054283,22.3118122 20.2408975,21.8779431 20.0449833,21.2774859 C17.5299461,23.3963605 13.9817144,24.1485792 10.6688171,22.9427833 C7.72633612,21.8718078 5.72741466,19.5035839 4.80753054,16.7102769 C4.57000548,15.9890117 4.80753054,15.0778397 5.77322429,14.8372141 C6.73891804,14.5965886 7.50158847,15.2912278 7.7244531,15.9890117 Z M17.0245418,5.0729201 C19.9670228,6.14389561 21.9659443,8.51211942 22.8858284,11.3054265 C23.1233534,12.0266917 22.8858284,12.9378636 21.9201346,13.1784892 C20.9544409,13.4191148 20.1917704,12.7244756 19.9689058,12.0266917 C19.3776275,10.1754132 17.9659878,8.60811173 15.9984814,7.89199796 C12.625125,6.66419665 8.89514969,8.40351269 7.66734838,11.7768691 C7.38400962,12.5553359 6.52324609,12.9567165 5.74477924,12.6733778 C5.32370594,12.5201196 5.01295813,12.1979222 4.86121974,11.8111887 C4.79424633,11.6672464 4.74945801,11.5108424 4.73124969,11.3464104 L4.72206414,11.1794665 L4.72206414,7.20389115 C4.72206414,6.37546403 5.39363701,5.70389115 6.22206414,5.70389115 C6.88793057,5.70389115 7.45246144,6.1377603 7.64837559,6.73821747 C10.1634129,4.61934286 13.7116446,3.86712413 17.0245418,5.0729201 Z" fill="#FFFFFF" fill-rule="nonzero" transform="translate(13.846679, 14.007852) scale(-1, 1) rotate(-155.000000) translate(-13.846679, -14.007852) "></path>\n                    </svg>\n                </div>\n            </hk-icon>\n            <hk-tips class="hkplayer-tips">\n                <span class="hkplayer-tip-refresh">刷新</span>\n            </hk-tips>',{},"hkplayer-live");e.controls.appendChild(t),t.onclick=function(){a.default.util.addClass(e.root,"hkplayer-is-enter"),e.src=e.config.url}}},{key:"register",value:function(){var e=this.hls,t=(a.default.util,this);e.on(i.default.Events.MEDIA_ATTACHED,(function(){e.loadSource(t.config.url)})),e.on(i.default.Events.LEVEL_LOADED,(function(r,n){e.inited||(e.inited=!0,n&&n.details&&n.details.live&&t.createLiveDom())})),e.on(i.default.Events.ERROR,(function(r,n){if(n.fatal)switch(n.type){case i.default.ErrorTypes.NETWORK_ERROR:e.startLoad();break;case i.default.ErrorTypes.MEDIA_ERROR:e.recoverMediaError();break;default:t.emit("error",n)}}))}}]),t}(a.default);u.isSupported=i.default.isSupported,t.default=u,e.exports=t.default},function(module,exports,__webpack_require__){"use strict";(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t;window,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":_typeof(e))&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/dist/cjs.js!./src/ui/style/index.scss":
/*!**********************************************************************************************************************************************************!*\
      !*** ./node_modules/css-loader/dist/cjs.js??ref--5-1!./node_modules/postcss-loader/lib!./node_modules/sass-loader/dist/cjs.js!./src/ui/style/index.scss ***!
      \**********************************************************************************************************************************************************/
/*! no static exports found */function(e,t,r){(t=r(/*! ../../../node_modules/css-loader/dist/runtime/api.js */"./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.i,'.hkplayer-skin-default{background:#000;width:100%;height:100%;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.hkplayer-skin-default:not(.hkplayer-pip-active){overflow:hidden}.hkplayer-skin-default *{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}.hkplayer-skin-default .hkplayer-none{display:none}.hkplayer-skin-default.hkplayer-rotate-fullscreen{position:absolute;top:0;left:100%;bottom:0;right:0;height:100vw !important;width:100vh !important;-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.hkplayer-skin-default.hkplayer-is-fullscreen{width:100% !important;height:100% !important;padding-top:0 !important;z-index:9999}.hkplayer-skin-default.hkplayer-is-fullscreen.hkplayer-inactive{cursor:none}.hkplayer-skin-default video{width:100%;height:100%;outline:none}.hkplayer-skin-default .hkplayer-none{display:none}@-webkit-keyframes playPause{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}99%{-webkit-transform:scale(1.3, 1.3);transform:scale(1.3, 1.3);opacity:0}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0);opacity:0}}@keyframes playPause{0%{-webkit-transform:scale(1, 1);transform:scale(1, 1);opacity:1}99%{-webkit-transform:scale(1.3, 1.3);transform:scale(1.3, 1.3);opacity:0}100%{-webkit-transform:scale(0, 0);transform:scale(0, 0);opacity:0}}@-webkit-keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loadingRotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes loadingDashOffset{0%{stroke-dashoffset:236}100%{stroke-dashoffset:0}}@keyframes loadingDashOffset{0%{stroke-dashoffset:236}100%{stroke-dashoffset:0}}@-webkit-keyframes enterTips{0%{opacity:0;left:0;width:3px}50%{opacity:1;left:50%;width:5px}100%{opacity:0;left:100%;width:3px}}@keyframes enterTips{0%{opacity:0;left:0;width:3px}50%{opacity:1;left:50%;width:5px}100%{opacity:0;left:100%;width:3px}}@-webkit-keyframes fade{0%{opacity:1}100%{opacity:.25}}@keyframes fade{0%{opacity:1}100%{opacity:.25}}@-webkit-keyframes iconScale{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transform-origin:center center;transform-origin:center center}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}}@keyframes iconScale{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transform-origin:center center;transform-origin:center center}100%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}}.hkplayer-skin-default .hkplayer-play,.hkplayer-skin-default .hkplayer-play-img{width:56px;position:relative;-webkit-order:0;-moz-box-ordinal-group:1;order:0;display:block;cursor:pointer}.hkplayer-skin-default .hkplayer-play .hkplayer-icon,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon{width:100%;height:100%}.hkplayer-skin-default .hkplayer-play .hkplayer-icon-play,.hkplayer-skin-default .hkplayer-play .hkplayer-icon-pause,.hkplayer-skin-default .hkplayer-play .hkplayer-icon-replay,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon-play,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon-pause,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon-replay{width:100%;height:100%}.hkplayer-skin-default .hkplayer-play .hkplayer-icon-play svg,.hkplayer-skin-default .hkplayer-play .hkplayer-icon-pause svg,.hkplayer-skin-default .hkplayer-play .hkplayer-icon-replay svg,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon-play svg,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon-pause svg,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon-replay svg{margin:12px}.hkplayer-skin-default .hkplayer-play .hkplayer-icon .hkplayer-icon-play,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon .hkplayer-icon-play{display:block}.hkplayer-skin-default .hkplayer-play .hkplayer-icon .hkplayer-icon-replay,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon .hkplayer-icon-replay{display:none}.hkplayer-skin-default .hkplayer-play .hkplayer-icon .hkplayer-icon-pause,.hkplayer-skin-default .hkplayer-play-img .hkplayer-icon .hkplayer-icon-pause{display:none}.hkplayer-skin-default .hkplayer-play .hkplayer-tips .hkplayer-tip-play,.hkplayer-skin-default .hkplayer-play-img .hkplayer-tips .hkplayer-tip-play{display:block}.hkplayer-skin-default .hkplayer-play .hkplayer-tips .hkplayer-tip-replay,.hkplayer-skin-default .hkplayer-play-img .hkplayer-tips .hkplayer-tip-replay{display:none}.hkplayer-skin-default .hkplayer-play .hkplayer-tips .hkplayer-tip-pause,.hkplayer-skin-default .hkplayer-play-img .hkplayer-tips .hkplayer-tip-pause{display:none}.hkplayer-skin-default .hkplayer-play:hover,.hkplayer-skin-default .hkplayer-play-img:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-play:hover .hkplayer-tips,.hkplayer-skin-default .hkplayer-play-img:hover .hkplayer-tips{display:block}.hkplayer-skin-default.hkplayer-playing .hkplayer-play .hkplayer-icon .hkplayer-icon-play,.hkplayer-skin-default.hkplayer-playing .hkplayer-play-img .hkplayer-icon .hkplayer-icon-play{display:none}.hkplayer-skin-default.hkplayer-playing .hkplayer-play .hkplayer-icon .hkplayer-icon-replay,.hkplayer-skin-default.hkplayer-playing .hkplayer-play-img .hkplayer-icon .hkplayer-icon-replay{display:none}.hkplayer-skin-default.hkplayer-playing .hkplayer-play .hkplayer-icon .hkplayer-icon-pause,.hkplayer-skin-default.hkplayer-playing .hkplayer-play-img .hkplayer-icon .hkplayer-icon-pause{display:block}.hkplayer-skin-default.hkplayer-playing .hkplayer-play .hkplayer-tips .hkplayer-tip-play,.hkplayer-skin-default.hkplayer-playing .hkplayer-play-img .hkplayer-tips .hkplayer-tip-play{display:none}.hkplayer-skin-default.hkplayer-playing .hkplayer-play .hkplayer-tips .hkplayer-tip-replay,.hkplayer-skin-default.hkplayer-playing .hkplayer-play-img .hkplayer-tips .hkplayer-tip-replay{display:none}.hkplayer-skin-default.hkplayer-playing .hkplayer-play .hkplayer-tips .hkplayer-tip-pause,.hkplayer-skin-default.hkplayer-playing .hkplayer-play-img .hkplayer-tips .hkplayer-tip-pause{display:block}.hkplayer-skin-default.hkplayer-pause .hkplayer-play .hkplayer-icon .hkplayer-icon-play,.hkplayer-skin-default.hkplayer-pause .hkplayer-play-img .hkplayer-icon .hkplayer-icon-play{display:block}.hkplayer-skin-default.hkplayer-pause .hkplayer-play .hkplayer-icon .hkplayer-icon-pause,.hkplayer-skin-default.hkplayer-pause .hkplayer-play-img .hkplayer-icon .hkplayer-icon-pause{display:none}.hkplayer-skin-default.hkplayer-pause .hkplayer-play .hkplayer-tips .hkplayer-tip-play,.hkplayer-skin-default.hkplayer-pause .hkplayer-play-img .hkplayer-tips .hkplayer-tip-play{display:block}.hkplayer-skin-default.hkplayer-pause .hkplayer-play .hkplayer-tips .hkplayer-tip-replay,.hkplayer-skin-default.hkplayer-pause .hkplayer-play-img .hkplayer-tips .hkplayer-tip-replay{display:none}.hkplayer-skin-default.hkplayer-pause .hkplayer-play .hkplayer-tips .hkplayer-tip-pause,.hkplayer-skin-default.hkplayer-pause .hkplayer-play-img .hkplayer-tips .hkplayer-tip-pause{display:none}.hkplayer-skin-default.hkplayer-ended .hkplayer-play .hkplayer-icon .hkplayer-icon-play,.hkplayer-skin-default.hkplayer-ended .hkplayer-play-img .hkplayer-icon .hkplayer-icon-play{display:none}.hkplayer-skin-default.hkplayer-ended .hkplayer-play .hkplayer-icon .hkplayer-icon-pause,.hkplayer-skin-default.hkplayer-ended .hkplayer-play-img .hkplayer-icon .hkplayer-icon-pause{display:none}.hkplayer-skin-default.hkplayer-ended .hkplayer-play .hkplayer-icon .hkplayer-icon-replay,.hkplayer-skin-default.hkplayer-ended .hkplayer-play-img .hkplayer-icon .hkplayer-icon-replay{display:block}.hkplayer-skin-default.hkplayer-ended .hkplayer-play .hkplayer-tips .hkplayer-tip-play,.hkplayer-skin-default.hkplayer-ended .hkplayer-play-img .hkplayer-tips .hkplayer-tip-play{display:none}.hkplayer-skin-default.hkplayer-ended .hkplayer-play .hkplayer-tips .hkplayer-tip-replay,.hkplayer-skin-default.hkplayer-ended .hkplayer-play-img .hkplayer-tips .hkplayer-tip-replay{display:block}.hkplayer-skin-default.hkplayer-ended .hkplayer-play .hkplayer-tips .hkplayer-tip-pause,.hkplayer-skin-default.hkplayer-ended .hkplayer-play-img .hkplayer-tips .hkplayer-tip-pause{display:none}.hkplayer-skin-default .hkplayer-start{border-radius:50%;display:none;width:70px;height:70px;background:rgba(0, 0, 0, .38);overflow:hidden;text-align:center;line-height:70px;vertical-align:middle;position:absolute;left:50%;top:50%;z-index:115;margin:-35px auto auto -35px;cursor:pointer}.hkplayer-skin-default .hkplayer-start div{width:100%;height:100%}.hkplayer-skin-default .hkplayer-start div svg{fill:rgba(255, 255, 255, .7);margin:21px auto}.hkplayer-skin-default .hkplayer-start .hkplayer-icon-play{display:block}.hkplayer-skin-default .hkplayer-start .hkplayer-icon-pause{display:none}.hkplayer-skin-default .hkplayer-start:hover{opacity:0.85}.hkplayer-skin-default.hkplayer-playing .hkplayer-start-interact{display:block;-webkit-animation:playPause 0.4s ease-out forwards;animation:playPause 0.4s ease-out forwards}.hkplayer-skin-default.hkplayer-playing .hkplayer-start-interact .hkplayer-icon-play{display:block}.hkplayer-skin-default.hkplayer-playing .hkplayer-start-interact .hkplayer-icon-pause{display:none}.hkplayer-skin-default.hkplayer-pause .hkplayer-start-interact{display:block;-webkit-animation:playPause 0.4s ease-out forwards;animation:playPause 0.4s ease-out forwards}.hkplayer-skin-default.hkplayer-pause .hkplayer-start-interact .hkplayer-icon-play{display:none}.hkplayer-skin-default.hkplayer-pause .hkplayer-start-interact .hkplayer-icon-pause{display:block}.hkplayer-skin-default.hkplayer-nostart .hkplayer-start{display:block}.hkplayer-skin-default.replay .hkplayer-start{display:none}.hkplayer-skin-default.replay .hkplayer-start .hkplayer-icon-play{display:block}.hkplayer-skin-default.replay .hkplayer-start .hkplayer-icon-pause{display:none}.hkplayer-skin-default .hkplayer-enter{position:absolute;left:0;top:0;width:100%;height:100%;background:black;z-index:120;pointer-events:none;opacity:0;transition:opacity .5s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-logo{position:absolute;left:50%;top:50%;width:130px;height:44px;margin:-22px auto auto -65px}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-logo-img{width:100%;height:100%}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-tips{display:none;position:absolute;left:50%;top:50%;width:120px;height:1px;background:linear-gradient(to right, #000, red, red, red, #000);margin:32px auto auto -62px}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-tips:before{content:" ";display:block;width:5px;height:1px;border-radius:50%;position:absolute;left:0;top:0;-webkit-animation:enterTips 1.6s linear infinite;animation:enterTips 1.6s linear infinite;background:#fff}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner{display:block;position:absolute;left:50%;top:50%;height:100px;width:100px;position:relative;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner .enter-bar{width:12%;height:26%;background-color:rgba(255, 255, 255, .7);position:absolute;left:44%;top:37%;opacity:0;border-radius:30px;-webkit-animation:fade 1s linear infinite;animation:fade 1s linear infinite}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar1{-webkit-transform:rotate(0deg) translate(0, -142%);-ms-transform:rotate(0deg) translate(0, -142%);transform:rotate(0deg) translate(0, -142%);-webkit-animation-delay:-0s;animation-delay:-0s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar2{-webkit-transform:rotate(30deg) translate(0, -142%);-ms-transform:rotate(30deg) translate(0, -142%);transform:rotate(30deg) translate(0, -142%);-webkit-animation-delay:-.9163s;animation-delay:-.9163s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar3{-webkit-transform:rotate(60deg) translate(0, -142%);-ms-transform:rotate(60deg) translate(0, -142%);transform:rotate(60deg) translate(0, -142%);-webkit-animation-delay:-.833s;animation-delay:-.833s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar4{-webkit-transform:rotate(90deg) translate(0, -142%);-ms-transform:rotate(90deg) translate(0, -142%);transform:rotate(90deg) translate(0, -142%);-webkit-animation-delay:-.7497s;animation-delay:-.7497s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar5{-webkit-transform:rotate(120deg) translate(0, -142%);-ms-transform:rotate(120deg) translate(0, -142%);transform:rotate(120deg) translate(0, -142%);-webkit-animation-delay:-.6664s;animation-delay:-.6664s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar6{-webkit-transform:rotate(150deg) translate(0, -142%);-ms-transform:rotate(150deg) translate(0, -142%);transform:rotate(150deg) translate(0, -142%);-webkit-animation-delay:-.5831s;animation-delay:-.5831s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar7{-webkit-transform:rotate(180deg) translate(0, -142%);-ms-transform:rotate(180deg) translate(0, -142%);transform:rotate(180deg) translate(0, -142%);-webkit-animation-delay:-.4998s;animation-delay:-.4998s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar8{-webkit-transform:rotate(210deg) translate(0, -142%);-ms-transform:rotate(210deg) translate(0, -142%);transform:rotate(210deg) translate(0, -142%);-webkit-animation-delay:-.4165s;animation-delay:-.4165s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar9{-webkit-transform:rotate(240deg) translate(0, -142%);-ms-transform:rotate(240deg) translate(0, -142%);transform:rotate(240deg) translate(0, -142%);-webkit-animation-delay:-.3332s;animation-delay:-.3332s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar10{-webkit-transform:rotate(270deg) translate(0, -142%);-ms-transform:rotate(270deg) translate(0, -142%);transform:rotate(270deg) translate(0, -142%);-webkit-animation-delay:-.2499s;animation-delay:-.2499s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar11{-webkit-transform:rotate(300deg) translate(0, -142%);-ms-transform:rotate(300deg) translate(0, -142%);transform:rotate(300deg) translate(0, -142%);-webkit-animation-delay:-.1666s;animation-delay:-.1666s}.hkplayer-skin-default .hkplayer-enter .hkplayer-enter-spinner div.hkplayer-enter-bar12{-webkit-transform:rotate(330deg) translate(0, -142%);-ms-transform:rotate(330deg) translate(0, -142%);transform:rotate(330deg) translate(0, -142%);-webkit-animation-delay:-0.0833s;animation-delay:-0.0833s}.hkplayer-skin-default.hkplayer-is-enter .hkplayer-enter{opacity:1}.hkplayer-skin-default.hkplayer-is-enter .hkplayer-enter-tips{display:block}.hkplayer-skin-default .hkplayer-poster{display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:100;background-size:cover;background-position:center center}.hkplayer-skin-default.hkplayer-nostart .hkplayer-poster{display:block}.hkplayer-skin-default .hkplayer-placeholder{-webkit-flex:1;-moz-box-flex:1;flex:1;-webkit-order:3;-moz-box-ordinal-group:4;order:3;display:block}.hkplayer-skin-default .hkplayer-fullscreen,.hkplayer-skin-default .hkplayer-fullscreen-img{position:relative;-webkit-order:13;-moz-box-ordinal-group:14;order:13;display:block;cursor:pointer;margin-right:7px}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon-requestfull,.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon-exitfull,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon-requestfull,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon-exitfull{width:100%;height:100%}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon-requestfull:hover svg,.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon-exitfull:hover svg,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon-requestfull:hover svg,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon-exitfull:hover svg{-webkit-animation:iconScale .4s ease both;animation:iconScale .4s ease both}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon-requestfull svg,.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon-exitfull svg,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon-requestfull svg,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon-exitfull svg{margin:14px 10px}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon .hkplayer-icon-requestfull,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon .hkplayer-icon-requestfull{display:block}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-icon .hkplayer-icon-exitfull,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-icon .hkplayer-icon-exitfull{display:none}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-tips,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-tips{position:absolute;right:0;left:auto}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-tips .hkplayer-tip-requestfull,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-tips .hkplayer-tip-requestfull{display:block}.hkplayer-skin-default .hkplayer-fullscreen .hkplayer-tips .hkplayer-tip-exitfull,.hkplayer-skin-default .hkplayer-fullscreen-img .hkplayer-tips .hkplayer-tip-exitfull{display:none}.hkplayer-skin-default .hkplayer-fullscreen:hover,.hkplayer-skin-default .hkplayer-fullscreen-img:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-fullscreen:hover .hkplayer-tips,.hkplayer-skin-default .hkplayer-fullscreen-img:hover .hkplayer-tips{display:block}.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen .hkplayer-icon .hkplayer-icon-requestfull,.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen-img .hkplayer-icon .hkplayer-icon-requestfull{display:none}.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen .hkplayer-icon .hkplayer-icon-exitfull,.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen-img .hkplayer-icon .hkplayer-icon-exitfull{display:block}.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen .hkplayer-tips .hkplayer-tip-requestfull,.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen-img .hkplayer-tips .hkplayer-tip-requestfull{display:none}.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen .hkplayer-tips .hkplayer-tip-exitfull,.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-fullscreen-img .hkplayer-tips .hkplayer-tip-exitfull{display:block}.hkplayer-skin-default .hkplayer-cssfullscreen,.hkplayer-skin-default .hkplayer-cssfullscreen-img{position:relative;-webkit-order:12;-moz-box-ordinal-group:13;order:12;display:block;cursor:pointer}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon-requestfull,.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon-exitfull,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon-requestfull,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon-exitfull{width:100%;height:100%}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon-requestfull:hover svg,.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon-exitfull:hover svg,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon-requestfull:hover svg,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon-exitfull:hover svg{-webkit-animation:iconScale .4s ease both;animation:iconScale .4s ease both}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon-requestfull svg,.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon-exitfull svg,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon-requestfull svg,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon-exitfull svg{margin:14px 10px}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon .hkplayer-icon-requestfull,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon .hkplayer-icon-requestfull{display:block}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-icon .hkplayer-icon-exitfull,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-icon .hkplayer-icon-exitfull{display:none}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-tips,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-tips{margin-left:-40px}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-tips .hkplayer-tip-requestfull,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-tips .hkplayer-tip-requestfull{display:block}.hkplayer-skin-default .hkplayer-cssfullscreen .hkplayer-tips .hkplayer-tip-exitfull,.hkplayer-skin-default .hkplayer-cssfullscreen-img .hkplayer-tips .hkplayer-tip-exitfull{display:none}.hkplayer-skin-default .hkplayer-cssfullscreen:hover,.hkplayer-skin-default .hkplayer-cssfullscreen-img:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-cssfullscreen:hover .hkplayer-tips,.hkplayer-skin-default .hkplayer-cssfullscreen-img:hover .hkplayer-tips{display:block}body.overhidden{overflow:hidden}.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-icon .hkplayer-icon-requestfull,.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-icon .hkplayer-icon-requestfull{display:none}.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-icon .hkplayer-icon-exitfull,.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-icon .hkplayer-icon-exitfull{display:block}.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-tips,.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-tips{margin-left:-47px}.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-tips .hkplayer-tip-requestfull,.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-tips .hkplayer-tip-requestfull{display:none}.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-tips .hkplayer-tip-exitfull,.hkplayer-skin-default.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-tips .hkplayer-tip-exitfull{display:block}.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-cssfullscreen,.hkplayer-skin-default.hkplayer-is-fullscreen .hkplayer-cssfullscreen-img{display:none}.hkplayer-skin-default.hkplayer-is-cssfullscreen{position:fixed !important;left:0 !important;top:0 !important;width:100% !important;height:100% !important;z-index:99999 !important;padding-top:0 !important}.lang-is-en .hkplayer-cssfullscreen .hkplayer-tips,.lang-is-en .hkplayer-cssfullscreen-img .hkplayer-tips{margin-left:-46px}.lang-is-en.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-tips,.lang-is-en.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-tips{margin-left:-46px}.lang-is-jp .hkplayer-cssfullscreen .hkplayer-tips,.lang-is-jp .hkplayer-cssfullscreen-img .hkplayer-tips{margin-left:-120px}.lang-is-jp.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen .hkplayer-tips,.lang-is-jp.hkplayer-is-cssfullscreen .hkplayer-cssfullscreen-img .hkplayer-tips{margin-left:-60px}.hkplayer-skin-default .hkplayer-volume{outline:none;-webkit-order:11;-moz-box-ordinal-group:12;order:11;width:44px;height:52px;display:block;position:relative;z-index:30}.hkplayer-skin-default .hkplayer-volume .hkplayer-icon{cursor:pointer}.hkplayer-skin-default .hkplayer-volume .hkplayer-icon-large,.hkplayer-skin-default .hkplayer-volume .hkplayer-icon-small,.hkplayer-skin-default .hkplayer-volume .hkplayer-icon-muted{width:100%;height:100%}.hkplayer-skin-default .hkplayer-volume .hkplayer-icon-large svg,.hkplayer-skin-default .hkplayer-volume .hkplayer-icon-small svg,.hkplayer-skin-default .hkplayer-volume .hkplayer-icon-muted svg{margin:14px 10px}.hkplayer-skin-default .hkplayer-volume .hkplayer-icon .hkplayer-icon-large{display:block}.hkplayer-skin-default .hkplayer-volume .hkplayer-icon .hkplayer-icon-small{display:none}.hkplayer-skin-default .hkplayer-volume .hkplayer-icon .hkplayer-icon-muted{display:none}.hkplayer-skin-default .hkplayer-slider{display:none;position:absolute;width:44px;height:150px;background:rgba(0, 0, 0, .54);bottom:46px;outline:none;left:0;border-radius:4px}.hkplayer-skin-default .hkplayer-slider:after{content:" ";display:block;height:15px;width:28px;position:absolute;bottom:-15px;left:0;z-index:20}.hkplayer-skin-default .hkplayer-volume-val{height:18px;font-family:Roboto;font-size:12px;display:block;color:#fff;position:relative;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);text-align:center;top:10px}.hkplayer-skin-default .hkplayer-bar,.hkplayer-skin-default .hkplayer-drag{display:block;position:absolute;bottom:15px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);background:rgba(255, 255, 255, .3);border-radius:100px;width:4px;height:100px;outline:none;cursor:pointer}.hkplayer-skin-default .hkplayer-drag{bottom:0;background:#ff4141;max-height:100px}.hkplayer-skin-default .hkplayer-drag:after{content:" ";display:inline-block;left:-4px;top:0;width:12px;height:12px;box-shadow:0 0 8px 0 #fe104c;background-color:#ffffff;position:absolute;border-radius:50%}.hkplayer-skin-default.hkplayer-volume-active .hkplayer-volume{z-index:38}.hkplayer-skin-default.hkplayer-volume-active .hkplayer-slider{display:block}.hkplayer-skin-default.hkplayer-volume-large .hkplayer-volume .hkplayer-icon .hkplayer-icon-large{display:block}.hkplayer-skin-default.hkplayer-volume-large .hkplayer-volume .hkplayer-icon .hkplayer-icon-small{display:none}.hkplayer-skin-default.hkplayer-volume-large .hkplayer-volume .hkplayer-icon .hkplayer-icon-muted{display:none}.hkplayer-skin-default.hkplayer-volume-small .hkplayer-volume .hkplayer-icon .hkplayer-icon-large{display:none}.hkplayer-skin-default.hkplayer-volume-small .hkplayer-volume .hkplayer-icon .hkplayer-icon-small{display:block}.hkplayer-skin-default.hkplayer-volume-small .hkplayer-volume .hkplayer-icon .hkplayer-icon-muted{display:none}.hkplayer-skin-default.hkplayer-volume-muted .hkplayer-volume .hkplayer-icon .hkplayer-icon-large{display:none}.hkplayer-skin-default.hkplayer-volume-muted .hkplayer-volume .hkplayer-icon .hkplayer-icon-small{display:none}.hkplayer-skin-default.hkplayer-volume-muted .hkplayer-volume .hkplayer-icon .hkplayer-icon-muted{display:block}.hkplayer-skin-default.hkplayer-mobile .hkplayer-volume .hkplayer-slider{display:none}.hkplayer-skin-default .hkplayer-definition{-webkit-order:6;-moz-box-ordinal-group:7;order:6;width:60px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin:-119px 8px 14px}.hkplayer-skin-default .hkplayer-definition ul{display:none;list-style:none;width:60px;background:rgba(0, 0, 0, .54);position:absolute;bottom:30px;left:0;text-align:center;white-space:nowrap;z-index:26;cursor:pointer;border-radius:3px;cursor:pointer}.hkplayer-skin-default .hkplayer-definition ul li{opacity:0.7;font-family:PingFangSC-Regular;font-size:11px;color:rgba(255, 255, 255, .8);padding:6px 13px}.hkplayer-skin-default .hkplayer-definition ul li.selected{color:#ff4141;opacity:1}.hkplayer-skin-default .hkplayer-definition ul li:hover{color:#ff4141;opacity:1}.hkplayer-skin-default .hkplayer-definition .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;cursor:pointer;color:rgba(255, 255, 255, .8);position:absolute;bottom:0;width:60px;height:24px;line-height:24px;background:rgba(0, 0, 0, .38);border-radius:3px;display:inline-block;vertical-align:middle}.hkplayer-skin-default .hkplayer-definition .name:hover{background-color:#ff4141;color:#fff}.hkplayer-skin-default.hkplayer-definition-active .hkplayer-definition ul{display:block}.hkplayer-skin-default.hkplayer-is-definition .hkplayer-definition{display:block}.hkplayer-skin-default .hkplayer-time{-webkit-order:2;-moz-box-ordinal-group:3;order:2;font-family:ArialMT;font-size:13px;color:#fff;line-height:52px;height:52px;text-align:center;display:inline-block}.hkplayer-skin-default .hkplayer-time span{color:rgba(255, 255, 255, .5)}.hkplayer-skin-default .hkplayer-time .hkplayer-time-current{color:#fff}.hkplayer-skin-default .hkplayer-time .hkplayer-time-current::after{content:"/";display:inline-block;padding:0 3px}.hkplayer-skin-default .hkplayer-controls{display:-webkit-flex;display:-moz-box;display:flex;position:absolute;bottom:0;left:0;right:0;height:52px;background-image:linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, .7));z-index:10;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s, -webkit-transform .3s}.hkplayer-skin-default.hkplayer-nostart .hkplayer-controls{display:none}.hkplayer-skin-default.no-controls .hkplayer-controls{display:none}.hkplayer-skin-default.hkplayer-inactive:not(.hkplayer-pip-active) .hkplayer-controls{-webkit-transform:translate3d(0, 120%, 0);transform:translate3d(0, 120%, 0)}.hkplayer-skin-default.hkplayer-is-live .hkplayer-controls .hkplayer-time,.hkplayer-skin-default.hkplayer-is-live .hkplayer-controls .hkplayer-progress{display:none}.hkplayer-skin-default.hkplayer-is-live .hkplayer-controls .hkplayer-live{display:block}.hkplayer-skin-default .hkplayer-live{display:block;font-size:12px;color:#fff;height:52px;-webkit-order:1;-moz-box-ordinal-group:2;order:1;position:relative}.hkplayer-skin-default .hkplayer-live .hkplayer-icon-refresh{width:100%;height:100%;cursor:pointer}.hkplayer-skin-default .hkplayer-live .hkplayer-icon-refresh svg{margin:12px 8px}.hkplayer-skin-default .hkplayer-live:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-live:hover .hkplayer-tips{display:block}.hkplayer-skin-default .hkplayer-loading{display:none;width:100px;height:100px;overflow:hidden;-webkit-transform:scale(0.7);-ms-transform:scale(0.7);transform:scale(0.7);position:absolute;left:50%;top:50%;margin:-50px auto auto -50px}.hkplayer-skin-default .hkplayer-loading svg{border-radius:50%;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-animation:loadingRotate 1s linear infinite;animation:loadingRotate 1s linear infinite}.hkplayer-skin-default .hkplayer-loading svg path{stroke:#ddd;stroke-dasharray:236;-webkit-animation:loadingDashOffset 2s linear infinite;animation:loadingDashOffset 2s linear infinite;animation-direction:alternate-reverse;fill:none;stroke-width:12px}.hkplayer-skin-default.hkplayer-nostart .hkplayer-loading{display:none}.hkplayer-skin-default.hkplayer-pause .hkplayer-loading{display:none !important}.hkplayer-skin-default.hkplayer-isloading .hkplayer-loading{display:block}.hkplayer-skin-default .hkplayer-progress{display:block;position:absolute;height:20px;width:100%;line-height:20px;left:0;outline:none;top:-10px;z-index:35}.hkplayer-skin-default .hkplayer-progress-outer,.hkplayer-skin-default .hkplayer-progress-inner{background:rgba(255, 255, 255, .3);display:block;height:3px;line-height:3px;margin-top:8.5px;width:100%;position:relative;cursor:pointer}.hkplayer-skin-default .diyduration::after{content:\'\';display:block;width:2px;height:6px;background-color:#fff;position:absolute;right:-2px;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.hkplayer-skin-default .hkplayer-progress-cache,.hkplayer-skin-default .hkplayer-progress-played{display:block;height:100%;line-height:1;position:absolute;left:0;top:0}.hkplayer-skin-default .hkplayer-progress-cache{width:0;background:rgba(255, 255, 255, .5)}.hkplayer-skin-default .hkplayer-progress-played{display:block;width:0;background-image:linear-gradient(-90deg, #ff4141 0%, #E31106 100%);border-radius:0 1.5px 1.5px 0}.hkplayer-skin-default .hkplayer-progress-btn{display:none;position:absolute;left:0px;top:-5px;width:13px;height:13px;border-radius:30px;background:#FFFFFF;box-shadow:0 0 5px 0 rgba(0, 0, 0, .26);left:100%;-webkit-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}.hkplayer-skin-default .hkplayer-progress-point{position:absolute}.hkplayer-skin-default .hkplayer-progress-point.hkplayer-tips{margin-left:0;top:-25px;display:none;z-index:100}.hkplayer-skin-default .hkplayer-progress-dot{display:inline-block;position:absolute;height:3px;width:5px;top:0px;background:white;border-radius:6px;z-index:16}.hkplayer-skin-default .hkplayer-progress-dot .hkplayer-progress-tip{position:absolute;left:0;top:-40px;height:auto;line-height:30px;width:auto;-webkit-transform:scale(0.8);-ms-transform:scale(0.8);transform:scale(0.8);background:rgba(0, 0, 0, .3);border-radius:6px;border:1px solid rgba(0, 0, 0, .8);cursor:default;white-space:nowrap;display:none}.hkplayer-skin-default .hkplayer-progress-dot-show .hkplayer-progress-tip{display:block}.hkplayer-skin-default .hkplayer-progress-thumbnail{position:absolute;-moz-box-sizing:border-box;box-sizing:border-box}.hkplayer-skin-default .hkplayer-progress-thumbnail.hkplayer-tips{margin-left:0;display:none;z-index:99}.hkplayer-skin-default .hkplayer-progress:hover .hkplayer-progress-outer,.hkplayer-skin-default .hkplayer-progress:hover .hkplayer-progress-inner,.hkplayer-skin-default .hkplayer-progress:focus .hkplayer-progress-outer,.hkplayer-skin-default .hkplayer-progress:focus .hkplayer-progress-inner{height:6px;margin-top:7px}.hkplayer-skin-default .hkplayer-progress:hover .hkplayer-progress-dot,.hkplayer-skin-default .hkplayer-progress:focus .hkplayer-progress-dot{height:6px}.hkplayer-skin-default .hkplayer-progress:hover .hkplayer-progress-btn,.hkplayer-skin-default .hkplayer-progress:focus .hkplayer-progress-btn{display:block;top:-3px}.hkplayer-skin-default.hkplayer-volume-active .hkplayer-progress{z-index:15}.hkplayer-skin-default.hkplayer-definition-active .hkplayer-progress{z-index:15}.hkplayer-skin-default.hkplayer-texttrack-active .hkplayer-progress{z-index:15}.hkplayer-skin-default.hkplayer-playbackrate-active .hkplayer-progress{z-index:15}.hkplayer-skin-default.hkplayer-mobile .hkplayer-progress-btn{display:block !important}.hkplayer-skin-default.hkplayer-mobile .hkplayer-progress:hover .hkplayer-progress-outer,.hkplayer-skin-default.hkplayer-mobile .hkplayer-progress:focus .hkplayer-progress-outer{height:3px !important;margin-top:8.5px !important}.hkplayer-skin-default.hkplayer-mobile .hkplayer-progress:hover .hkplayer-progress-btn,.hkplayer-skin-default.hkplayer-mobile .hkplayer-progress:focus .hkplayer-progress-btn{display:block !important;top:-5px !important}.hkplayer-skin-default .hkplayer-replay{position:absolute;left:0;top:0;width:100%;height:100%;z-index:50;display:none;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center;background:rgba(0, 0, 0, .54);-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;flex-direction:column}.hkplayer-skin-default .hkplayer-replay svg{background:rgba(0, 0, 0, .58);border-radius:100%;cursor:pointer}.hkplayer-skin-default .hkplayer-replay svg path{-webkit-transform:translate(20px, 21px);-ms-transform:translate(20px, 21px);transform:translate(20px, 21px);fill:#ddd}.hkplayer-skin-default .hkplayer-replay svg:hover{background:rgba(0, 0, 0, .38)}.hkplayer-skin-default .hkplayer-replay svg:hover path{fill:#fff}.hkplayer-skin-default .hkplayer-replay .hkplayer-replay-txt{display:inline-block;font-family:PingFangSC-Regular;font-size:14px;color:#fff;line-height:34px}.hkplayer-skin-default.hkplayer.hkplayer-ended.replay .hkplayer-controls{display:none}.hkplayer-skin-default.hkplayer.hkplayer-ended .hkplayer-replay{display:-webkit-flex;display:-moz-box;display:flex}.hkplayer-playback{-webkit-order:5;-moz-box-ordinal-group:6;order:5;width:60px;z-index:18;position:relative;display:block;outline:none;cursor:default;margin:-119px 8px 14px}.hkplayer-playback-active{z-index:41}.hkplayer-playback-active .hkplayer-playback-list{display:block}.hkplayer-playback .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:24px;width:60px;height:24px;color:rgba(255, 255, 255, .8);border-radius:3px;background:rgba(0, 0, 0, .38);position:absolute;bottom:0;cursor:pointer}.hkplayer-playback .name:hover{background-color:#ff4141;color:#fff}.hkplayer-playback-list{display:none;list-style:none;width:60px;background:rgba(0, 0, 0, .54);position:absolute;bottom:30px;left:0;text-align:center;white-space:nowrap;cursor:pointer;border-radius:3px}.hkplayer-playback-list li{opacity:.7;font-family:PingFangSC-Regular;font-size:11px;color:rgba(255, 255, 255, .8);padding:6px 13px;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease, -webkit-transform .3s ease}.hkplayer-playback-list li:hover{opacity:1;color:#fff}.hkplayer-playback-list li.selected{color:#ff4141}.hkplayer-skin-default .hkplayer-download{position:relative;-webkit-order:9;-moz-box-ordinal-group:10;order:9;display:block;cursor:pointer}.hkplayer-skin-default .hkplayer-download .hkplayer-icon{margin-top:3px}.hkplayer-skin-default .hkplayer-download .hkplayer-icon div{position:absolute}.hkplayer-skin-default .hkplayer-download .hkplayer-icon svg{position:relative;top:5px;left:5px}.hkplayer-skin-default .hkplayer-download .hkplayer-tips{margin-left:-20px}.hkplayer-skin-default .hkplayer-download .hkplayer-tips .hkplayer-tip-download{display:block}.hkplayer-skin-default .hkplayer-download:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-download:hover .hkplayer-tips{display:block}.lang-is-en .hkplayer-download .hkplayer-tips{margin-left:-32px}.lang-is-jp .hkplayer-download .hkplayer-tips{margin-left:-40px}.hkplayer-skin-default .danmu-switch{-webkit-order:4;-moz-box-ordinal-group:5;order:4;z-index:26;margin:16px 10px}.hkplayer-skin-default .hkplayer-danmu{display:none;position:absolute;top:0;left:0;right:0;height:100%;overflow:hidden;z-index:9;outline:none}.hkplayer-skin-default .hkplayer-danmu>*{position:absolute;white-space:nowrap;z-index:9}.hkplayer-skin-default .hkplayer-danmu.hkplayer-has-danmu{display:block}.hkplayer-skin-default .hkplayer-panel{outline:none;-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:40px;height:40px;display:inline-block;position:relative;font-family:PingFangSC-Regular;font-size:13px;color:rgba(255, 255, 255, .8);z-index:36}.hkplayer-skin-default .hkplayer-panel .hkplayer-panel-icon{cursor:pointer;position:absolute;margin-left:5px;top:10px}.hkplayer-skin-default .hkplayer-panel-active{display:block !important;bottom:30px}.hkplayer-skin-default .hkplayer-panel-slider{z-index:36;display:none;position:absolute;width:230px;height:230px;background:rgba(0, 0, 0, .54);border-radius:1px;padding:10px 20px;outline:none;left:-115px;bottom:40px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-hidemode{padding-bottom:10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-hidemode-radio li{display:inline;list-style:none;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-hidemode ul{display:-webkit-flex;display:-moz-box;display:flex;-webkit-justify-content:space-around;justify-content:space-around}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-hidemode li{margin:0 12px;font-size:11px;color:#aaa}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-hidemode-font{margin-bottom:10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency{display:block;margin-top:10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-line::-moz-focus-outer{border:0 !important}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-transparency .hkplayer-transparency-bar::-moz-range-progress{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:4px;border-radius:4px;background:linear-gradient(to right, #f85959, #f85959 100%, #aaa)}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea{display:block;margin-top:8px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-name{display:inline-block;position:relative;top:-10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-control{display:inline-block}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-control-down{position:relative;top:-10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-twoquarters{margin-left:-6px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-threequarters{margin-left:-6px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea-full{margin-right:3px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-line::-moz-focus-outer{border:0 !important}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-zero-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-onequarters-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-twoquarters-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-threequarters-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-showarea .hkplayer-showarea-full-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed{display:block}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed-name{display:inline-block;position:relative;top:-10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed-control{display:inline-block}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed-control-down{position:relative;top:-10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-line::-moz-focus-outer{border:0 !important}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-middle-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmuspeed .hkplayer-danmuspeed-large-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont{display:block}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont-name{display:inline-block;position:relative;top:-10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont-control{display:inline-block}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont-control-up{width:150px;margin-left:10px;display:-moz-box;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between;color:#aaa}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont-control-down{position:relative;top:-10px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont-control-down-dots{display:-webkit-flex;display:-moz-box;display:flex;width:150px;margin-left:10px;-webkit-justify-content:space-between;-moz-box-pack:justify;justify-content:space-between}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-line{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;outline:none;width:150px;height:4px;background:#aaa;border-radius:4px;border-style:none;margin-left:10px;margin-top:-2px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-line::-moz-focus-outer{border:0 !important}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-color::-webkit-slider-runnable-track{outline:none;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-color::-moz-range-track{outline:none;background-color:#aaa;border-color:transparent;cursor:pointer;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-color::-ms-track{outline:none;background-color:#aaa;color:transparent;border-color:transparent;width:150px;height:4px;border-radius:4px}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-bar::-webkit-slider-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;margin-top:-4px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-bar::-moz-range-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:0;width:0;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-bar::-ms-thumb{outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:6px solid #f85959;height:6px;width:6px;border-radius:6px;cursor:pointer}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-small-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-middle-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-panel-slider .hkplayer-danmufont .hkplayer-danmufont-large-dot{width:3px;height:3px;border:3px solid #aaa;border-radius:50%;background-color:#aaa;position:relative;top:16px;z-index:-1}.hkplayer-skin-default .hkplayer-playnext{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;cursor:pointer;top:-2px}.hkplayer-skin-default .hkplayer-playnext .hkplayer-icon div{position:absolute}.hkplayer-skin-default .hkplayer-playnext .hkplayer-tips .hkplayer-tip-playnext{display:block}.hkplayer-skin-default .hkplayer-playnext:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-playnext:hover .hkplayer-tips{display:block}.lang-is-en .hkplayer-playnext .hkplayer-tips{margin-left:-25px}.lang-is-jp .hkplayer-playnext .hkplayer-tips{margin-left:-38px}.hkplayer-skin-default.hkplayer-playnext-inactive .hkplayer-playnext{display:none}.hkplayer-skin-default .hkplayer-pip{-webkit-order:9;-moz-box-ordinal-group:10;order:9;position:relative;outline:none;display:block;cursor:pointer;margin-left:10px;margin-top:9px;margin-bottom:11px;height:20px}.hkplayer-skin-default .hkplayer-pip .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;color:rgba(255, 255, 255, .8)}.hkplayer-skin-default .hkplayer-pip .name span{width:60px;height:20px;line-height:20px;background:rgba(0, 0, 0, .38);border-radius:10px;display:inline-block;vertical-align:middle}.hkplayer-skin-default .hkplayer-pip-lay{display:none;width:12px;height:12px;position:absolute;top:8px;right:8px;z-index:105;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAPUExURf///0dwTP///////////2JNjWwAAAAFdFJOU/4AV+NNIaJNugAAAGZJREFUGNNlkNENwCAIBS+2C9gJ6gb9cIAm7r9TjecHpH6AD/AEGL3uMzoPzfvFMUVR3FO8mLrgZJpigsayK1EqOkPojWCFtfhWClLls7EL/xOpLAISOn6a2omNphHScGnstJC4qg9kXhEBJSaJRgAAAABJRU5ErkJggg==") no-repeat;background-size:contain;cursor:pointer}.hkplayer-skin-default .hkplayer-pip-drag{cursor:move;position:absolute;top:0;left:0;width:100%;height:100%;line-height:26px;z-index:30;display:none}.hkplayer-skin-default .hkplayer-pip-drag .drag-handle{width:100%;height:100%;background-image:linear-gradient(0deg, transparent 70%, rgba(0, 0, 0, .5));color:#fff;padding:8px;-moz-box-sizing:border-box;box-sizing:border-box}.hkplayer.hkplayer-inactive .hkplayer-skin-default .hkplayer-pip-drag{display:none}.hkplayer-skin-default.hkplayer-pip-active{position:fixed !important;width:420px;height:236.25px;right:83px;bottom:120px;z-index:999 !important;box-shadow:0 20px 40px 0 rgba(0, 0, 0, .2)}.hkplayer-skin-default.hkplayer-pip-active:hover .hkplayer-pip-drag{display:-webkit-flex;display:-moz-box;display:flex}.hkplayer-skin-default.hkplayer-pip-active:hover .hkplayer-pip-lay{display:block}.hkplayer-skin-default.hkplayer-pip-active.hkplayer-playing .hkplayer-start{display:none}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-danmu{display:none}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls{z-index:140}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-placeholder,.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-fullscreen,.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-cssfullscreen,.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-volume,.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .danmu-switch,.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-playback,.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-definition{display:none}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-play{position:absolute;width:48px;height:48px;bottom:94.125px;left:186px;background:rgba(0, 0, 0, .5);border-radius:50%}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-play .hkplayer-tips{top:48px}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-play .hkplayer-icon svg{margin:10px}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-progress{top:41px}.hkplayer-skin-default.hkplayer-pip-active .hkplayer-controls .hkplayer-time{position:absolute;top:6px;left:6px}.hkplayer-skin-default .hkplayer-rotate{position:relative;-webkit-order:10;-moz-box-ordinal-group:11;order:10;display:block;cursor:pointer}.hkplayer-skin-default .hkplayer-rotate .hkplayer-icon{margin-top:7px;width:26px}.hkplayer-skin-default .hkplayer-rotate .hkplayer-icon div{position:absolute}.hkplayer-skin-default .hkplayer-rotate .hkplayer-tips{margin-left:-22px}.hkplayer-skin-default .hkplayer-rotate .hkplayer-tips .hkplayer-tip-rotate{display:block}.hkplayer-skin-default .hkplayer-rotate:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-rotate:hover .hkplayer-tips{display:block}.lang-is-en .hkplayer-rotate .hkplayer-tips{margin-left:-26px}.lang-is-jp .hkplayer-rotate .hkplayer-tips{margin-left:-38px}.hkplayer-skin-default .hkplayer-reload{position:relative;-webkit-order:1;-moz-box-ordinal-group:2;order:1;display:block;width:40px;height:40px;cursor:pointer}.hkplayer-skin-default .hkplayer-reload .hkplayer-icon{margin-top:7px;width:26px}.hkplayer-skin-default .hkplayer-reload .hkplayer-icon div{position:absolute}.hkplayer-skin-default .hkplayer-reload .hkplayer-tips{margin-left:-22px}.hkplayer-skin-default .hkplayer-reload .hkplayer-tips .hkplayer-tip-reload{display:block}.hkplayer-skin-default .hkplayer-reload:hover{opacity:0.85}.hkplayer-skin-default .hkplayer-reload:hover .hkplayer-tips{display:block}.lang-is-en .hkplayer-reload .hkplayer-tips{margin-left:-26px}.lang-is-jp .hkplayer-reload .hkplayer-tips{margin-left:-38px}.hkplayer-skin-default .hkplayer-screenshot{-webkit-order:8;-moz-box-ordinal-group:9;order:8;width:60px;z-index:18;position:relative;outline:none;cursor:pointer;margin:14px 8px}.hkplayer-skin-default .hkplayer-screenshot .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:24px;width:60px;height:24px;color:rgba(255, 255, 255, .8);border-radius:3px;background:rgba(0, 0, 0, .38);position:absolute;bottom:0;cursor:pointer}.hkplayer-skin-default .hkplayer-screenshot .name:hover{background-color:#ff4141;color:#fff}.lang-is-en .hkplayer-screenshot .name span,.lang-is-jp .hkplayer-screenshot .name span{width:75px;height:20px}.hkplayer-skin-default .hkplayer-texttrack{-webkit-order:7;-moz-box-ordinal-group:8;order:7;width:60px;height:150px;z-index:18;position:relative;outline:none;display:none;cursor:default;margin-top:-119px}.hkplayer-skin-default .hkplayer-texttrack ul{display:none;list-style:none;min-width:78px;background:rgba(0, 0, 0, .8);border-radius:1px;position:absolute;bottom:30px;text-align:center;white-space:nowrap;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:26;cursor:pointer}.hkplayer-skin-default .hkplayer-texttrack ul li{opacity:0.7;font-family:PingFangSC-Regular;font-size:11px;color:rgba(255, 255, 255, .8);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:auto;padding:6px 13px}.hkplayer-skin-default .hkplayer-texttrack ul li.selected{color:#ff4141;opacity:1}.hkplayer-skin-default .hkplayer-texttrack ul li:hover{color:#ff4141;opacity:1}.hkplayer-skin-default .hkplayer-texttrack .name{text-align:center;font-family:PingFangSC-Regular;font-size:13px;line-height:20px;height:20px;cursor:pointer;color:rgba(255, 255, 255, .8);position:absolute;bottom:0;width:60px;height:20px;line-height:20px;background:rgba(0, 0, 0, .38);border-radius:10px;display:inline-block;vertical-align:middle}.hkplayer-skin-default.hkplayer-texttrack-active .hkplayer-texttrack ul{display:block}.hkplayer-skin-default.hkplayer-is-texttrack .hkplayer-texttrack{display:block}.hkplayer-skin-default .hkplayer-icon{display:block;width:44px;height:52px;overflow:hidden;fill:#fff}.hkplayer-skin-default .hkplayer-icon svg{position:absolute}.hkplayer-skin-default .hkplayer-tips{background:rgba(0, 0, 0, .8);display:none;position:absolute;font-family:PingFangSC-Regular;font-size:11px;color:#fff;padding:4px 6px;border-radius:4px;text-align:center;top:-28px;left:50%;margin-left:-18px;width:auto;white-space:nowrap}.hkplayer-skin-default.hkplayer-mobile .hkplayer-tips{display:none !important}.hkplayer-skin-default .hkplayer-error{background:#000;display:none;position:absolute;left:0;top:0;width:100%;height:100%;z-index:125;font-family:PingFangSC-Regular;font-size:14px;color:#fff;text-align:center;line-height:100%;-webkit-justify-content:center;-moz-box-pack:center;justify-content:center;-webkit-align-items:center;-moz-box-align:center;align-items:center}.hkplayer-skin-default .hkplayer-error .hkplayer-error-refresh{color:#ff4141;padding:0 3px;cursor:pointer}.hkplayer-skin-default .hkplayer-error .hkplayer-error-text{line-height:18px;margin:auto 6px}.hkplayer-skin-default.hkplayer-is-error .hkplayer-error{display:-webkit-flex;display:-moz-box;display:flex}.hkplayer-skin-default .hkplayer-memoryplay-spot{position:absolute;height:32px;left:10px;bottom:46px;background:rgba(0, 0, 0, .5);border-radius:32px;line-height:32px;color:#ddd;z-index:15;padding:0 32px 0 16px}.hkplayer-skin-default .hkplayer-memoryplay-spot .hkplayer-lasttime{color:red;font-weight:bold}.hkplayer-skin-default .hkplayer-memoryplay-spot .btn-close{position:absolute;width:16px;height:16px;right:10px;top:2px;cursor:pointer;color:#fff;font-size:16px}\n',""]),e.exports=t},"./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
      !*** ./node_modules/css-loader/dist/runtime/api.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,r){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n,a,i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var s=(r=o,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(a," */")),l=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},"./node_modules/d/index.js":
/*!*********************************!*\
      !*** ./node_modules/d/index.js ***!
      \*********************************/
/*! no static exports found */function(e,t,r){var n=r(/*! type/value/is */"./node_modules/type/value/is.js"),a=r(/*! type/plain-function/is */"./node_modules/type/plain-function/is.js"),i=r(/*! es5-ext/object/assign */"./node_modules/es5-ext/object/assign/index.js"),o=r(/*! es5-ext/object/normalize-options */"./node_modules/es5-ext/object/normalize-options.js"),s=r(/*! es5-ext/string/#/contains */"./node_modules/es5-ext/string/#/contains/index.js");(e.exports=function(e,t){var r,a,l,u,d;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],n(e)?(r=s.call(e,"c"),a=s.call(e,"e"),l=s.call(e,"w")):(r=l=!0,a=!1),d={value:t,configurable:r,enumerable:a,writable:l},u?i(o(u),d):d}).gs=function(e,t,r){var l,u,d,c;return"string"!=typeof e?(d=r,r=t,t=e,e=null):d=arguments[3],n(t)?a(t)?n(r)?a(r)||(d=r,r=void 0):r=void 0:(d=t,t=r=void 0):t=void 0,n(e)?(l=s.call(e,"c"),u=s.call(e,"e")):(l=!0,u=!1),c={get:t,set:r,configurable:l,enumerable:u},d?i(o(d),c):c}},"./node_modules/danmu.js/dist/index.js":
/*!*********************************************!*\
      !*** ./node_modules/danmu.js/dist/index.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,r){(function(e){var r,n,a,i,o="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)};window,i=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=4)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(n=r(26))&&n.__esModule?n:{default:n},o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"setLogger",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.logger=new i.default(e+".js")}}]),e}();t.default=o,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n={createDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=document.createElement(e);return a.className=n,a.innerHTML=t,Object.keys(r).forEach((function(t){var n=t,i=r[t];"video"===e||"audio"===e?i&&a.setAttribute(n,i):a.setAttribute(n,i)})),a},hasClass:function(e,t){return e.classList?Array.prototype.some.call(e.classList,(function(e){return e===t})):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):n.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):n.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}))},toggleClass:function(e,t){t.split(/\s+/g).forEach((function(t){n.hasClass(e,t)?n.removeClass(e,t):n.addClass(e,t)}))},findDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],r=void 0;try{r=e.querySelector(t)}catch(n){t.startsWith("#")&&(r=e.getElementById(t.slice(1)))}return r},deepCopy:function(e,t){if("Object"===n.typeOf(t)&&"Object"===n.typeOf(e))return Object.keys(t).forEach((function(r){"Object"!==n.typeOf(t[r])||t[r]instanceof Node?"Array"===n.typeOf(t[r])?e[r]="Array"===n.typeOf(e[r])?e[r].concat(t[r]):t[r]:e[r]=t[r]:e[r]?n.deepCopy(e[r],t[r]):e[r]=t[r]})),e},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},formatTime:function(e){var t=Math.floor(e);return 1e3*t+(e-t)},offInDestroy:function(e,t,r,n){e.once(n,(function a(){e.off(t,r),e.off(n,a)}))},on:function(e,t,r,a){a?(e.on(t,r),n.offInDestroy(e,t,r,a)):e.on(t,(function n(a){r(a),e.off(t,n)}))}};t.default=n,e.exports=t.default},function(e,t,r){var n=r(19)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){e.exports=function(e){return null!=e}},function(e,t,r){e.exports=r(5)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,a=(n=r(6))&&n.__esModule?n:{default:n};r(33),t.default=a.default,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(7)),i=c(r(0)),s=c(r(27)),l=c(r(31)),u=c(r(1)),d=r(32);function c(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.setLogger("danmu"),r.logger.info("danmu.js version: "+d.version);var n=r;if(n.config=u.default.deepCopy({overlap:!1,area:{start:0,end:1},live:!1,comments:[],direction:"r2l"},e),n.hideArr=[],n.domObj=new l.default,(0,a.default)(n),n.config.comments.forEach((function(e){e.duration=e.duration?e.duration:5e3,e.mode||(e.mode="scroll")})),!n.config.container||1!==n.config.container.nodeType)return n.emit("error","container id can't be empty"),h(r,!1);if(n.container=n.config.container,n.config.containerStyle){var i=n.config.containerStyle;Object.keys(i).forEach((function(e){n.container.style[e]=i[e]}))}return n.live=n.config.live,n.player=n.config.player,n.direction=n.config.direction,u.default.addClass(n.container,"danmu"),n.bulletBtn=new s.default(n),n.emit("ready"),r.logger.info("ready"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"start",value:function(){this.logger.info("start"),this.bulletBtn.main.start()}},{key:"pause",value:function(){this.logger.info("pause"),this.bulletBtn.main.pause()}},{key:"play",value:function(){this.logger.info("play"),this.bulletBtn.main.play()}},{key:"stop",value:function(){this.logger.info("stop"),this.bulletBtn.main.stop()}},{key:"destroy",value:function(){for(var e in this.logger.info("destroy"),this.stop(),this.bulletBtn.destroy(),this.domObj.destroy(),this)delete this[e];this.emit("destroy")}},{key:"sendComment",value:function(e){this.logger.info("sendComment: "+(e.txt||"[DOM Element]")),e.duration||(e.duration=15e3),e&&e.id&&e.duration&&(e.el||e.txt)&&(e.duration=e.duration?e.duration:5e3,e.style&&(this.opacity&&this.opacity!==e.style.opacity&&(e.style.opacity=this.opacity),this.fontSize&&this.fontSize!==e.style.fontSize&&(e.style.fontSize=this.fontSize),this.like&&(e.like=e.like?e.like:this.like)),e.prior||e.realTime?(this.bulletBtn.main.data.unshift(e),e.realTime&&(this.bulletBtn.main.readData(),this.bulletBtn.main.dataHandle())):this.bulletBtn.main.data.push(e))}},{key:"setCommentID",value:function(e,t){var r=this;this.logger.info("setCommentID: oldID "+e+" newID "+t);var n=this.container.getBoundingClientRect();e&&t&&(this.bulletBtn.main.data.some((function(r){return r.id===e&&(r.id=t,!0)})),this.bulletBtn.main.queue.some((function(a){return a.id===e&&(a.id=t,a.pauseMove(n),"paused"!==r.bulletBtn.main.status&&a.startMove(n),!0)})))}},{key:"setCommentDuration",value:function(e,t){var r=this;this.logger.info("setCommentDuration: id "+e+" duration "+t);var n=this.container.getBoundingClientRect();e&&t&&(t=t||5e3,this.bulletBtn.main.data.some((function(r){return r.id===e&&(r.duration=t,!0)})),this.bulletBtn.main.queue.some((function(a){return a.id===e&&(a.duration=t,a.pauseMove(n),"paused"!==r.bulletBtn.main.status&&a.startMove(n),!0)})))}},{key:"setCommentLike",value:function(e,t){this.logger.info("setCommentLike: id "+e+" like "+t);var r=this.container.getBoundingClientRect();this.like=t,e&&t&&(this.bulletBtn.main.data.some((function(r){return r.id===e&&(r.like=t,!0)})),this.bulletBtn.main.queue.some((function(n){return n.id===e&&(n.pauseMove(r),n.setLikeDom(t.el,t.style),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(r),!0)})))}},{key:"restartComment",value:function(e){this.logger.info("restartComment: id "+e),this.mouseControl=!1;var t=this.container.getBoundingClientRect();e&&this.bulletBtn.main.queue.some((function(r){return r.id===e&&("paused"!==r.danmu.bulletBtn.main.status?r.startMove(t,!0):r.status="paused",!0)}))}},{key:"freezeComment",value:function(e){this.logger.info("freezeComment: id "+e),this.mouseControl=!0;var t=this.container.getBoundingClientRect();e&&this.bulletBtn.main.queue.some((function(r){return r.id===e&&(r.status="forcedPause",r.pauseMove(t),r.el&&r.el.style&&(r.el.style.zIndex=10),!0)}))}},{key:"removeComment",value:function(e){this.logger.info("removeComment: id "+e),e&&(this.bulletBtn.main.queue.some((function(t){return t.id===e&&(t.remove(),!0)})),this.bulletBtn.main.data=this.bulletBtn.main.data.filter((function(t){return t.id!==e})))}},{key:"setAllDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll",t=arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.logger.info("setAllDuration: mode "+e+" duration "+t+" force "+r);var n=this.container.getBoundingClientRect();t&&(t=t||5e3,r&&(this.bulletBtn.main.forceDuration=t),this.bulletBtn.main.data.forEach((function(r){e===r.mode&&(r.duration=t)})),this.bulletBtn.main.queue.forEach((function(r){e===r.mode&&(r.duration=t,r.pauseMove(n),"paused"!==r.danmu.bulletBtn.main.status&&r.startMove(n))})))}},{key:"setOpacity",value:function(e){this.logger.info("setOpacity: opacity "+e),this.container.style.opacity=e}},{key:"setFontSize",value:function(e,t){var r=this;this.logger.info("setFontSize: size "+e+" channelSize "+t),this.fontSize=e+"px",e&&(this.bulletBtn.main.data.forEach((function(e){e.style&&(e.style.fontSize=r.fontSize)})),this.bulletBtn.main.queue.forEach((function(e){e.options.style||(e.options.style={}),e.options.style.fontSize=r.fontSize,e.setFontSize(r.fontSize),t&&(e.top=e.channel_id[0]*t,e.topInit())}))),t&&(this.config.channelSize=t,this.bulletBtn.main.channel.resize(!0))}},{key:"setArea",value:function(e){this.logger.info("setArea: area "+e),this.config.area=e,this.bulletBtn.main.channel.resize(!0)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";this.logger.info("hide: mode "+e),this.hideArr.indexOf(e)<0&&this.hideArr.push(e);var t=this.bulletBtn.main.queue.filter((function(t){return e===t.mode||"color"===e&&t.color}));t.forEach((function(e){return e.remove()}))}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scroll";this.logger.info("show: mode "+e);var t=this.hideArr.indexOf(e);t>-1&&this.hideArr.splice(t,1)}},{key:"setDirection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"r2l";this.logger.info("setDirection: direction "+e),this.emit("changeDirection",e)}},{key:"resize",value:function(){this.logger.info("resize"),this.emit("channel_resize")}}]),t}(i.default);t.default=f,e.exports=t.default},function(e,t,r){var n,a,i,s,l,u,d,c=r(8),h=r(25),f=Function.prototype.apply,p=Function.prototype.call,g=Object.create,y=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,k={configurable:!0,enumerable:!1,writable:!0};a=function(e,t){var r,a;return h(t),a=this,n.call(this,e,r=function(){i.call(a,e,r),f.call(t,this,arguments)}),r.__eeOnceListener__=t,this},l={on:n=function(e,t){var r;return h(t),v.call(this,"__ee__")?r=this.__ee__:(r=k.value=g(null),y(this,"__ee__",k),k.value=null),r[e]?"object"==o(r[e])?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:a,off:i=function(e,t){var r,n,a,i;if(h(t),!v.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==o(n=r[e]))for(i=0;a=n[i];++i)a!==t&&a.__eeOnceListener__!==t||(2===n.length?r[e]=n[i?0:1]:n.splice(i,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:s=function(e){var t,r,n,a,i;if(v.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==(void 0===a?"undefined":o(a))){for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];for(a=a.slice(),t=0;n=a[t];++t)f.call(n,this,i)}else switch(arguments.length){case 1:p.call(a,this);break;case 2:p.call(a,this,arguments[1]);break;case 3:p.call(a,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];f.call(a,this,i)}}},u={on:c(n),once:c(a),off:c(i),emit:c(s)},d=m({},u),e.exports=t=function(e){return null==e?g(d):m(Object(e),u)},t.methods=l},function(e,t,r){var n=r(3),a=r(9),i=r(13),o=r(21),s=r(22);(e.exports=function(e,t){var r,a,l,u,d;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],n(e)?(r=s.call(e,"c"),a=s.call(e,"e"),l=s.call(e,"w")):(r=l=!0,a=!1),d={value:t,configurable:r,enumerable:a,writable:l},u?i(o(u),d):d}).gs=function(e,t,r){var l,u,d,c;return"string"!=typeof e?(d=r,r=t,t=e,e=null):d=arguments[3],n(t)?a(t)?n(r)?a(r)||(d=r,r=void 0):r=void 0:(d=t,t=r=void 0):t=void 0,n(e)?(l=s.call(e,"c"),u=s.call(e,"e")):(l=!0,u=!1),c={get:t,set:r,configurable:l,enumerable:u},d?i(o(d),c):c}},function(e,t,r){var n=r(10),a=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!a.test(i.call(e))}},function(e,t,r){var n=r(11);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){var n=r(12);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){var n=r(3),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(a,void 0===e?"undefined":o(e))}},function(e,t,r){e.exports=r(14)()?Object.assign:r(15)},function(e,t,r){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){var n=r(16),a=r(20),i=Math.max;e.exports=function(e,t){var r,o,s,l=i(arguments.length,2);for(e=Object(a(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},o=1;o<l;++o)n(t=arguments[o]).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){e.exports=r(17)()?Object.keys:r(18)},function(e,t,r){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){var n=r(2),a=Object.keys;e.exports=function(e){return a(n(e)?Object(e):e)}},function(e,t,r){e.exports=function(){}},function(e,t,r){var n=r(2);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){var n=r(2),a=Array.prototype.forEach,i=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return a.call(arguments,(function(e){n(e)&&o(Object(e),t)})),t}},function(e,t,r){e.exports=r(23)()?String.prototype.contains:r(24)},function(e,t,r){var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=window.location.href.indexOf("danmu-debug")>-1,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructorName=t||""}return n(e,[{key:"info",value:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];a&&(t=console).log.apply(t,["[Danmu Log]["+this.constructorName+"]",e].concat(n))}}]),e}();t.default=i,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(0)),i=l(r(1)),s=l(r(28));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.setLogger("control"),r.danmu=e,r.main=new s.default(e),e.config.defaultOff||r.main.start(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"createSwitch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.logger.info("createSwitch"),this.switchBtn=i.default.createDom("dk-switch",'<span class="txt">弹</span>',{},"danmu-switch "+(e?"danmu-switch-active":"")),this.switchBtn}},{key:"destroy",value:function(){for(var e in this.logger.info("destroy"),this.main.destroy(),this)delete this[e]}}]),t}(a.default);t.default=u,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(0)),i=u(r(29)),s=u(r(30)),l=u(r(1));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.setLogger("main"),r.danmu=e,r.container=e.container,r.channel=new i.default(e),r.data=[].concat(e.config.comments),r.playedData=[],r.queue=[],r.timer=null,r.retryTimer=null,r.retryStatus="normal",r.interval=e.config.interval||2e3,r.status="idle",l.default.on(e,"bullet_remove",r.updateQueue.bind(r),"destroy");var n=r;return l.default.on(r.danmu,"changeDirection",(function(e){n.danmu.direction=e}),"destroy"),r.nums=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",value:function(){for(var e in this.logger.info("destroy"),clearTimeout(this.dataHandleTimer),this.channel.destroy(),this.data=[],this)delete this[e]}},{key:"updateQueue",value:function(e){this.logger.info("updateQueue");var t=this;t.queue.some((function(r,n){return r.id===e.bullet.id&&(t.queue.splice(n,1),!0)}))}},{key:"init",value:function(e,t){t.logger.info("init"),t||(t=this),t.retryStatus="normal",t.data.sort((function(e,t){return e.start-t.start})),t.retryTimer||function e(){"closed"===t.status&&"stop"===t.retryStatus||("playing"===t.status&&(t.readData(),t.dataHandle()),"stop"===t.retryStatus&&"paused"!==this.status||(t.dataHandleTimer=setTimeout((function(){e()}),t.interval-1e3)))}()}},{key:"start",value:function(){this.logger.info("start"),this.status="playing",this.queue=[],this.container.innerHTML="",this.channel.resetWithCb(this.init,this)}},{key:"stop",value:function(){this.logger.info("stop"),this.status="closed",this.retryTimer=null,this.retryStatus="stop",this.channel.reset(),this.queue=[],this.container.innerHTML=""}},{key:"play",value:function(){var e=this;this.logger.info("play"),this.status="playing";var t=this.channel.channels,r=this.danmu.container.getBoundingClientRect();t&&t.length>0&&["scroll","top","bottom"].forEach((function(n){e.queue.forEach((function(e){e.startMove(r),e.resized=!0}));for(var a=0;a<t.length;a++)t[a].queue[n].forEach((function(e){e.resized=!1}))}))}},{key:"pause",value:function(){this.logger.info("pause"),this.status="paused";var e=this.channel.channels,t=this.danmu.container.getBoundingClientRect();e&&e.length>0&&this.queue.forEach((function(e){e.pauseMove(t)}))}},{key:"dataHandle",value:function(){var e=this;"paused"!==this.status&&"closed"!==this.status&&e.queue.length&&e.queue.forEach((function(t){"waiting"===t.status&&t.startMove(e.channel.containerPos)}))}},{key:"readData",value:function(){var e=this,t=this.danmu,r=0;t.player&&t.player.currentTime&&(r=l.default.formatTime(t.player.currentTime));var n=void 0,a=e.interval,i=e.channel,o=void 0;t.player?(o=e.data.filter((function(t){return!t.start&&e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)&&(t.start=r),e.danmu.hideArr.indexOf(t.mode)<0&&(!t.color||e.danmu.hideArr.indexOf("color")<0)&&t.start-a<=r&&r<=t.start+a})),t.live&&(e.data=e.data.filter((function(e){return e.start||(e.start=r),e.start>r-3*a})))):0===(o=e.data.splice(0,1)).length&&(o=e.playedData.splice(0,1)),o.length>0&&o.forEach((function(r){e.forceDuration&&e.forceDuration!=r.duration&&(r.duration=e.forceDuration),n=new s.default(t,r),r.hasAttached||(n.attach(),r.hasAttached=!0,i.addBullet(n).result?(e.queue.push(n),e.nums++,n.topInit()):(n.detach(),r.hasAttached=!1,r.noDiscard&&(r.prior?e.data.unshift(r):e.data.push(r))))}))}}]),t}(a.default);t.default=d,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(0)),i=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.setLogger("channel"),r.danmu=e,r.reset();var n=r;return i.default.on(r.danmu,"bullet_remove",(function(e){n.removeBullet(e.bullet)}),"destroy"),r.direction=e.direction,i.default.on(r.danmu,"changeDirection",(function(e){n.direction=e}),"destroy"),r.containerPos=r.danmu.container.getBoundingClientRect(),r.containerWidth=r.containerPos.width,r.containerHeight=r.containerPos.height,r.containerLeft=r.containerPos.left,r.containerRight=r.containerPos.right,i.default.on(r.danmu,"channel_resize",(function(){n.containerPos=n.danmu.container.getBoundingClientRect(),n.resizing||(n.containerWidth=n.containerPos.width,n.containerHeight=n.containerPos.height,n.containerLeft=n.containerPos.left,n.containerRight=n.containerPos.right,n.resize(!0))}),"destroy"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",value:function(){for(var e in this.logger.info("destroy"),clearTimeout(this.resizeTimer),clearTimeout(this.resetTimer),this.channels=[],this)delete this[e]}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.info("resize");var t=this.danmu.container,r=this;r.resizing||(r.resizing=!0,this.resizeTimer=setTimeout((function(){r.danmu.bulletBtn.main.status,r.danmu.bulletBtn.main.data&&r.danmu.bulletBtn.main.data.forEach((function(e){e.bookChannelId&&(delete e.bookChannelId,r.logger.info("resize导致"+e.id+"号优先弹幕预定取消"))})),r.logger.info("resize导致所有轨道恢复正常使用");var n=t.getBoundingClientRect();r.width=n.width,r.height=n.height,r.danmu.config.area&&r.danmu.config.area.start>=0&&r.danmu.config.area.end>=r.danmu.config.area.start&&("b2t"===r.direction?r.width=r.width*(r.danmu.config.area.end-r.danmu.config.area.start):r.height=r.height*(r.danmu.config.area.end-r.danmu.config.area.start)),r.container=t;var a,i=r.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);a="b2t"===r.direction?Math.floor(r.width/i):Math.floor(r.height/i);for(var o=[],s=0;s<a;s++)o[s]={id:s,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(r.channels&&r.channels.length<=o.length){for(var l=function(t){o[t]={id:t,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach((function(n){r.channels[t].queue[n].forEach((function(a){a.el&&(o[t].queue[n].push(a),a.resized||(a.pauseMove(r.containerPos,e),"paused"!==a.danmu.bulletBtn.main.status&&a.startMove(r.containerPos),a.resized=!0))}))})),r.channels[t].queue.bottom.forEach((function(n){if(n.el){if(o[t+o.length-r.channels.length].queue.bottom.push(n),n.channel_id[0]+n.channel_id[1]-1===t){var a=[].concat(n.channel_id);n.channel_id=[a[0]-r.channels.length+o.length,a[1]],n.top=n.channel_id[0]*i,r.danmu.config.area&&r.danmu.config.area.start&&(n.top+=r.containerHeight*r.danmu.config.area.start),n.topInit()}n.resized||(n.pauseMove(r.containerPos,e),"paused"!==n.danmu.bulletBtn.main.status&&n.startMove(r.containerPos),n.resized=!0)}}))},u=0;u<r.channels.length;u++)l(u);for(var d=function(e){["scroll","top","bottom"].forEach((function(t){o[e].queue[t].forEach((function(e){e.resized=!1}))}))},c=0;c<o.length;c++)d(c);r.channels=o,"b2t"===r.direction?r.channelWidth=i:r.channelHeight=i}else if(r.channels&&r.channels.length>o.length){for(var h=function(t){o[t]={id:t,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach((function(n){if("top"===n&&t>Math.floor(o.length/2));else if("bottom"===n&&t<=Math.floor(o.length/2));else{var a="bottom"===n?t-o.length+r.channels.length:t;r.channels[a].queue[n].forEach((function(s,l){if(s.el){if(o[t].queue[n].push(s),"bottom"===n&&s.channel_id[0]+s.channel_id[1]-1===a){var u=[].concat(s.channel_id);s.channel_id=[u[0]-r.channels.length+o.length,u[1]],s.top=s.channel_id[0]*i,r.danmu.config.area&&r.danmu.config.area.start&&(s.top+=r.containerHeight*r.danmu.config.area.start),s.topInit()}s.pauseMove(r.containerPos,e),"paused"!==s.danmu.bulletBtn.main.status&&s.startMove(r.containerPos),s.resized||(s.resized=!0)}r.channels[a].queue[n].splice(l,1)}))}}))},f=0;f<o.length;f++)h(f);for(var p=function(e){["scroll","top","bottom"].forEach((function(t){o[e].queue[t].forEach((function(e){e.resized=!1}))}))},g=0;g<o.length;g++)p(g);r.channels=o,"b2t"===r.direction?r.channelWidth=i:r.channelHeight=i}r.resizing=!1}),10))}},{key:"addBullet",value:function(e){var t=this,r=this.danmu,n=this.channels,a=void 0,i=void 0,o=void 0;if("b2t"===t.direction?(i=this.channelWidth,o=Math.ceil(e.width/i)):(a=this.channelHeight,o=Math.ceil(e.height/a)),o>n.length)return{result:!1,message:"exceed channels.length, occupy="+o+",channelsSize="+n.length};for(var s=!0,l=void 0,u=-1,d=0,c=n.length;d<c;d++)if(n[d].queue[e.mode].some((function(t){return t.id===e.id})))return{result:!1,message:"exsited, channelOrder="+d+",danmu_id="+e.id};if("scroll"===e.mode)for(var h=0,f=n.length-o;h<=f;h++){s=!0;for(var p=h;p<h+o;p++){if((l=n[p]).operating.scroll){s=!1;break}if((l.bookId.scroll||e.prior)&&l.bookId.scroll!==e.id){s=!1;break}l.operating.scroll=!0;var g=l.queue.scroll[0];if(g){var y=g.el.getBoundingClientRect();if("b2t"===t.direction){if(y.bottom>t.containerPos.bottom){s=!1,l.operating.scroll=!1;break}}else if(y.right>t.containerPos.right){s=!1,l.operating.scroll=!1;break}var m,v=void 0,k=void 0,b=void 0,w=void 0;if("b2t"===t.direction?(k=(y.top-t.containerPos.top+y.height)/(v=(t.containerPos.height+y.height)/g.duration),b=t.containerPos.height,w=(t.containerPos.height+e.height)/e.duration):(k=(y.left-t.containerPos.left+y.width)/(v=(t.containerPos.width+y.width)/g.duration),b=t.containerPos.width,w=(t.containerPos.width+e.width)/e.duration),m=b/w,r.config.bOffset||(r.config.bOffset=0),v<w&&k+r.config.bOffset>m){s=!1,l.operating.scroll=!1;break}}l.operating.scroll=!1}if(s){u=h;break}}else if("top"===e.mode)for(var E=0,T=n.length-o;E<=T;E++){s=!0;for(var _=E;_<E+o;_++){if(_>Math.floor(n.length/2)){s=!1;break}if((l=n[_]).operating[e.mode]){s=!1;break}if((l.bookId[e.mode]||e.prior)&&l.bookId[e.mode]!==e.id){s=!1;break}if(l.operating[e.mode]=!0,l.queue[e.mode].length>0){s=!1,l.operating[e.mode]=!1;break}l.operating[e.mode]=!1}if(s){u=E;break}}else if("bottom"===e.mode)for(var x=n.length-o;x>=0;x--){s=!0;for(var S=x;S<x+o;S++){if(S<=Math.floor(n.length/2)){s=!1;break}if((l=n[S]).operating[e.mode]){s=!1;break}if((l.bookId[e.mode]||e.prior)&&l.bookId[e.mode]!==e.id){s=!1;break}if(l.operating[e.mode]=!0,l.queue[e.mode].length>0){s=!1,l.operating[e.mode]=!1;break}l.operating[e.mode]=!1}if(s){u=x;break}}if(-1!==u){for(var C=u,A=u+o;C<A;C++)(l=n[C]).operating[e.mode]=!0,l.queue[e.mode].unshift(e),e.prior&&(delete l.bookId[e.mode],t.logger.info(C+"号轨道恢复正常使用")),l.operating[e.mode]=!1;return e.prior&&(t.logger.info(e.id+"号优先弹幕运行完毕"),delete e.bookChannelId,r.player&&r.bulletBtn.main.data.some((function(t){return t.id===e.id&&(delete t.bookChannelId,!0)}))),e.channel_id=[u,o],"b2t"===t.direction?(e.top=u*i,t.danmu.config.area&&t.danmu.config.area.start&&(e.top+=t.containerWidth*t.danmu.config.area.start)):(e.top=u*a,t.danmu.config.area&&t.danmu.config.area.start&&(e.top+=t.containerHeight*t.danmu.config.area.start)),{result:e,message:"success"}}if(e.options.realTime){var R=0,D=null;if(t.danmu.bulletBtn.main.queue.forEach((function(e,r){e.el&&e.el.getBoundingClientRect().right>t.containerPos.right&&e.start>=R&&(R=e.start,D=e)})),D){e.channel_id=D.channel_id;for(var L=D.channel_id[0],O=D.channel_id[0]+D.channel_id[1];L<O;L++)(l=n[L]).operating[e.mode]=!0,l.queue[e.mode].unshift(e),e.prior&&delete l.bookId[e.mode],l.operating[e.mode]=!1;return e.top=D.top,t.danmu.config.area&&t.danmu.config.area.start&&(e.top+=t.containerHeight*t.danmu.config.area.start),{result:e,message:"success"}}}if(e.prior)if(e.bookChannelId)r.player&&r.bulletBtn.main.data.some((function(r){return r.id===e.id&&(t.logger.info(e.id+"号优先弹幕将于2秒后再次请求注册"),r.start+=2e3,!0)}));else{u=-1;for(var P=0,I=n.length-o;P<=I;P++){s=!0;for(var M=P;M<P+o;M++)if(n[M].bookId[e.mode]){s=!1;break}if(s){u=P;break}}if(-1!==u){for(var F=u;F<u+o;F++)n[F].bookId[e.mode]=e.id,t.logger.info(F+"号轨道被"+e.id+"号优先弹幕预定");r.player&&r.bulletBtn.main.data.some((function(r){return r.id===e.id&&(t.logger.info(e.id+"号优先弹幕将于2秒后再次请求注册"),r.start+=2e3,r.bookChannelId=[u,o],t.logger.info(e.id+"号优先弹幕预定了"+u+"~"+(u+o-1)+"号轨道"),!0)}))}}return{result:!1,message:"no surplus will right"}}},{key:"removeBullet",value:function(e){this.logger.info("removeBullet "+(e.options.txt||"[DOM Element]"));for(var t=this.channels,r=e.channel_id,n=void 0,a=r[0],i=r[0]+r[1];a<i;a++)if(n=t[a]){n.operating[e.mode]=!0;var o=-1;n.queue[e.mode].some((function(t,r){return t.id===e.id&&(o=r,!0)})),o>-1&&n.queue[e.mode].splice(o,1),n.operating[e.mode]=!1}e.options.loop&&this.danmu.bulletBtn.main.playedData.push(e.options)}},{key:"resetArea",value:function(){this.logger.info("resetArea");var e=this.danmu.container,t=this,r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.danmu.config.area&&t.danmu.config.area.start>=0&&t.danmu.config.area.end>=t.danmu.config.area.start&&("b2t"===t.direction?t.width=t.width*(t.danmu.config.area.end-t.danmu.config.area.start):t.height=t.height*(t.danmu.config.area.end-t.danmu.config.area.start)),t.container=e;var n,a=t.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);n="b2t"===t.direction?Math.floor(t.width/a):Math.floor(t.height/a);for(var i=[],o=0;o<n;o++)i[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};if(t.channels&&t.channels.length<=i.length){for(var s=function(e){i[e]={id:e,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top"].forEach((function(r){t.channels[e].queue[r].forEach((function(n){n.el&&(i[e].queue[r].push(n),n.resized||(n.pauseMove(t.containerPos,!1),n.startMove(t.containerPos),n.resized=!0))}))})),t.channels[e].queue.bottom.forEach((function(r){if(r.el){if(i[e+i.length-t.channels.length].queue.bottom.push(r),r.channel_id[0]+r.channel_id[1]-1===e){var n=[].concat(r.channel_id);r.channel_id=[n[0]-t.channels.length+i.length,n[1]],r.top=r.channel_id[0]*a,t.danmu.config.area&&t.danmu.config.area.start&&(r.top+=t.containerHeight*t.danmu.config.area.start),r.topInit()}r.resized||(r.pauseMove(t.containerPos,!1),r.startMove(t.containerPos),r.resized=!0)}}))},l=0;l<t.channels.length;l++)s(l);for(var u=function(e){["scroll","top","bottom"].forEach((function(t){i[e].queue[t].forEach((function(e){e.resized=!1}))}))},d=0;d<i.length;d++)u(d);t.channels=i,"b2t"===t.direction?t.channelWidth=a:t.channelHeight=a}else if(t.channels&&t.channels.length>i.length){for(var c=function(e){i[e]={id:e,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}},["scroll","top","bottom"].forEach((function(r){if("top"===r&&e>Math.floor(i.length/2));else if("bottom"===r&&e<=Math.floor(i.length/2));else{var n="bottom"===r?e-i.length+t.channels.length:e;t.channels[n].queue[r].forEach((function(o,s){if(o.el){if(i[e].queue[r].push(o),"bottom"===r&&o.channel_id[0]+o.channel_id[1]-1===n){var l=[].concat(o.channel_id);o.channel_id=[l[0]-t.channels.length+i.length,l[1]],o.top=o.channel_id[0]*a,t.danmu.config.area&&t.danmu.config.area.start&&(o.top+=t.containerHeight*t.danmu.config.area.start),o.topInit()}o.resized||(o.pauseMove(t.containerPos,!1),o.startMove(t.containerPos),o.resized=!0)}t.channels[n].queue[r].splice(s,1)}))}}))},h=0;h<i.length;h++)c(h);for(var f=function(e){["scroll","top","bottom"].forEach((function(t){i[e].queue[t].forEach((function(e){e.resized=!1}))}))},p=0;p<i.length;p++)f(p);t.channels=i,"b2t"===t.direction?t.channelWidth=a:t.channelHeight=a}}},{key:"reset",value:function(){this.logger.info("reset");var e=this.danmu.container,t=this;t.danmu.bulletBtn&&t.danmu.bulletBtn.main&&t.danmu.bulletBtn.main.queue.forEach((function(e){e.pauseMove(t.containerPos),e.remove()})),t.channels&&t.channels.length>0&&["scroll","top","bottom"].forEach((function(e){for(var r=0;r<t.channels.length;r++)t.channels[r].queue[e].forEach((function(e){e.pauseMove(t.containerPos),e.remove()}))})),this.resetTimer=setTimeout((function(){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.danmu.config.area&&t.danmu.config.area.start>=0&&t.danmu.config.area.end>=t.danmu.config.area.start&&("b2t"===t.direction?t.width=t.width*(t.danmu.config.area.end-t.danmu.config.area.start):t.height=t.height*(t.danmu.config.area.end-t.danmu.config.area.start)),t.container=e;var n,a=t.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);n="b2t"===t.direction?Math.floor(t.width/a):Math.floor(t.height/a);for(var i=[],o=0;o<n;o++)i[o]={id:o,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};t.channels=i,"b2t"===t.direction?t.channelWidth=a:t.channelHeight=a}),200)}},{key:"resetWithCb",value:function(e,t){this.logger.info("resetWithCb");var r=this.danmu.container,n=this;n.channels&&n.channels.length>0&&["scroll","top","bottom"].forEach((function(e){for(var t=0;t<n.channels.length;t++)n.channels[t].queue[e].forEach((function(e){e.pauseMove(n.containerPos),e.remove()}))}));var a=r.getBoundingClientRect();n.width=a.width,n.height=a.height,n.danmu.config.area&&n.danmu.config.area.start>=0&&n.danmu.config.area.end>=n.danmu.config.area.start&&("b2t"===n.direction?n.width=n.width*(n.danmu.config.area.end-n.danmu.config.area.start):n.height=n.height*(n.danmu.config.area.end-n.danmu.config.area.start)),n.container=r;var i,o=n.danmu.config.channelSize||(/mobile/gi.test(navigator.userAgent)?10:12);i="b2t"===n.direction?Math.floor(n.width/o):Math.floor(n.height/o);for(var s=[],l=0;l<i;l++)s[l]={id:l,queue:{scroll:[],top:[],bottom:[]},operating:{scroll:!1,top:!1,bottom:!1},bookId:{}};n.channels=s,n.channelHeight=o,e&&e(!0,t)}}]),t}(a.default);t.default=l,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(0)),i=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.setLogger("bullet"),n.danmu=e,n.options=r,n.duration=r.duration,n.moveV=r.moveV,n.id=r.id,n.container=e.container,n.start=r.start,n.prior=r.prior,n.color=r.color,n.bookChannelId=r.bookChannelId,n.direction=e.direction;var a=n;n.onChangeDirection=function(e){a.direction=e},n.danmu.on("changeDirection",n.onChangeDirection);var s=void 0;if(n.domObj=e.domObj,r.el&&1===r.el.nodeType)(s=n.domObj.use()).appendChild(i.default.copyDom(r.el));else if((s=n.domObj.use()).textContent=r.txt,r.style){var l=r.style;Object.keys(l).forEach((function(e){s.style[e]=l[e]}))}"top"===r.mode||"bottom"===r.mode?n.mode=r.mode:n.mode="scroll",n.el=s,r.like&&r.like.el&&n.setLikeDom(r.like.el,r.like.style),n.status="waiting";var u=n.container.getBoundingClientRect(),d=Math.floor(Math.random()*(u.width/10>100?200:u.width/10));return r.realTime&&(d=0),n.el.style.left=u.width+d+"px",n.containerPos=u,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"attach",value:function(){if(this.container.appendChild(this.el),this.elPos=this.el.getBoundingClientRect(),"b2t"===this.direction?(this.width=this.elPos.height,this.height=this.elPos.width):(this.width=this.elPos.width,this.height=this.elPos.height),this.moveV){var e=this.containerPos;this.duration=(e.width+this.width)/this.moveV*1e3}this.danmu.config.mouseControl&&this.el.addEventListener("mouseover",this.mouseoverFun.bind(this))}},{key:"mouseoverFun",value:function(e){this.danmu.mouseControl&&this.danmu.config.mouseControlPause||"waiting"===this.status||"end"===this.status||this.danmu.emit("bullet_hover",{bullet:this,event:e})}},{key:"detach",value:function(){this.container&&this.el&&this.domObj.unuse(this.el),this.danmu.off("changeDirection",this.onChangeDirection)}},{key:"topInit",value:function(){if(this.logger.info("topInit #"+(this.options.txt||"[DOM Element]")+"#"),"b2t"===this.direction){var e=this.containerPos;this.el.style.transformOrigin="left top",this.el.style.transform="translateX(-"+this.top+"px) translateY("+e.height+"px) translateZ(0px) rotate(90deg)",this.el.style.transition="transform 0s linear 0s"}else this.el.style.top=this.top+"px"}},{key:"pauseMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.logger.info("pauseMove #"+(this.options.txt||"[DOM Element]")+"#");var r=this;if("paused"!==this.status&&("forcedPause"!==r.status&&(this.status="paused"),clearTimeout(r.removeTimer),this.el))if(this.el.style.willChange="auto","scroll"===this.mode){if(t){var n=((new Date).getTime()-r.moveTime)/1e3,a=n*this.moveV,i=0;i=r.moveMoreS-a>=0?"b2t"===this.direction?(r.moveMoreS-a)/r.moveContainerHeight*e.height:(r.moveMoreS-a)/r.moveContainerWidth*e.width:r.moveMoreS-a,"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+i+"px) translateZ(0px) rotate(90deg)":this.el.style.left=i+"px"}else"b2t"===this.direction?this.el.style.transform="translateX(-"+this.top+"px) translateY("+(this.el.getBoundingClientRect().top-e.top)+"px) translateZ(0px) rotate(90deg)":this.el.style.left=this.el.getBoundingClientRect().left-e.left+"px";"b2t"===this.direction||(this.el.style.transform="translateX(0px) translateY(0px) translateZ(0px)"),this.el.style.transition="transform 0s linear 0s"}else this.pastDuration&&this.startTime?this.pastDuration=this.pastDuration+(new Date).getTime()-this.startTime:this.pastDuration=1}},{key:"startMove",value:function(e,t){this.logger.info("startMove #"+(this.options.txt||"[DOM Element]")+"#");var r=this;if(r.hasMove||(r.danmu.emit("bullet_start",r),r.hasMove=!0),("forcedPause"!==r.status||t)&&this.el&&"start"!==this.status)if(this.status="start",this.el.style.willChange="transform","scroll"===this.mode)if("b2t"===this.direction){this.moveV=(e.height+this.height)/this.duration*1e3;var n=(r.el.getBoundingClientRect().bottom-e.top)/this.moveV;this.el.style.transition="transform "+n+"s linear 0s",this.startMoveTimer=setTimeout((function(){r.el&&(r.el.style.transform="translateX(-"+r.top+"px) translateY(-"+r.height+"px) translateZ(0px) rotate(90deg)",r.moveTime=(new Date).getTime(),r.moveMoreS=r.el.getBoundingClientRect().top-e.top,r.moveContainerHeight=e.height,r.removeTimer=setTimeout(o,1e3*n))}),20)}else{this.moveV=(e.width+this.width)/this.duration*1e3;var a=(r.el.getBoundingClientRect().right-e.left)/this.moveV;this.el.style.transition="transform "+a+"s linear 0s",this.startMoveTimer=setTimeout((function(){r.el&&(r.el.style.transform="translateX(-"+(r.el.getBoundingClientRect().right-e.left)+"px) translateY(0px) translateZ(0px)",r.moveTime=(new Date).getTime(),r.moveMoreS=r.el.getBoundingClientRect().left-e.left,r.moveContainerWidth=e.width,r.removeTimer=setTimeout(o,1e3*a))}),20)}else{this.el.style.left="50%",this.el.style.margin="0 0 0 -"+this.width/2+"px",this.pastDuration||(this.pastDuration=1);var i=this.duration>=this.pastDuration?this.duration-this.pastDuration:0;this.removeTimer=setTimeout(o,i),this.startTime=(new Date).getTime()}function o(){if(r.el)if("scroll"===r.mode){var e=r.containerPos,t=r.el.getBoundingClientRect();"b2t"===r.direction?t&&t.bottom<=e.top+100?(r.status="end",r.remove()):(r.pauseMove(e),"paused"!==r.danmu.bulletBtn.main.status&&r.startMove(e)):t&&t.right<=e.left+100?(r.status="end",r.remove()):(r.pauseMove(e),"paused"!==r.danmu.bulletBtn.main.status&&r.startMove(e))}else r.status="end",r.remove()}}},{key:"remove",value:function(){this.logger.info("remove #"+(this.options.txt||"[DOM Element]")+"#"),this.removeTimer&&clearTimeout(this.removeTimer),this.startMoveTimer&&clearTimeout(this.startMoveTimer),this.el&&this.el.parentNode&&(this.el.style.willChange="auto",this.danmu.off("changeDirection",this.onChangeDirection),this.domObj.unuse(this.el),this.el.parentNode.removeChild(this.el),this.el=null,this.danmu.emit("bullet_remove",{bullet:this}))}},{key:"setFontSize",value:function(e){this.el&&(this.el.style.fontSize=e)}},{key:"setLikeDom",value:function(e,t){if(e&&(Object.keys(t).forEach((function(r){e.style[r]=t[r]})),e.className="danmu-like",this.el)){var r=this.el.querySelector(".danmu-like");r&&this.el.removeChild(r),this.el.innerHTML=""+this.el.innerHTML+e.outerHTML}return e}}]),t}(a.default);t.default=l,e.exports=t.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t={initDOM:function(){return document.createElement("div")},initSize:10},this.init(t)}return n(e,[{key:"init",value:function(e){this.idleList=[],this.usingList=[],this._id=0,this.options=e,this._expand(e.initSize)}},{key:"use",value:function(){this.idleList.length||this._expand(1);var e=this.idleList.shift();return this.usingList.push(e),e}},{key:"unuse",value:function(e){var t=this.usingList.indexOf(e);t<0||(this.usingList.splice(t,1),e.innerHTML="",e.textcontent="",e.style="",this.idleList.push(e))}},{key:"_expand",value:function(e){for(var t=0;t<e;t++)this.idleList.push(this.options.initDOM(this._id++))}},{key:"destroy",value:function(){for(var e=0;e<this.idleList.length;e++)this.idleList[e].innerHTML="",this.idleList[e].textcontent="",this.idleList[e].style="";for(var t=0;t<this.usingList.length;t++)this.usingList[t].innerHTML="",this.usingList[t].textcontent="",this.usingList[t].style="";for(var r in this)delete this[r]}}]),e}();t.default=a,e.exports=t.default},function(e){e.exports=JSON.parse('{"version":"0.2.23"}')},function(e,t,r){var n=r(34);"string"==typeof n&&(n=[[e.i,n,""]]),r(36)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(35)(!1)).push([e.i,".danmu{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#ffffff;-webkit-box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);box-shadow:-2px 0 0 0 rgba(0, 0, 0, .04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\n",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var i=(r=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),o=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},a=0;a<this.length;a++){var i=this[a][0];"number"==typeof i&&(n[i]=!0)}for(a=0;a<e.length;a++){var o=e[a];"number"==typeof o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),t.push(o))}},t}},function(e,t,r){var n,a,i={},s=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=n.apply(this,arguments)),a}),l=function(e){return document.querySelector(e)},u=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=l.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),d=null,c=0,h=[],f=r(37);function p(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=i[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(b(n.parts[o],t))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(b(n.parts[o],t));i[n.id]={id:n.id,refs:1,parts:s}}}}function g(e,t){for(var r=[],n={},a=0;a<e.length;a++){var i=e[a],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}function y(e,t){var r=u(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),h.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=o(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=u(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,a)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function v(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),k(t,e.attrs),y(e,t),t}function k(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,n,a,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var o=c++;r=d||(d=v(t)),n=T.bind(null,r,o,!1),a=T.bind(null,r,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",k(t,e.attrs),y(e,t),t}(t),n=x.bind(null,r,t),a=function(){m(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=_.bind(null,r),a=function(){m(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=("undefined"==typeof document?"undefined":o(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==o(t.attrs)?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=g(e,t);return p(r,t),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(s=i[o.id]).refs--,n.push(s)}for(e&&p(g(e,t),t),a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var w,E=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function T(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=E(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function _(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function x(e,t,r){var n=r.css,a=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||i)&&(n=f(n)),a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var o=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var a,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")}))}}])},"object"==o(t)&&"object"==o(e)?e.exports=i():(n=[],void 0===(a="function"==typeof(r=i)?r.apply(t,n):r)||(e.exports=a))}).call(this,r(/*! ./../../webpack/buildin/module.js */"./node_modules/webpack/buildin/module.js")(e))},"./node_modules/downloadjs/download.js":
/*!*********************************************!*\
      !*** ./node_modules/downloadjs/download.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,r){var n,a;"function"==typeof Symbol&&Symbol.iterator,void 0===(a="function"==typeof(n=function(){return function e(t,r,n){var a,i,o=window,s="application/octet-stream",l=n||s,u=t,d=!r&&!n&&u,c=document.createElement("a"),h=function(e){return String(e)},f=o.Blob||o.MozBlob||o.WebKitBlob||h,p=r||"download";if(f=f.call?f.bind(o):Blob,"true"===String(this)&&(l=(u=[u,l])[0],u=u[1]),d&&d.length<2048&&(p=d.split("/").pop().split("?")[0],c.href=d,-1!==c.href.indexOf(d))){var g=new XMLHttpRequest;return g.open("GET",d,!0),g.responseType="blob",g.onload=function(t){e(t.target.response,p,s)},setTimeout((function(){g.send()}),0),g}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&f!==h))return navigator.msSaveBlob?navigator.msSaveBlob(k(u),p):b(u);l=(u=k(u)).type||s}else if(/([\x80-\xff])/.test(u)){for(var y=0,m=new Uint8Array(u.length),v=m.length;y<v;++y)m[y]=u.charCodeAt(y);u=new f([m],{type:l})}function k(e){for(var t=e.split(/[:;,]/),r=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=n.length,i=0,o=new Uint8Array(a);i<a;++i)o[i]=n.charCodeAt(i);return new f([o],{type:r})}function b(e,t){if("download"in c)return c.href=e,c.setAttribute("download",p),c.className="download-js-link",c.innerHTML="downloading...",c.style.display="none",document.body.appendChild(c),setTimeout((function(){c.click(),document.body.removeChild(c),!0===t&&setTimeout((function(){o.URL.revokeObjectURL(c.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var r=document.createElement("iframe");document.body.appendChild(r),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),r.src=e,setTimeout((function(){document.body.removeChild(r)}),333)}if(a=u instanceof f?u:new f([u],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(a,p);if(o.URL)b(o.URL.createObjectURL(a),!0);else{if("string"==typeof a||a.constructor===h)try{return b("data:"+l+";base64,"+o.btoa(a))}catch(e){return b("data:"+l+","+encodeURIComponent(a))}(i=new FileReader).onload=function(e){b(this.result)},i.readAsDataURL(a)}return!0}})?n.apply(t,[]):n)||(e.exports=a)},"./node_modules/draggabilly/draggabilly.js":
/*!*************************************************!*\
      !*** ./node_modules/draggabilly/draggabilly.js ***!
      \*************************************************/
/*! no static exports found */function(e,t,r){var n,a,i;"function"==typeof Symbol&&Symbol.iterator,i=window,n=[r(/*! get-size/get-size */"./node_modules/get-size/get-size.js"),r(/*! unidragger/unidragger */"./node_modules/unidragger/unidragger.js")],void 0===(a=function(e,t){return function(e,t,r){function n(e,t){for(var r in t)e[r]=t[r];return e}var a=e.jQuery;function i(e,t){this.element="string"==typeof e?document.querySelector(e):e,a&&(this.$element=a(this.element)),this.options=n({},this.constructor.defaults),this.option(t),this._create()}var o=i.prototype=Object.create(r.prototype);i.defaults={},o.option=function(e){n(this.options,e)};var s={relative:!0,absolute:!0,fixed:!0};function l(e,t,r){return r=r||"round",t?Math[r](e/t)*t:e}return o._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=n({},this.position);var e=getComputedStyle(this.element);s[e.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},o.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},o.dispatchEvent=function(e,t,r){var n=[t].concat(r);this.emitEvent(e,n),this.dispatchJQueryEvent(e,t,r)},o.dispatchJQueryEvent=function(t,r,n){var a=e.jQuery;if(a&&this.$element){var i=a.Event(r);i.type=t,this.$element.trigger(i,n)}},o._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),r=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(r)?0:r,this._addTransformPosition(e)},o._getPositionCoord=function(e,r){if(-1!=e.indexOf("%")){var n=t(this.element.parentNode);return n?parseFloat(e)/100*n[r]:0}return parseInt(e,10)},o._addTransformPosition=function(e){var t=e.transform;if(0===t.indexOf("matrix")){var r=t.split(","),n=0===t.indexOf("matrix3d")?12:4,a=parseInt(r[n],10),i=parseInt(r[n+1],10);this.position.x+=a,this.position.y+=i}},o.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",e,[t])},o.pointerDown=function(e,t){this.okayPointerDown(e)&&this.isEnabled?(this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",e,[t])):this._pointerReset()},o.dragStart=function(e,t){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate())},o.measureContainment=function(){var e=this.getContainer();if(e){var r=t(this.element),n=t(e),a=this.element.getBoundingClientRect(),i=e.getBoundingClientRect(),o=n.borderLeftWidth+n.borderRightWidth,s=n.borderTopWidth+n.borderBottomWidth,l=this.relativeStartPosition={x:a.left-(i.left+n.borderLeftWidth),y:a.top-(i.top+n.borderTopWidth)};this.containSize={width:n.width-o-l.x-r.width,height:n.height-s-l.y-r.height}}},o.getContainer=function(){var e=this.options.containment;if(e)return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):this.element.parentNode},o.onPointerMove=function(e,t,r){this.dispatchJQueryEvent("pointerMove",e,[t,r])},o.dragMove=function(e,t,r){if(this.isEnabled){var n=r.x,a=r.y,i=this.options.grid,o=i&&i[0],s=i&&i[1];n=l(n,o),a=l(a,s),n=this.containDrag("x",n,o),a=this.containDrag("y",a,s),n="y"==this.options.axis?0:n,a="x"==this.options.axis?0:a,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+a,this.dragPoint.x=n,this.dragPoint.y=a,this.dispatchEvent("dragMove",e,[t,r])}},o.containDrag=function(e,t,r){if(!this.options.containment)return t;var n="x"==e?"width":"height",a=l(-this.relativeStartPosition[e],r,"ceil"),i=this.containSize[n];return i=l(i,r,"floor"),Math.max(a,Math.min(i,t))},o.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",e,[t])},o.dragEnd=function(e,t){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t]))},o.animate=function(){if(this.isDragging){this.positionDrag();var e=this;requestAnimationFrame((function(){e.animate()}))}},o.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},o.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},o.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},o.setPosition=function(e,t){this.position.x=e,this.position.y=t,this.setLeftTop()},o.enable=function(){this.isEnabled=!0},o.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},o.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},o._init=function(){},a&&a.bridget&&a.bridget("draggabilly",i),i}(i,e,t)}.apply(t,n))||(e.exports=a)},"./node_modules/es5-ext/function/noop.js":
/*!***********************************************!*\
      !*** ./node_modules/es5-ext/function/noop.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,r){e.exports=function(){}},"./node_modules/es5-ext/object/assign/index.js":
/*!*****************************************************!*\
      !*** ./node_modules/es5-ext/object/assign/index.js ***!
      \*****************************************************/
/*! no static exports found */function(e,t,r){e.exports=r(/*! ./is-implemented */"./node_modules/es5-ext/object/assign/is-implemented.js")()?Object.assign:r(/*! ./shim */"./node_modules/es5-ext/object/assign/shim.js")},"./node_modules/es5-ext/object/assign/is-implemented.js":
/*!**************************************************************!*\
      !*** ./node_modules/es5-ext/object/assign/is-implemented.js ***!
      \**************************************************************/
/*! no static exports found */function(e,t,r){e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},"./node_modules/es5-ext/object/assign/shim.js":
/*!****************************************************!*\
      !*** ./node_modules/es5-ext/object/assign/shim.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../keys */"./node_modules/es5-ext/object/keys/index.js"),a=r(/*! ../valid-value */"./node_modules/es5-ext/object/valid-value.js"),i=Math.max;e.exports=function(e,t){var r,o,s,l=i(arguments.length,2);for(e=Object(a(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},o=1;o<l;++o)n(t=arguments[o]).forEach(s);if(void 0!==r)throw r;return e}},"./node_modules/es5-ext/object/is-value.js":
/*!*************************************************!*\
      !*** ./node_modules/es5-ext/object/is-value.js ***!
      \*************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../function/noop */"./node_modules/es5-ext/function/noop.js")();e.exports=function(e){return e!==n&&null!==e}},"./node_modules/es5-ext/object/keys/index.js":
/*!***************************************************!*\
      !*** ./node_modules/es5-ext/object/keys/index.js ***!
      \***************************************************/
/*! no static exports found */function(e,t,r){e.exports=r(/*! ./is-implemented */"./node_modules/es5-ext/object/keys/is-implemented.js")()?Object.keys:r(/*! ./shim */"./node_modules/es5-ext/object/keys/shim.js")},"./node_modules/es5-ext/object/keys/is-implemented.js":
/*!************************************************************!*\
      !*** ./node_modules/es5-ext/object/keys/is-implemented.js ***!
      \************************************************************/
/*! no static exports found */function(e,t,r){e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},"./node_modules/es5-ext/object/keys/shim.js":
/*!**************************************************!*\
      !*** ./node_modules/es5-ext/object/keys/shim.js ***!
      \**************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../is-value */"./node_modules/es5-ext/object/is-value.js"),a=Object.keys;e.exports=function(e){return a(n(e)?Object(e):e)}},"./node_modules/es5-ext/object/normalize-options.js":
/*!**********************************************************!*\
      !*** ./node_modules/es5-ext/object/normalize-options.js ***!
      \**********************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./is-value */"./node_modules/es5-ext/object/is-value.js"),a=Array.prototype.forEach,i=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return a.call(arguments,(function(e){n(e)&&o(Object(e),t)})),t}},"./node_modules/es5-ext/object/valid-callable.js":
/*!*******************************************************!*\
      !*** ./node_modules/es5-ext/object/valid-callable.js ***!
      \*******************************************************/
/*! no static exports found */function(e,t,r){e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},"./node_modules/es5-ext/object/valid-value.js":
/*!****************************************************!*\
      !*** ./node_modules/es5-ext/object/valid-value.js ***!
      \****************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ./is-value */"./node_modules/es5-ext/object/is-value.js");e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},"./node_modules/es5-ext/string/#/contains/index.js":
/*!*********************************************************!*\
      !*** ./node_modules/es5-ext/string/#/contains/index.js ***!
      \*********************************************************/
/*! no static exports found */function(e,t,r){e.exports=r(/*! ./is-implemented */"./node_modules/es5-ext/string/#/contains/is-implemented.js")()?String.prototype.contains:r(/*! ./shim */"./node_modules/es5-ext/string/#/contains/shim.js")},"./node_modules/es5-ext/string/#/contains/is-implemented.js":
/*!******************************************************************!*\
      !*** ./node_modules/es5-ext/string/#/contains/is-implemented.js ***!
      \******************************************************************/
/*! no static exports found */function(e,t,r){var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},"./node_modules/es5-ext/string/#/contains/shim.js":
/*!********************************************************!*\
      !*** ./node_modules/es5-ext/string/#/contains/shim.js ***!
      \********************************************************/
/*! no static exports found */function(e,t,r){var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},"./node_modules/ev-emitter/ev-emitter.js":
/*!***********************************************!*\
      !*** ./node_modules/ev-emitter/ev-emitter.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,r){var n,a;"function"==typeof Symbol&&Symbol.iterator,"undefined"!=typeof window&&window,void 0===(a="function"==typeof(n=function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],a=0;a<r.length;a++){var i=r[a];n&&n[i]&&(this.off(e,i),delete n[i]),i.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?n.call(t,r,t,e):n)||(e.exports=a)},"./node_modules/event-emitter/index.js":
/*!*********************************************!*\
      !*** ./node_modules/event-emitter/index.js ***!
      \*********************************************/
/*! no static exports found */function(e,t,r){var n,a,i,o,s,l,u,d="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},c=r(/*! d */"./node_modules/d/index.js"),h=r(/*! es5-ext/object/valid-callable */"./node_modules/es5-ext/object/valid-callable.js"),f=Function.prototype.apply,p=Function.prototype.call,g=Object.create,y=Object.defineProperty,m=Object.defineProperties,v=Object.prototype.hasOwnProperty,k={configurable:!0,enumerable:!1,writable:!0};a=function(e,t){var r,a;return h(t),a=this,n.call(this,e,r=function(){i.call(a,e,r),f.call(t,this,arguments)}),r.__eeOnceListener__=t,this},s={on:n=function(e,t){var r;return h(t),v.call(this,"__ee__")?r=this.__ee__:(r=k.value=g(null),y(this,"__ee__",k),k.value=null),r[e]?"object"===d(r[e])?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:a,off:i=function(e,t){var r,n,a,i;if(h(t),!v.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"===(void 0===(n=r[e])?"undefined":d(n)))for(i=0;a=n[i];++i)a!==t&&a.__eeOnceListener__!==t||(2===n.length?r[e]=n[i?0:1]:n.splice(i,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:o=function(e){var t,r,n,a,i;if(v.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"===(void 0===a?"undefined":d(a))){for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];for(a=a.slice(),t=0;n=a[t];++t)f.call(n,this,i)}else switch(arguments.length){case 1:p.call(a,this);break;case 2:p.call(a,this,arguments[1]);break;case 3:p.call(a,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];f.call(a,this,i)}}},l={on:c(n),once:c(a),off:c(i),emit:c(o)},u=m({},l),e.exports=t=function(e){return null==e?g(u):m(Object(e),l)},t.methods=s},"./node_modules/get-size/get-size.js":
/*!*******************************************!*\
      !*** ./node_modules/get-size/get-size.js ***!
      \*******************************************/
/*! no static exports found */function(e,t,r){var n,a,i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)};window,void 0===(a="function"==typeof(n=function(){function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},r=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n=r.length;function a(e){var r=getComputedStyle(e);return r||t("Style returned "+r+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),r}var o,s=!1;return function t(l){if(function(){if(!s){s=!0;var r=document.createElement("div");r.style.width="200px",r.style.padding="1px 2px 3px 4px",r.style.borderStyle="solid",r.style.borderWidth="1px 2px 3px 4px",r.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(r);var i=a(r);o=200==Math.round(e(i.width)),t.isBoxSizeOuter=o,n.removeChild(r)}}(),"string"==typeof l&&(l=document.querySelector(l)),l&&"object"==(void 0===l?"undefined":i(l))&&l.nodeType){var u=a(l);if("none"==u.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<n;t++)e[r[t]]=0;return e}();var d={};d.width=l.offsetWidth,d.height=l.offsetHeight;for(var c=d.isBorderBox="border-box"==u.boxSizing,h=0;h<n;h++){var f=r[h],p=u[f],g=parseFloat(p);d[f]=isNaN(g)?0:g}var y=d.paddingLeft+d.paddingRight,m=d.paddingTop+d.paddingBottom,v=d.marginLeft+d.marginRight,k=d.marginTop+d.marginBottom,b=d.borderLeftWidth+d.borderRightWidth,w=d.borderTopWidth+d.borderBottomWidth,E=c&&o,T=e(u.width);!1!==T&&(d.width=T+(E?0:y+b));var _=e(u.height);return!1!==_&&(d.height=_+(E?0:m+w)),d.innerWidth=d.width-(y+b),d.innerHeight=d.height-(m+w),d.outerWidth=d.width+v,d.outerHeight=d.height+k,d}}})?n.call(t,r,t,e):n)||(e.exports=a)},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
      !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
      \****************************************************************************/
/*! no static exports found */function(e,t,r){var n,a=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),i=[];function o(e){for(var t=-1,r=0;r<i.length;r++)if(i[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},n=[],a=0;a<e.length;a++){var s=e[a],l=t.base?s[0]+t.base:s[0],u=r[l]||0,d="".concat(l," ").concat(u);r[l]=u+1;var c=o(d),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==c?(i[c].references++,i[c].updater(h)):i.push({identifier:d,updater:g(h,t),references:1}),n.push(d)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function c(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function h(e,t,r){var n=r.css,a=r.media,i=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,p=0;function g(e,t){var r,n,a;if(t.singleton){var i=p++;r=f||(f=l(t)),n=c.bind(null,r,i,!1),a=c.bind(null,r,i,!0)}else r=l(t),n=h.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=o(r[n]);i[a].references--}for(var l=s(e,t),u=0;u<r.length;u++){var d=o(r[u]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}r=l}}}},"./node_modules/type/function/is.js":
/*!******************************************!*\
      !*** ./node_modules/type/function/is.js ***!
      \******************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../prototype/is */"./node_modules/type/prototype/is.js");e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},"./node_modules/type/object/is.js":
/*!****************************************!*\
      !*** ./node_modules/type/object/is.js ***!
      \****************************************/
/*! no static exports found */function(e,t,r){var n="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},a=r(/*! ../value/is */"./node_modules/type/value/is.js"),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!a(e)&&hasOwnProperty.call(i,void 0===e?"undefined":n(e))}},"./node_modules/type/plain-function/is.js":
/*!************************************************!*\
      !*** ./node_modules/type/plain-function/is.js ***!
      \************************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../function/is */"./node_modules/type/function/is.js"),a=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!a.test(i.call(e))}},"./node_modules/type/prototype/is.js":
/*!*******************************************!*\
      !*** ./node_modules/type/prototype/is.js ***!
      \*******************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../object/is */"./node_modules/type/object/is.js");e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},"./node_modules/type/value/is.js":
/*!***************************************!*\
      !*** ./node_modules/type/value/is.js ***!
      \***************************************/
/*! no static exports found */function(e,t,r){e.exports=function(e){return null!=e}},"./node_modules/unidragger/unidragger.js":
/*!***********************************************!*\
      !*** ./node_modules/unidragger/unidragger.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,r){var n,a,i;"function"==typeof Symbol&&Symbol.iterator,i=window,n=[r(/*! unipointer/unipointer */"./node_modules/unipointer/unipointer.js")],void 0===(a=function(e){return function(e,t){function r(){}var n=r.prototype=Object.create(t.prototype);n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},n._bindHandles=function(t){for(var r=(t=void 0===t||t)?"addEventListener":"removeEventListener",n=t?this._touchActionValue:"",a=0;a<this.handles.length;a++){var i=this.handles[a];this._bindStartEvent(i,t),i[r]("click",this),e.PointerEvent&&(i.style.touchAction=n)}},n._touchActionValue="none",n.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var a={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},i={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return n.okayPointerDown=function(e){var t=a[e.target.nodeName],r=i[e.target.type],n=!t||r;return n||this._pointerReset(),n},n.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},n.pointerMove=function(e,t){var r=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,r]),this._dragMove(e,t,r)},n._dragPointerMove=function(e,t){var r={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(r)&&this._dragStart(e,t),r},n.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},n._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},n._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},n.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},n._dragMove=function(e,t,r){this.isDragging&&this.dragMove(e,t,r)},n.dragMove=function(e,t,r){e.preventDefault(),this.emitEvent("dragMove",[e,t,r])},n._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},n.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},n.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},n._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},n.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},r.getPointerPoint=t.getPointerPoint,r}(i,e)}.apply(t,n))||(e.exports=a)},"./node_modules/unipointer/unipointer.js":
/*!***********************************************!*\
      !*** ./node_modules/unipointer/unipointer.js ***!
      \***********************************************/
/*! no static exports found */function(e,t,r){var n,a,i;"function"==typeof Symbol&&Symbol.iterator,i=window,n=[r(/*! ev-emitter/ev-emitter */"./node_modules/ev-emitter/ev-emitter.js")],void 0===(a=function(e){return function(e,t){function r(){}var n=r.prototype=Object.create(t.prototype);n.bindStartEvent=function(e){this._bindStartEvent(e,!0)},n.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},n._bindStartEvent=function(t,r){var n=(r=void 0===r||r)?"addEventListener":"removeEventListener",a="mousedown";e.PointerEvent?a="pointerdown":"ontouchstart"in e&&(a="touchstart"),t[n](a,this)},n.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.getTouch=function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.identifier==this.pointerIdentifier)return r}},n.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},n.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},n.onpointerdown=function(e){this._pointerDown(e,e)},n._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},n.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var a={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return n._bindPostStartEvents=function(t){if(t){var r=a[t.type];r.forEach((function(t){e.addEventListener(t,this)}),this),this._boundPointerEvents=r}},n._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach((function(t){e.removeEventListener(t,this)}),this),delete this._boundPointerEvents)},n.onmousemove=function(e){this._pointerMove(e,e)},n.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},n.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},n._pointerMove=function(e,t){this.pointerMove(e,t)},n.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},n.onmouseup=function(e){this._pointerUp(e,e)},n.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},n.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},n._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},n._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},n._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},n.pointerDone=function(){},n.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},n.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},n._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},n.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},r.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},r}(i,e)}.apply(t,n))||(e.exports=a)},"./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
      !*** (webpack)/buildin/module.js ***!
      \***********************************/
/*! no static exports found */function(e,t,r){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./package.json":
/*!**********************!*\
      !*** ./package.json ***!
      \**********************/
/*! exports provided: name, version, description, main, scripts, keywords, sideEffects, babel, repository, author, license, browserslist, dependencies, devDependencies, default */function(e){e.exports=JSON.parse('{"name":"hkvideo-player","version":"1.0.0","description":"video player","main":"./dist/index.js","scripts":{"build":"webpack --progress --display-chunks -p","dev":"webpack --progress --display-chunks -p --watch --mode development","start":"webpack-dev-server --config ./webpack.config.js --mode development  --progress --display-chunks -p --watch","prepublishOnly":"npm run build"},"keywords":["video","player"],"sideEffects":["@babel/polly-fill","*.scss"],"babel":{"presets":["es2015"],"plugins":["add-module-exports","babel-plugin-bulk-import"]},"repository":{"type":"git","url":"https://github.com/wangyingjie123/hkvideo-player"},"author":"2969057196@qq.com","license":"MIT","browserslist":["> 5%","IE 9","iOS 7","Firefox > 20"],"dependencies":{"danmu.js":"^0.2.23","downloadjs":"^1.4.7","draggabilly":"^2.3.0","pasition":"^1.0.1","request-frame":"^1.5.3","deepmerge":"^4.2.2","event-emitter":"^0.3.5"},"devDependencies":{"autoprefixer":"^9.1.5","babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-bulk-import":"^1.0.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","chai":"^4.1.2","core-js":"^2.5.4","css-loader":"^3.6.0","hard-source-webpack-plugin":"^0.13.1","json-loader":"^0.5.7","mini-css-extract-plugin":"^0.9.0","node-sass":"^4.14.1","postcss-cssnext":"^3.1.0","postcss-loader":"^2.1.5","raw-loader":"^4.0.1","sass-loader":"^8.0.2","style-loader":"^1.2.1","sugarss":"^1.0.1","thread-loader":"^2.1.3","webpack":"^4.43.0","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.0","zlib":"^1.0.5"}}')},"./src/controls/cssFullscreen.js":
/*!***************************************!*\
      !*** ./src/controls/cssFullscreen.js ***!
      \***************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("cssFullscreen",(function(){var e=this,t=e.root,r=a.default.util;function n(){r.hasClass(t,"hkplayer-is-cssfullscreen")?(e.exitCssFullscreen(),r.removeClass(document.body,"overhidden")):(e.getCssFullscreen(),r.addClass(document.body,"overhidden"))}e.on("cssFullscreenBtnClick",n),e.on("exitFullscreen",(function(){r.removeClass(t,"hkplayer-is-cssfullscreen")})),e.once("destroy",(function t(){e.off("cssFullscreenBtnClick",n),e.off("destroy",t)}))}))},"./src/controls/danmu.js":
/*!*******************************!*\
      !*** ./src/controls/danmu.js ***!
      \*******************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("danmu",(function(){var e=this,t=(e.root,a.default.util);e.on("initDefaultDanmu",(function(r){var n=e.root.querySelector("hk-danmu");if(t.addClass(n,"hkplayer-has-danmu"),!e.config.danmu.closeDefaultBtn){var a=function(){r.start()},i=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&r.pause()},o=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&r.play()},s=function(){t.hasClass(e.danmuBtn,"danmu-switch-active")&&(r.stop(),r.start())};e.danmuBtn=t.copyDom(r.bulletBtn.createSwitch(!0)),e.controls.appendChild(e.danmuBtn),["click","touchend"].forEach((function(i){e.danmuBtn.addEventListener(i,(function(i){i.preventDefault(),i.stopPropagation(),t.toggleClass(e.danmuBtn,"danmu-switch-active"),t.hasClass(e.danmuBtn,"danmu-switch-active")?(e.emit("danmuBtnOn"),t.addClass(n,"hkplayer-has-danmu"),e.once("timeupdate",a)):(e.emit("danmuBtnOff"),t.removeClass(n,"hkplayer-has-danmu"),r.stop())}))})),e.onElementClick&&n.addEventListener("click",(function(t){e.onElementClick(t,n)}),!1),e.onElementDblclick&&n.addEventListener("dblclick",(function(t){e.onElementDblclick(t,n)}),!1),e.on("pause",i),e.on("play",o),e.on("seeked",s),e.once("destroy",(function t(){e.off("timeupdate",a),e.off("pause",i),e.off("play",o),e.off("seeked",s),e.off("destroy",t)}))}}))}))},"./src/controls/definition.js":
/*!************************************!*\
      !*** ./src/controls/definition.js ***!
      \************************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("definition",(function(){var e=this;e.root,e.once("destroy",(function t(){e.off("destroy",t)}))}))},"./src/controls/download.js":
/*!**********************************!*\
      !*** ./src/controls/download.js ***!
      \**********************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("download",(function(){var e=this;function t(){e.download()}e.on("downloadBtnClick",t),e.once("destroy",(function r(){e.off("downloadBtnClick",t),e.off("destroy",r)}))}))},"./src/controls/errorRetry.js":
/*!************************************!*\
      !*** ./src/controls/errorRetry.js ***!
      \************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n},i={maxCount:3,backupUrl:"",isFetch:!0,fetchTimeout:100};a.default.install("errorretry",(function(){var e=this,t=this;if(t.config.errorConfig&&!(t.src.indexOf("blob:")>-1)){var r={},n=t.config.errorConfig;for(var o in i)void 0===n[o]?r[o]=i[o]:r[o]=n[o];t.retryData={count:0,errfTimer:null,isFetchReturn:!1,currentTime:0};var s=t._onError;t._onError=function(n){var i,o=e.retryData.count;o>r.maxCount?r.isFetch?function(e,t,r){var n=function(t,r){e.retryData.isFetchReturn||(e.retryData.isFetchReturn=!0,t(r))};return new Promise((function(a,i){try{var o=new window.XMLHttpRequest;o.open("get",t),o.onload=function(){n(a,{status:o.status,statusText:o.statusText,xhr:o})},o.onerror=function(){n(a,{status:o.status,statusText:o.statusText||"The network environment is disconnected or the address is invalid",xhr:o})},o.onabort=function(){},e.retryData.errfTimer=window.setTimeout((function(){var t=e.retryData.errfTimer;window.clearTimeout(t),e.retryData.errfTimer=null,n(a,{status:-1,statusText:"request timeout"})}),r),o.send()}catch(t){e.retryData.isFetchReturn=!0,n(a,{status:-2,statusText:"request error"})}}))}(e,e.currentSrc,r.fetchTimeout).then((function(t){e.emit("error",new a.default.Errors({type:"network",currentTime:e.currentTime,duration:e.duration||0,networkState:e.networkState,readyState:e.readyState,currentSrc:e.currentSrc,src:e.src,ended:e.ended,httpCode:t.status,httpMsg:t.statusText,errd:{line:101,msg:e.error,handle:"plugin errorRetry"},errorCode:e.video&&e.video.error.code,mediaError:e.video&&e.video.error})),s.call(e,t)})):s.call(e,n):(0===o&&(e.retryData.currentTime=e.currentTime,e.once("canplay",l.bind(e))),i=r.count<2?r.backupUrl?r.backupUrl:t.currentSrc:r.backupUrl&&o>1?r.backupUrl:t.currentSrc,e.retryData.count++,e.src=i)}}function l(){this.currentTime=this.retryData.currentTime,this.play(),this.retryData.retryCode=0,this.retryData.isFetchReturn=!1,this.retryData.currentTime=0}}))},"./src/controls/fullscreen.js":
/*!************************************!*\
      !*** ./src/controls/fullscreen.js ***!
      \************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("fullscreen",(function(){var e=this,t=e.root,r=a.default.util;function n(){e.config.rotateFullscreen?r.hasClass(t,"hkplayer-rotate-fullscreen")?e.exitRotateFullscreen():e.getRotateFullscreen():r.hasClass(t,"hkplayer-is-fullscreen")?e.exitFullscreen(t):e.getFullscreen(t),r.hasClass(document.body,"overhidden")&&r.removeClass(document.body,"overhidden")}function i(){var n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n&&n===t?(r.addClass(t,"hkplayer-is-fullscreen"),e.emit("requestFullscreen")):(r.removeClass(t,"hkplayer-is-fullscreen"),e.emit("exitFullscreen")),e.danmu&&"function"==typeof e.danmu.resize&&e.danmu.resize()}e.on("fullscreenBtnClick",n),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((function(e){document.addEventListener(e,i)})),e.once("destroy",(function t(){e.off("fullscreenBtnClick",n),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach((function(e){document.removeEventListener(e,i)})),e.off("destroy",t)}))}))},"./src/controls/i18n.js":
/*!******************************!*\
      !*** ./src/controls/i18n.js ***!
      \******************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("i18n",(function(){var e=this,t={},r=e.constructor.util;t.en={HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"Pip",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off"},t["zh-cn"]={HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"当下载时发生错误",MEDIA_ERR_DECODE:"当解码时发生错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭"},t.jp={HAVE_NOTHING:"オーディオ/ビデオが準備できているか情報がありません",HAVE_METADATA:"オーディオ/ビデオのメタデータは準備できています",HAVE_CURRENT_DATA:"現在の再生位置に関するデータは利用可能ですが、次のフレーム/ミリ秒を再生するのに十分なデータがありません",HAVE_FUTURE_DATA:"現在、少なくとも次のフレームのデータが利用可能です",HAVE_ENOUGH_DATA:"利用可能なデータは再生を開始するのに十分です",NETWORK_EMPTY:"オーディオ/ビデオが初期化されていません",NETWORK_IDLE:"オーディオ/ビデオはアクティブでリソースが選択されていますが、ネットワークが使用されていません",NETWORK_LOADING:"ブラウザーはデータをダウンロードしています",NETWORK_NO_SOURCE:"オーディオ/ビデオ のソースが見つかりません",MEDIA_ERR_ABORTED:"ユーザーによってフェッチプロセスが中止されました",MEDIA_ERR_NETWORK:"ダウンロード中にエラーが発生しました",MEDIA_ERR_DECODE:"デコード中にエラーが発生しました",MEDIA_ERR_SRC_NOT_SUPPORTED:"オーディオ/ビデオ の形式がサポートされていません",REPLAY:"リプレイ",ERROR:"ネットワークの接続に問題が発生しました",PLAY_TIPS:"プレイ",PAUSE_TIPS:"一時停止",PLAYNEXT_TIPS:"次をプレイ",DOWNLOAD_TIPS:"ダウンロード",ROTATE_TIPS:"回転",RELOAD_TIPS:"再読み込み",FULLSCREEN_TIPS:"フルスクリーン",EXITFULLSCREEN_TIPS:"フルスクリーンを終了",CSSFULLSCREEN_TIPS:"シアターモード",EXITCSSFULLSCREEN_TIPS:"シアターモードを終了",TEXTTRACK:"字幕",PIP:"ミニプレーヤー",SCREENSHOT:"スクリーンショット",LIVE:"生放送",OFF:"オフ"},Object.defineProperty(e,"lang",{get:function(){return e.config&&t[e.config.lang]||t.en},set:function(e){"Object"===r.typeOf(e)&&Object.keys(e).forEach((function(r){t[r]=e[r]}))}})}))},"./src/controls/localPreview.js":
/*!**************************************!*\
      !*** ./src/controls/localPreview.js ***!
      \**************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("localPreview",(function(){var e=this,t=e.root;function r(r){e.uploadFile=r.files[0];var n=URL.createObjectURL(e.uploadFile);if(a.default.util.hasClass(t,"hkplayer-nostart"))e.config.url=n,e.start();else{e.src=n;var i=e.play();void 0!==i&&i&&i.catch((function(e){}))}}e.on("upload",r),e.once("destroy",(function t(){e.off("upload",r),e.off("destroy",t)}))}))},"./src/controls/memoryPlay.js":
/*!************************************!*\
      !*** ./src/controls/memoryPlay.js ***!
      \************************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("memoryPlay",(function(){var e=this;e.on("memoryPlayStart",(function(t){e.currentTime=t}))}))},"./src/controls/mobile.js":
/*!********************************!*\
      !*** ./src/controls/mobile.js ***!
      \********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("mobile",(function(){var e=this,t=a.default.util,r=(e.controls,e.root);function n(t){e.video.addEventListener("touchend",(function(t){e.onElementTouchend(t,e.video)})),e.video.addEventListener("touchstart",(function(){e.isTouchMove=!1})),e.video.addEventListener("touchmove",(function(){e.isTouchMove=!0})),e.config.autoplay&&e.start()}e.onElementTouchend=function(e,n){if(e.preventDefault(),e.stopPropagation(),t.hasClass(r,"hkplayer-inactive")?this.emit("focus"):this.emit("blur"),!this.config.closeVideoTouch&&!this.isTouchMove){if(t.hasClass(this.root,"hkplayer-nostart"))return!1;if(!this.ended)if(this.paused){var a=this.play();void 0!==a&&a&&a.catch((function(e){}))}else this.pause()}},e.once("ready",n),e.once("destroy",(function t(){e.off("ready",n),e.off("destroy",t)}))}))},"./src/controls/pc.js":
/*!****************************!*\
      !*** ./src/controls/pc.js ***!
      \****************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("pc",(function(){var e=this,t=a.default.util,r=e.controls,n=e.root,i=0,o=void 0;function s(){clearTimeout(e.leavePlayerTimer),e.emit("focus",e)}function l(){e.config.closePlayerBlur||(e.leavePlayerTimer=setTimeout((function(){e.emit("blur",e)}),e.config.leavePlayerTime||0))}function u(t){e.config.autoplay&&e.start()}e.onElementClick=function(e,r){e.preventDefault(),this.config.closeVideoStopPropagation||e.stopPropagation();var n=this;n.config.closeVideoClick||(i++,o&&clearTimeout(o),1===i?o=setTimeout((function(){if(t.hasClass(n.root,"hkplayer-nostart"))return!1;if(!n.ended)if(n.paused){var e=n.play();void 0!==e&&e&&e.catch((function(e){}))}else n.pause();i=0}),200):i=0)},e.video.addEventListener("click",(function(t){e.onElementClick(t,e.video)}),!1),e.onElementDblclick=function(e,t){if(e.preventDefault(),e.stopPropagation(),!this.config.closeVideoDblclick){var n=r.querySelector(".hkplayer-fullscreen");if(n){var a=void 0;document.createEvent?(a=document.createEvent("Event")).initEvent("click",!0,!0):a=new Event("click"),n.dispatchEvent(a)}}},e.video.addEventListener("dblclick",(function(t){e.onElementDblclick(t,e.video)}),!1),n.addEventListener("mouseenter",s),n.addEventListener("mouseleave",l),r.addEventListener("mouseenter",(function(t){e.userTimer&&clearTimeout(e.userTimer)}),!1),r.addEventListener("mouseleave",(function(t){e.config.closeControlsBlur||e.emit("focus",e)}),!1),e.once("ready",u),e.once("destroy",(function t(){n.removeEventListener("mouseenter",s),n.removeEventListener("mouseleave",l),e.off("ready",u),e.off("destroy",t)}))}))},"./src/controls/pip.js":
/*!*****************************!*\
      !*** ./src/controls/pip.js ***!
      \*****************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("pip",(function(){var e=this,t=a.default.util,r=e.root;function n(){t.hasClass(r,"hkplayer-pip-active")?e.exitPIP():e.getPIP()}e.on("pipBtnClick",n),e.once("destroy",(function t(){e.off("pipBtnClick",n),e.off("destroy",t)}))}))},"./src/controls/play.js":
/*!******************************!*\
      !*** ./src/controls/play.js ***!
      \******************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("play",(function(){var e=this,t=a.default.util,r=e.root;function n(){if(e.paused){if(e.config.isLive)return t.addClass(r,"hkplayer-is-enter"),void(e.src=e.config.url);var n=e.play();void 0!==n&&n&&n.catch((function(e){}))}else e.pause()}e.on("playBtnClick",n),e.once("destroy",(function t(){e.off("playBtnClick",n),e.off("destroy",t)}))}))},"./src/controls/playNext.js":
/*!**********************************!*\
      !*** ./src/controls/playNext.js ***!
      \**********************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("playNext",(function(){var e=this,t=e.config.playNext;function r(){e.currentVideoIndex+1<t.urlList.length&&(e.currentVideoIndex++,e.video.autoplay=!0,e.src=t.urlList[e.currentVideoIndex],e.emit("playerNext",e.currentVideoIndex+1),e.currentVideoIndex+1===t.urlList.length&&e.emit("urlListEnd"))}e.currentVideoIndex=-1,e.on("playNextBtnClick",r),e.once("destroy",(function t(){e.off("playNextBtnClick",r),e.off("destroy",t)}))}))},"./src/controls/reload.js":
/*!********************************!*\
      !*** ./src/controls/reload.js ***!
      \********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("reload",(function(){var e=this;function t(){a.default.util.removeClass(e.root,"hkplayer-is-error"),e.src=e.config.url}e.config.reload&&(e.on("reloadBtnClick",t),e.once("destroy",(function r(){e.off("reloadBtnClick",t),e.off("destroy",r)})))}))},"./src/controls/replay.js":
/*!********************************!*\
      !*** ./src/controls/replay.js ***!
      \********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("replay",(function(){var e=this,t=a.default.util,r=e.root;function n(){t.removeClass(r,"replay"),e.replay()}e.on("replayBtnClick",n),e.on("ended",(function(){e.config.loop||t.addClass(r,"replay")})),e.once("destroy",(function t(){e.off("replayBtnClick",n),e.off("destroy",t)}))}))},"./src/controls/rotate.js":
/*!********************************!*\
      !*** ./src/controls/rotate.js ***!
      \********************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("rotate",(function(){var e=this,t=e.config.rotate;function r(){e.rotate(t.clockwise,t.innerRotate)}t&&(e.on("rotateBtnClick",r),e.once("destroy",(function t(){e.off("rotateBtnClick",r),e.off("destroy",t)})))}))},"./src/controls/screenShot.js":
/*!************************************!*\
      !*** ./src/controls/screenShot.js ***!
      \************************************/
/*! no static exports found */function(e,t,r){var n;((n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n}).default.install("screenShot",(function(){var e=this,t=(e.root,e.config.screenShot);if(t){var r=.92;(t.quality||0===t.quality)&&(r=t.quality);var n=void 0===t.type?"image/png":t.type,a=void 0===t.format?".png":t.format,i=document.createElement("canvas"),o=i.getContext("2d"),s=new Image;i.width=this.config.width||600,i.height=this.config.height||337.5;var l=function(e,t){var r=document.createElement("a");r.href=e,r.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)};e.on("screenShotBtnClick",u),e.once("destroy",(function t(){e.off("screenShotBtnClick",u),e.off("destroy",t)}))}function u(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i.width=e.video.videoWidth||600,i.height=e.video.videoHeight||337.5,s.onload=function(){o.drawImage(e.video,0,0,i.width,i.height),s.setAttribute("crossOrigin","anonymous"),s.src=i.toDataURL(n,r).replace(n,"image/octet-stream");var u=s.src.replace(/^data:image\/[^;]+/,"data:application/octet-stream");e.emit("screenShot",u),t&&l(u,"截图"+a)}()}}))},"./src/controls/start.js":
/*!*******************************!*\
      !*** ./src/controls/start.js ***!
      \*******************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("start",(function(){var e=this,t=e.root,r=a.default.util;function n(){if(r.hasClass(t,"hkplayer-nostart")){r.removeClass(t,"hkplayer-nostart"),r.addClass(t,"hkplayer-is-enter"),t.querySelector("video")||e.start();var n=e.play();void 0!==n&&n&&n.catch((function(e){}))}else e.paused&&(r.removeClass(t,"hkplayer-nostart hkplayer-isloading"),setTimeout((function(){var t=e.play();void 0!==t&&t&&t.catch((function(e){}))}),10))}e.on("startBtnClick",n),e.once("destroy",(function t(){e.off("startBtnClick",n),e.off("destroy",t)}))}))},"./src/controls/volume.js":
/*!********************************!*\
      !*** ./src/controls/volume.js ***!
      \********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("volume",(function(){var e=this,t=e.root,r=a.default.util,n=void 0,i=void 0,o=void 0,s=void 0,l=void 0;function u(){e.volume=e.config.volume,n=e.controls.querySelector(".hkplayer-volume"),i=n.querySelector(".hkplayer-slider"),o=n.querySelector(".hkplayer-bar"),s=n.querySelector(".hkplayer-drag"),l=n.querySelector(".hkplayer-volume-val"),"mobile"===a.default.sniffer.device&&g()}function d(t){e.video.muted=!1,i.focus(),r.event(t);var n=o.getBoundingClientRect(),a=(t.clientX,t.clientY),l=s.getBoundingClientRect().height,u=!1,d=function(t){t.preventDefault(),t.stopPropagation(),r.event(t),u=!0;var i=l-t.clientY+a,o=i/n.height;s.style.height=i+"px",e.volume=Math.max(Math.min(o,1),0)},c=function t(a){if(a.preventDefault(),a.stopPropagation(),r.event(a),window.removeEventListener("mousemove",d),window.removeEventListener("touchmove",d),window.removeEventListener("mouseup",t),window.removeEventListener("touchend",t),!u){var o=n.height-(a.clientY-n.top),l=o/n.height;s.style.height=o+"px",l<=0&&(e.volume>0?s.volume=e.video.volume:l=s.volume),e.volume=Math.max(Math.min(l,1),0)}i.volume=e.volume,u=!1};return window.addEventListener("mousemove",d),window.addEventListener("touchmove",d),window.addEventListener("mouseup",c),window.addEventListener("touchend",c),!1}function c(){"mobile"===a.default.sniffer.device?e.video.muted?(e.video.muted=!1,e.emit("unmute"),e.volume=1):(e.video.muted=!0,e.emit("mute"),e.volume=0):(e.video.muted=!1,e.volume<.1?(i.volume<.1?e.volume=.6:e.volume=i.volume,e.emit("unmute")):(e.volume=0,e.emit("mute")))}function h(){r.addClass(t,"hkplayer-volume-active"),n&&n.focus()}function f(){r.removeClass(t,"hkplayer-volume-active")}e.once("canplay",u),e.on("volumeBarClick",d),e.on("volumeIconClick",c),e.on("volumeIconEnter",h),e.on("volumeIconLeave",f);var p=null;function g(){p&&clearTimeout(p),p=setTimeout((function(){if("mobile"===a.default.sniffer.device)r.removeClass(t,"hkplayer-volume-muted"),r.removeClass(t,"hkplayer-volume-large"),e.video.muted||e.video.defaultMuted?(e.video.muted||(e.video.muted=!0),e.video.defaultMuted=!1,r.addClass(t,"hkplayer-volume-muted")):r.addClass(t,"hkplayer-volume-large");else{if(r.removeClass(t,"hkplayer-volume-muted"),r.removeClass(t,"hkplayer-volume-small"),r.removeClass(t,"hkplayer-volume-large"),0===e.volume?r.addClass(t,"hkplayer-volume-muted"):e.volume<.5?r.addClass(t,"hkplayer-volume-small"):r.addClass(t,"hkplayer-volume-large"),!o)return;var n=o.getBoundingClientRect().height||100;s.style.height=e.volume*n+"px",l.innerText=Math.floor(100*e.volume)}}),50)}e.on("volumechange",g),e.once("destroy",(function t(){e.off("canplay",u),e.off("volumeBarClick",d),e.off("volumeIconClick",c),e.off("volumeIconEnter",h),e.off("volumeIconLeave",f),e.off("volumechange",g),e.off("destroy",t),p&&(clearTimeout(p),p=null)}))}))},"./src/error.js":
/*!**********************!*\
      !*** ./src/error.js ***!
      \**********************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../package.json */"./package.json");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i={network:{code:1,msg:"视频下载错误",remark:"只要视频下载错误就使用此类型，无论是video本身的超时还是xhr的分段请求超时或者资源不存在"},mse:{code:2,msg:"流追加错误",remark:"追加流的时候如果类型不对、无法被正确解码则会触发此类错误"},parse:{code:3,msg:"解析错误",remark:"mp4、hls、flv我们都是使用js进行格式解析，如果解析失败则会触发此类错误"},format:{code:4,msg:"格式错误",remark:"如果浏览器不支持的格式导致播放错误"},decoder:{code:5,msg:"解码错误",remark:"浏览器解码异常会抛出此类型错误"},runtime:{code:6,msg:"语法错误",remark:"播放器语法错误"},timeout:{code:7,msg:"播放超时",remark:"播放过程中无法正常请求下一个分段导致播放中断"},other:{code:8,msg:"其他错误",remark:"不可知的错误或被忽略的错误类型"}};t.default=function e(t,r,o,s,l,u,d,c){var h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{line:"",handle:"",msg:"",version:""},f=arguments[9],p=arguments[10];a(this,e);var g={};if(arguments.length>1)g.playerVersion=n.version,g.errorType=t,g.domain=document.domain,g.duration=o,g.currentTime=r,g.networkState=s,g.readyState=l,g.currentSrc=d,g.src=u,g.ended=c,g.errd=h,g.ex=(i[t]||{}).msg,g.errorCode=f,g.mediaError=p;else{var y=arguments[0];Object.keys(y).map((function(e){g[e]=y[e]})),g.ex=(y.type&&i[y.type]||{}).msg}return g},e.exports=t.default},"./src/index.js":
/*!**********************!*\
      !*** ./src/index.js ***!
      \**********************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=_(r(/*! ./player */"./src/player.js")),a=_(r(/*! ./controls/volume.js */"./src/controls/volume.js")),i=_(r(/*! ./controls/start.js */"./src/controls/start.js")),o=_(r(/*! ./controls/screenShot.js */"./src/controls/screenShot.js")),s=_(r(/*! ./controls/rotate.js */"./src/controls/rotate.js")),l=_(r(/*! ./controls/replay.js */"./src/controls/replay.js")),u=_(r(/*! ./controls/reload.js */"./src/controls/reload.js")),d=_(r(/*! ./controls/playNext.js */"./src/controls/playNext.js")),c=_(r(/*! ./controls/play.js */"./src/controls/play.js")),h=_(r(/*! ./controls/pip.js */"./src/controls/pip.js")),f=_(r(/*! ./controls/pc.js */"./src/controls/pc.js")),p=_(r(/*! ./controls/mobile.js */"./src/controls/mobile.js")),g=_(r(/*! ./controls/memoryPlay.js */"./src/controls/memoryPlay.js")),y=_(r(/*! ./controls/localPreview.js */"./src/controls/localPreview.js")),m=_(r(/*! ./controls/i18n.js */"./src/controls/i18n.js")),v=_(r(/*! ./controls/fullscreen.js */"./src/controls/fullscreen.js")),k=_(r(/*! ./controls/errorRetry.js */"./src/controls/errorRetry.js")),b=_(r(/*! ./controls/download.js */"./src/controls/download.js")),w=_(r(/*! ./controls/definition.js */"./src/controls/definition.js")),E=_(r(/*! ./controls/danmu.js */"./src/controls/danmu.js")),T=_(r(/*! ./controls/cssFullscreen.js */"./src/controls/cssFullscreen.js"));function _(e){return e&&e.__esModule?e:{default:e}}_(r(/*! ./ui */"./src/ui/index.js"));var x={};function S(e,t,r){var n=e;t.map((function(e,a){n[e]=a==t.length-1?r:n[e]||{},n=n[e]}))}S(x,["controls","cssFullscreen"],T.default),S(x,["controls","danmu"],E.default),S(x,["controls","definition"],w.default),S(x,["controls","download"],b.default),S(x,["controls","errorRetry"],k.default),S(x,["controls","fullscreen"],v.default),S(x,["controls","i18n"],m.default),S(x,["controls","localPreview"],y.default),S(x,["controls","memoryPlay"],g.default),S(x,["controls","mobile"],p.default),S(x,["controls","pc"],f.default),S(x,["controls","pip"],h.default),S(x,["controls","play"],c.default),S(x,["controls","playNext"],d.default),S(x,["controls","reload"],u.default),S(x,["controls","replay"],l.default),S(x,["controls","rotate"],s.default),S(x,["controls","screenShot"],o.default),S(x,["controls","start"],i.default),S(x,["controls","volume"],a.default),t.default=n.default,e.exports=t.default},"./src/player.js":
/*!***********************!*\
      !*** ./src/player.js ***!
      \***********************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(n):void 0},i=p(r(/*! ./proxy */"./src/proxy.js")),o=p(r(/*! ./utils/util */"./src/utils/util.js")),s=p(r(/*! ./utils/database */"./src/utils/database.js")),l=p(r(/*! ./utils/sniffer */"./src/utils/sniffer.js")),u=p(r(/*! ./error */"./src/error.js")),d=p(r(/*! draggabilly */"./node_modules/draggabilly/draggabilly.js")),c=r(/*! ./utils/url */"./src/utils/url.js"),h=p(r(/*! downloadjs */"./node_modules/downloadjs/download.js")),f=r(/*! ../package.json */"./package.json");function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":_typeof(t))&&"function"!=typeof t?e:t}var y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(r.config=o.default.deepCopy({width:600,height:337.5,ignores:[],whitelist:[],lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),inactive:3e3,volume:.6,controls:!0,controlsList:["nodownload"]},e),r.version=f.version,r.userTimer=null,r.waitTimer=null,r.database=new s.default,r.history=[],r.isProgressMoving=!1,r.root=o.default.findDom(document,"#"+r.config.id),r.controls=o.default.createDom("hk-controls","",{unselectable:"on",onselectstart:"return false"},"hkplayer-controls"),r.config.isShowControl&&(r.controls.style.display="none"),!r.root){var n=r.config.el;if(!n||1!==n.nodeType)return r.emit("error",new u.default({type:"use",errd:{line:45,handle:"Constructor",msg:"container id can't be empty"},vid:r.config.vid})),console.error("container id can't be empty"),g(r,!1);r.root=n}if(o.default.addClass(r.root,"hkplayer hkplayer-"+l.default.device+" hkplayer-nostart "+(r.config.controls?"":"no-controls")),r.root.appendChild(r.controls),r.config.fluid?(r.root.style["max-width"]="100%",r.root.style.width="100%",r.root.style.height="0",r.root.style["padding-top"]=100*r.config.height/r.config.width+"%",r.video.style.position="absolute",r.video.style.top="0",r.video.style.left="0"):(r.config.width&&("number"!=typeof r.config.width?r.root.style.width=r.config.width:r.root.style.width=r.config.width+"px"),r.config.height&&("number"!=typeof r.config.height?r.root.style.height=r.config.height:r.root.style.height=r.config.height+"px")),r.config.execBeforePluginsCall&&r.config.execBeforePluginsCall.forEach((function(e){e.call(r,r)})),r.config.controlStyle&&"String"===o.default.typeOf(r.config.controlStyle)){var a=r;fetch(a.config.controlStyle,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){e.ok&&e.json().then((function(e){for(var t in e)e.hasOwnProperty(t)&&(a.config[t]=e[t]);a.pluginsCall()}))})).catch((function(e){console.log("Fetch错误:"+e)}))}else r.pluginsCall();r.ev.forEach((function(e){var t=Object.keys(e)[0],n=r[e[t]];n&&r.on(t,n)})),["focus","blur"].forEach((function(e){r.on(e,r["on"+e.charAt(0).toUpperCase()+e.slice(1)])}));var i=r;return r.mousemoveFunc=function(){i.emit("focus"),i.config.closeFocusVideoFocus||i.video.focus()},r.root.addEventListener("mousemove",r.mousemoveFunc),r.playFunc=function(){i.emit("focus"),i.config.closePlayVideoFocus||i.video.focus()},i.once("play",r.playFunc),r.getVideoSize=function(){if(this.video.videoWidth&&this.video.videoHeight){var e=i.root.getBoundingClientRect();"auto"===i.config.fitVideoSize?e.width/e.height>this.video.videoWidth/this.video.videoHeight?i.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":i.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px":"fixWidth"===i.config.fitVideoSize?i.root.style.height=this.video.videoHeight/this.video.videoWidth*e.width+"px":"fixHeight"===i.config.fitVideoSize&&(i.root.style.width=this.video.videoWidth/this.video.videoHeight*e.height+"px")}},i.once("loadeddata",r.getVideoSize),setTimeout((function(){r.emit("ready"),r.isReady=!0}),0),r.config.keyShortcut&&"on"!==r.config.keyShortcut||["video","controls"].forEach((function(e){i[e].addEventListener("keydown",(function(e){i.onKeydown(e,i)}))})),r.config.videoInit&&o.default.hasClass(r.root,"hkplayer-nostart")&&r.start(),i.config.rotate&&(i.on("requestFullscreen",r.updateRotateDeg),i.on("exitFullscreen",r.updateRotateDeg)),i.once("destroy",(function e(){i.root.removeEventListener("mousemove",i.mousemoveFunc),i.off("destroy",e)})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"start",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.url,n=this.root,a=this;if(r&&""!==r||this.emit("urlNull"),this.logParams.playSrc=r,this.canPlayFunc=function(){a.off("canplay",a.canPlayFunc)},"String"===o.default.typeOf(r)?r.indexOf("blob:")>-1&&r===this.video.src||(this.video.src=r):r.forEach((function(t){e.video.appendChild(o.default.createDom("source","",{src:""+t.src,type:""+(t.type||"")}))})),this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.loadeddataFunc=function(){a.logParams.vt=(new Date).getTime(),a.logParams.pt>a.logParams.vt&&(a.logParams.pt=a.logParams.vt),a.logParams.vd=a.video.duration},this.once("loadeddata",this.loadeddataFunc),this.config.autoplay){this.on("canplay",this.canPlayFunc);var i=a.video.play();void 0!==i&&i&&i.then((function(){a.emit("autoplay started")})).catch((function(){a.emit("autoplay was prevented"),t.util.addClass(a.root,"hkplayer-is-autoplay")}))}this.config.disableStartLoad||this.video.load(),n.insertBefore(this.video,n.firstChild),setTimeout((function(){e.emit("complete"),e.danmu&&"function"==typeof e.danmu.resize&&e.danmu.resize()}),1)}},{key:"reload",value:function(){this.video.load(),this.reloadFunc=function(){var e=this.play();void 0!==e&&e&&e.catch((function(e){}))},this.once("loadeddata",this.reloadFunc)}},{key:"destroy",value:function(){var e=this,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this;for(var i in clearInterval(this.bulletResizeTimer),this._interval)clearInterval(this._interval[i]),this._interval[i]=null;function o(){if(this.emit("destroy"),this.video.removeAttribute("src"),this.video.load(),r){this.root.innerHTML="";var e=this.root.className.split(" ");e.length>0?this.root.className=e.filter((function(e){return e.indexOf("hkplayer")<0})).join(" "):this.root.className=""}for(var t in this)delete this[t];this.off("pause",o)}this.checkTimer&&clearInterval(this.checkTimer),this.waitTimer&&clearTimeout(this.waitTimer),this.ev.forEach((function(t){var r=Object.keys(t)[0],n=e[t[r]];n&&e.off(r,n)})),this.loadeddataFunc&&this.off("loadeddata",this.loadeddataFunc),this.reloadFunc&&this.off("loadeddata",this.reloadFunc),this.replayFunc&&this.off("play",this.replayFunc),this.playFunc&&this.off("play",this.playFunc),this.getVideoSize&&this.off("loadeddata",this.getVideoSize),["focus","blur"].forEach((function(t){e.off(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),this.config.keyShortcut&&"on"!==this.config.keyShortcut||["video","controls"].forEach((function(t){e[t]&&e[t].removeEventListener("keydown",(function(e){n.onKeydown(e,n)}))})),this.paused?o.call(this):(this.pause(),this.once("pause",o)),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"replay",value:function(){var e=this,t=this._replay;if(o.default.removeClass(this.root,"hkplayer-ended"),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.replayFunc=function(){e.logParams.vt=(new Date).getTime(),e.logParams.pt>e.logParams.vt&&(e.logParams.pt=e.logParams.vt),e.logParams.vd=e.video.duration},this.once("play",this.replayFunc),this.logParams.playSrc=this.video.currentSrc,t&&t instanceof Function)t();else{this.currentTime=0;var r=this.play();void 0!==r&&r&&r.catch((function(e){}))}}},{key:"getFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):this.video.webkitSupportsFullscreen?this.video.webkitEnterFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():o.default.addClass(e,"hkplayer-is-cssfullscreen")}},{key:"exitFullscreen",value:function(e){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),o.default.removeClass(e,"hkplayer-is-cssfullscreen")}},{key:"getCssFullscreen",value:function(){o.default.addClass(this.root,"hkplayer-is-cssfullscreen"),this.emit("requestCssFullscreen")}},{key:"exitCssFullscreen",value:function(){o.default.removeClass(this.root,"hkplayer-is-cssfullscreen"),this.emit("exitCssFullscreen")}},{key:"getRotateFullscreen",value:function(){document.documentElement.style.width="100%",document.documentElement.style.height="100%",this.root&&!t.util.hasClass(this.root,"hkplayer-rotate-fullscreen")&&t.util.addClass(this.root,"hkplayer-rotate-fullscreen"),this.emit("getRotateFullscreen")}},{key:"exitRotateFullscreen",value:function(){document.documentElement.style.width="unset",document.documentElement.style.height="unset",this.root&&t.util.hasClass(this.root,"hkplayer-rotate-fullscreen")&&t.util.removeClass(this.root,"hkplayer-rotate-fullscreen"),this.emit("exitRotateFullscreen")}},{key:"download",value:function(){var e=(0,c.getAbsoluteURL)(this.config.url);(0,h.default)(e)}},{key:"pluginsCall",value:function(){var e=this,r=this;if(t.plugins){var n=this.config.ignores;Object.keys(t.plugins).forEach((function(a){var i=t.plugins[a];n.some((function(e){return a===e||a==="s_"+e}))||(["pc","tablet","mobile"].some((function(e){return e===a}))?a===l.default.device&&setTimeout((function(){i.call(r,r)}),0):i.call(e,e))}))}}},{key:"getPIP",value:function(){var e=o.default.createDom("hk-pip-lay","<div></div>",{},"hkplayer-pip-lay");this.root.appendChild(e);var t=o.default.createDom("hk-pip-drag",'<div class="drag-handle"><span>按住画面可移动小窗</span></div>',{tabindex:9},"hkplayer-pip-drag");this.root.appendChild(t),new d.default(".hkplayer",{handle:".drag-handle"}),o.default.addClass(this.root,"hkplayer-pip-active"),this.root.style.bottom="120px",this.root.style.top="",this.root.style.left="",this.root.style.width="420px",this.root.style.height="236.25px",this.config.pipConfig&&(void 0!==this.config.pipConfig.top&&(this.root.style.top=this.config.pipConfig.top+"px",this.root.style.bottom=""),void 0!==this.config.pipConfig.bottom&&(this.root.style.bottom=this.config.pipConfig.bottom+"px"),void 0!==this.config.pipConfig.left&&(this.root.style.left=this.config.pipConfig.left+"px",this.root.style.right=""),void 0!==this.config.pipConfig.right&&(this.root.style.right=this.config.pipConfig.right+"px"),void 0!==this.config.pipConfig.width&&(this.root.style.width=this.config.pipConfig.width+"px"),void 0!==this.config.pipConfig.height&&(this.root.style.height=this.config.pipConfig.height+"px")),this.config.fluid&&(this.root.style["padding-top"]="");var r=this;["click","touchend"].forEach((function(t){e.addEventListener(t,(function(e){e.preventDefault(),e.stopPropagation(),r.exitPIP()}))}))}},{key:"exitPIP",value:function(){o.default.removeClass(this.root,"hkplayer-pip-active"),this.root.style.right="",this.root.style.bottom="",this.root.style.top="",this.root.style.left="",this.config.fluid?(this.root.style.width="100%",this.root.style.height="0",this.root.style["padding-top"]=100*this.config.height/this.config.width+"%"):(this.config.width&&("number"!=typeof this.config.width?this.root.style.width=this.config.width:this.root.style.width=this.config.width+"px"),this.config.height&&("number"!=typeof this.config.height?this.root.style.height=this.config.height:this.root.style.height=this.config.height+"px"));var e=o.default.findDom(this.root,".hkplayer-pip-lay");e&&e.parentNode&&e.parentNode.removeChild(e);var t=o.default.findDom(this.root,".hkplayer-pip-drag");t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"updateRotateDeg",value:function(){this.rotateDeg||(this.rotateDeg=0);var e=this.root.offsetWidth,t=this.root.offsetHeight,r=this.video.videoWidth,n=this.video.videoHeight;!this.config.rotate.innerRotate&&this.config.rotate.controlsFix&&(this.root.style.width=t+"px",this.root.style.height=e+"px");var a=void 0;.25===this.rotateDeg||.75===this.rotateDeg?(a=this.config.rotate.innerRotate?r/n>t/e?t/(n/r>t/e?t*r/n:e):e/(n/r>t/e?t:e*n/r):e>=t?e/t:t/e,a=parseFloat(a.toFixed(5))):a=1,this.config.rotate.innerRotate||this.config.rotate.controlsFix?(this.video.style.transformOrigin="center center",this.video.style.transform="rotate("+this.rotateDeg+"turn) scale("+a+")",this.video.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale("+a+")"):(this.root.style.transformOrigin="center center",this.root.style.transform="rotate("+this.rotateDeg+"turn) scale(1)",this.root.style.webKitTransform="rotate("+this.rotateDeg+"turn) scale(1)")}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this;r.rotateDeg||(r.rotateDeg=0);var n=e?1:-1;r.rotateDeg=(r.rotateDeg+1+.25*n*t)%1,this.updateRotateDeg(),r.emit("rotate",360*r.rotateDeg)}},{key:"onFocus",value:function(){var e=this;o.default.removeClass(this.root,"hkplayer-inactive"),e.userTimer&&clearTimeout(e.userTimer),e.userTimer=setTimeout((function(){e.emit("blur")}),e.config.inactive)}},{key:"onBlur",value:function(){!this.config.enablePausedInactive&&this.paused||this.ended||this.config.closeInactive||o.default.addClass(this.root,"hkplayer-inactive")}},{key:"onPlay",value:function(){o.default.addClass(this.root,"hkplayer-playing"),o.default.removeClass(this.root,"hkplayer-pause")}},{key:"onPause",value:function(){o.default.addClass(this.root,"hkplayer-pause"),this.userTimer&&clearTimeout(this.userTimer),this.emit("focus")}},{key:"onEnded",value:function(){o.default.addClass(this.root,"hkplayer-ended"),o.default.removeClass(this.root,"hkplayer-playing")}},{key:"onSeeking",value:function(){this.isSeeking=!0,this.onWaiting()}},{key:"onTimeupdate",value:function(){this.waitTimer&&clearTimeout(this.waitTimer),o.default.removeClass(this.root,"hkplayer-isloading")}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),o.default.removeClass(this.root,"hkplayer-isloading")}},{key:"onWaiting",value:function(){var e=this;e.waitTimer&&clearTimeout(e.waitTimer),e.checkTimer&&(clearInterval(e.checkTimer),e.checkTimer=null);var t=e.currentTime;e.waitTimer=setTimeout((function(){o.default.addClass(e.root,"hkplayer-isloading"),e.checkTimer=setInterval((function(){e.currentTime!==t&&(o.default.removeClass(this.root,"hkplayer-isloading"),clearInterval(e.checkTimer),e.checkTimer=null)}),1e3)}),500)}},{key:"onPlaying",value:function(){this.paused||(this.isSeeking=!1,this.waitTimer&&clearTimeout(this.waitTimer),o.default.removeClass(this.root,"hkplayer-isloading hkplayer-nostart hkplayer-pause hkplayer-ended hkplayer-is-error hkplayer-replay"),o.default.addClass(this.root,"hkplayer-playing"))}},{key:"onKeydown",value:function(e,t){var r=e||window.event;if(!r||37!==r.keyCode&&38!==r.keyCode&&39!==r.keyCode&&40!==r.keyCode&&32!==r.keyCode||t.emit("focus"),!r||40!==r.keyCode&&38!==r.keyCode){if(r&&39===r.keyCode)t.currentTime+10<=t.duration?t.currentTime+=10:t.currentTime=t.duration-1;else if(r&&37===r.keyCode)t.currentTime-10>=0?t.currentTime-=10:t.currentTime=0;else if(r&&32===r.keyCode)if(t.paused){var n=t.play();void 0!==n&&n&&n.catch((function(e){}))}else t.pause()}else{if(t.controls){var a=t.controls.querySelector(".hkplayer-slider");a&&(o.default.hasClass(a,"hkplayer-none")&&o.default.removeClass(a,"hkplayer-none"),t.sliderTimer&&clearTimeout(t.sliderTimer),t.sliderTimer=setTimeout((function(){o.default.addClass(a,"hkplayer-none")}),t.config.inactive))}r&&40===r.keyCode?t.volume-.1>=0?t.volume=parseFloat((t.volume-.1).toFixed(1)):t.volume=0:r&&38===r.keyCode&&(t.volume+.1<=1?t.volume=parseFloat((t.volume+.1).toFixed(1)):t.volume=1)}}},{key:"cumulateTime",get:function(){if(this.logParams&&this.logParams.played instanceof Array){var e=o.default.computeWatchDur(this.logParams.played)||0;return Number(e.toFixed(3))}return 0}}],[{key:"install",value:function(e,r){t.plugins||(t.plugins={}),t.plugins[e]||(t.plugins[e]=r)}},{key:"use",value:function(e,r){t.plugins||(t.plugins={}),t.plugins[e]=r}}]),t}(i.default);y.util=o.default,y.sniffer=l.default,y.Errors=u.default,t.default=y,e.exports=t.default},"./src/proxy.js":
/*!**********************!*\
      !*** ./src/proxy.js ***!
      \**********************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(/*! event-emitter */"./node_modules/event-emitter/index.js")),i=s(r(/*! ./utils/util */"./src/utils/util.js")),o=s(r(/*! ./error */"./src/error.js"));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logParams={bc:0,bu_acu_t:0,played:[]},this._hasStart=!1,this.videoConfig={controls:!!t.isShowControl,autoplay:t.autoplay,playsinline:t.playsinline,"webkit-playsinline":t.playsinline,"x5-playsinline":t.playsinline,"x5-video-player-type":t["x5-video-player-type"]||t.x5VideoPlayerType,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.muted&&(this.videoConfig.muted="muted"),t.loop&&(this.videoConfig.loop="loop");var r="";if(this.textTrackShowDefault=!0,t.textTrack&&Array.isArray(t.textTrack)&&(t.textTrack.length>0&&!t.textTrack.some((function(e){return e.default}))&&(t.textTrack[0].default=!0,this.textTrackShowDefault=!1),t.textTrack.some((function(e){if(e.src&&e.label&&e.default)return r+='<track src="'+e.src+'" ',e.kind&&(r+='kind="'+e.kind+'" '),r+='label="'+e.label+'" ',e.srclang&&(r+='srclang="'+e.srclang+'" '),r+=(e.default?"default":"")+">",!0})),this.videoConfig.crossorigin="anonymous"),t.textTrackStyle){var n=document.createElement("style");this.textTrackStyle=n,document.head.appendChild(n);var o="";for(var s in t.textTrackStyle)o+=s+": "+t.textTrackStyle[s]+";";var l=t.id?"#"+t.id:t.el.id?"#"+t.el.id:"."+t.el.className;n.sheet.insertRule?n.sheet.insertRule(l+" video::cue { "+o+" }",0):n.sheet.addRule&&n.sheet.addRule(l+" video::cue",o)}this.video=i.default.createDom(this.videoConfig.mediaType,r,this.videoConfig,""),!this.textTrackShowDefault&&r&&(this.video.getElementsByTagName("Track")[0].track.mode="hidden"),t.autoplay&&(this.video.autoplay=!0,t.autoplayMuted&&(this.video.muted=!0)),this.ev=["play","playing","pause","ended","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadstart"].map((function(e){return t={},r=e,n="on"+e.charAt(0).toUpperCase()+e.slice(1),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t;var t,r,n})),(0,a.default)(this),this._interval={};var u="0,0",d=this;this.ev.forEach((function(e){d.evItem=Object.keys(e)[0];var t=Object.keys(e)[0];d.video.addEventListener(Object.keys(e)[0],(function(){d&&d.logParams&&("play"===t?d.hasStart=!0:"canplay"===t?i.default.removeClass(d.root,"hkplayer-is-enter"):"waiting"===t?(d.logParams.bc++,d.inWaitingStart=(new Date).getTime()):"playing"===t?(i.default.removeClass(d.root,"hkplayer-is-enter"),d.inWaitingStart&&(d.logParams.bu_acu_t+=(new Date).getTime()-d.inWaitingStart,d.inWaitingStart=void 0)):"loadeddata"===t?d.logParams.played.push({begin:0,end:-1}):"seeking"===t?d.logParams.played.push({begin:d.video.currentTime,end:-1}):d&&d.logParams&&d.logParams.played&&"timeupdate"===t&&(d.logParams.played.length<1&&d.logParams.played.push({begin:d.video.currentTime,end:-1}),d.logParams.played[d.logParams.played.length-1].end=d.video.currentTime),"error"===t?d._onError(t):d.emit(t,d),d.hasOwnProperty("_interval")&&(["ended","error","timeupdate"].indexOf(t)<0?(clearInterval(d._interval.bufferedChange),i.default.setInterval(d,"bufferedChange",(function(){if(d.video&&d.video.buffered){for(var e=[],t=0,r=d.video.buffered.length;t<r;t++)e.push([d.video.buffered.start(t),d.video.buffered.end(t)]);e.toString()!==u&&(u=e.toString(),d.emit("bufferedChange",e))}}),200)):"timeupdate"!==t&&i.default.clearInterval(d,"bufferedChange")))}),!1)}))}return n(e,[{key:"_onError",value:function(e){this.video&&this.video.error&&this.emit(e,new o.default("other",this.currentTime,this.duration,this.networkState,this.readyState,this.currentSrc,this.src,this.ended,{line:162,msg:this.error,handle:"Constructor"},this.video.error.code,this.video.error))}},{key:"destroy",value:function(){this.textTrackStyle&&this.textTrackStyle.parentNode.removeChild(this.textTrackStyle)}},{key:"play",value:function(){return this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"canPlayType",value:function(e){return this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(){var e=[0,0],t=this.video,r=t.buffered,n=t.currentTime;if(r)for(var a=0,i=r.length;a<i&&(e[0]=r.start(a),e[1]=r.end(a),!(e[0]<=n&&n<=e[1]));a++);return e[0]-n<=0&&n-e[1]<=0?e:[0,0]}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"!=typeof e||!0!==e||this._hasStart||(this._hasStart=!0,this.emit("hasstart"))}},{key:"autoplay",set:function(e){this.video.autoplay=e},get:function(){return this.video.autoplay}},{key:"buffered",get:function(){return this.video.buffered}},{key:"crossOrigin",get:function(){return this.video.crossOrigin},set:function(e){this.video.crossOrigin=e}},{key:"currentSrc",get:function(){return this.video.currentSrc},set:function(e){this.video.currentSrc=e}},{key:"currentTime",get:function(){return this.video.currentTime},set:function(e){var t=this;("function"!=typeof isFinite||isFinite(e))&&(i.default.hasClass(this.root,"hkplayer-ended")?(this.once("playing",(function(){t.video.currentTime=e})),this.replay()):this.video.currentTime=e,this.emit("currentTimeChange"))}},{key:"defaultMuted",get:function(){return this.video.defaultMuted},set:function(e){this.video.defaultMuted=e}},{key:"duration",get:function(){return this.video.duration}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){var e=this.video.error;if(!e)return null;var t=[{en:"MEDIA_ERR_ABORTED",cn:"取回过程被用户中止"},{en:"MEDIA_ERR_NETWORK",cn:"当下载时发生错误"},{en:"MEDIA_ERR_DECODE",cn:"当解码时发生错误"},{en:"MEDIA_ERR_SRC_NOT_SUPPORTED",cn:"不支持音频/视频"}];return this.lang?this.lang[t[e.code-1].en]:t[e.code-1].en}},{key:"loop",get:function(){return this.video.loop},set:function(e){this.video.loop=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"networkState",get:function(){var e=[{en:"NETWORK_EMPTY",cn:"音频/视频尚未初始化"},{en:"NETWORK_IDLE",cn:"音频/视频是活动的且已选取资源，但并未使用网络"},{en:"NETWORK_LOADING",cn:"浏览器正在下载数据"},{en:"NETWORK_NO_SOURCE",cn:"未找到音频/视频来源"}];return this.lang?this.lang[e[this.video.networkState].en]:e[this.video.networkState].en}},{key:"paused",get:function(){return this.video.paused}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"played",get:function(){return this.video.played}},{key:"preload",get:function(){return this.video.preload},set:function(e){this.video.preload=e}},{key:"readyState",get:function(){var e=[{en:"HAVE_NOTHING",cn:"没有关于音频/视频是否就绪的信息"},{en:"HAVE_METADATA",cn:"关于音频/视频就绪的元数据"},{en:"HAVE_CURRENT_DATA",cn:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒"},{en:"HAVE_FUTURE_DATA",cn:"当前及至少下一帧的数据是可用的"},{en:"HAVE_ENOUGH_DATA",cn:"可用数据足以开始播放"}];return this.lang?this.lang[e[this.video.readyState].en]:e[this.video.readyState]}},{key:"seekable",get:function(){return this.video.seekable}},{key:"seeking",get:function(){return this.video.seeking}},{key:"src",get:function(){return this.video.src},set:function(e){var t=this;i.default.hasClass(this.root,"hkplayer-ended")||this.emit("urlchange",JSON.parse(JSON.stringify(t.logParams))),this.logParams={bc:0,bu_acu_t:0,played:[],pt:(new Date).getTime(),vt:(new Date).getTime(),vd:0},this.video.pause(),this.video.src=e,this.emit("srcChange"),this.logParams.playSrc=e,this.logParams.pt=(new Date).getTime(),this.logParams.vt=this.logParams.pt,this.once("loadeddata",(function e(){t.logParams.vt=(new Date).getTime(),t.logParams.pt>t.logParams.vt&&(t.logParams.pt=t.logParams.vt),t.logParams.vd=t.video.duration,t.off("loadeddata",e)}))}},{key:"poster",set:function(e){var t=i.default.findDom(this.root,".hkplayer-poster");t&&(t.style.backgroundImage="url("+e+")")}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"fullscreen",get:function(){return i.default.hasClass(this.root,"hkplayer-is-fullscreen")||i.default.hasClass(this.root,"hkplayer-fullscreen-active")}},{key:"bullet",get:function(){return!!i.default.findDom(this.root,"hk-danmu")&&i.default.hasClass(i.default.findDom(this.root,"hk-danmu"),"hkplayer-has-danmu")}},{key:"textTrack",get:function(){return i.default.hasClass(this.root,"hkplayer-is-textTrack")}},{key:"pip",get:function(){return i.default.hasClass(this.root,"hkplayer-pip-active")}}]),e}();t.default=l,e.exports=t.default},"./src/ui/assets/download.svg":
/*!************************************!*\
      !*** ./src/ui/assets/download.svg ***!
      \************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n'},"./src/ui/assets/exitCssFull.svg":
/*!***************************************!*\
      !*** ./src/ui/assets/exitCssFull.svg ***!
      \***************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M18.562,22.5H5.439A3.867,3.867,0,0,1,1.5,18.562V5.439A3.867,3.867,0,0,1,5.439,1.5H18.562A3.867,3.867,0,0,1,22.5,5.439V18.562A3.867,3.867,0,0,1,18.562,22.5Zm1.312-17.06a1.24,1.24,0,0,0-1.312-1.312H5.439A1.24,1.24,0,0,0,4.127,5.439V18.562a1.24,1.24,0,0,0,1.312,1.312H18.562a1.24,1.24,0,0,0,1.312-1.312V5.439Zm-2.625,10.5H15.938V17.25a1.24,1.24,0,0,1-1.312,1.312,1.24,1.24,0,0,1-1.312-1.312V14.625a1.24,1.24,0,0,1,1.312-1.312H17.25a1.24,1.24,0,0,1,1.312,1.312A1.24,1.24,0,0,1,17.25,15.938ZM9.376,10.688H6.751A1.24,1.24,0,0,1,5.439,9.376,1.24,1.24,0,0,1,6.751,8.064H8.064V6.751A1.24,1.24,0,0,1,9.376,5.439a1.24,1.24,0,0,1,1.312,1.312V9.376A1.24,1.24,0,0,1,9.376,10.688Z"></path>\n</svg>\n'},"./src/ui/assets/exitFull.svg":
/*!************************************!*\
      !*** ./src/ui/assets/exitFull.svg ***!
      \************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M20.554,9.574a1.349,1.349,0,0,1-1.428-1.428V4.861H15.841a1.349,1.349,0,0,1-1.428-1.428,1.349,1.349,0,0,1,1.428-1.428h3.713a2.324,2.324,0,0,1,2.428,2.428V8.146A1.349,1.349,0,0,1,20.554,9.574Zm-1,3.856a1.349,1.349,0,0,1,1.428,1.428,1.349,1.349,0,0,1-1.428,1.428H18.269l3.285,3.285a1.38,1.38,0,0,1,0,2,1.381,1.381,0,0,1-2,0L16.27,18.285V19.57A1.349,1.349,0,0,1,14.841,21a1.349,1.349,0,0,1-1.428-1.428V15.857a2.407,2.407,0,0,1,2.428-2.428h3.713ZM8.129,10.574H4.415A1.349,1.349,0,0,1,2.987,9.145,1.349,1.349,0,0,1,4.415,7.717H5.7L2.416,4.433a1.38,1.38,0,0,1,0-2,1.381,1.381,0,0,1,2,0L7.7,5.718V4.433A1.349,1.349,0,0,1,9.128,3a1.431,1.431,0,0,1,1.428,1.428V8.146A2.407,2.407,0,0,1,8.129,10.574ZM3.415,14.429a1.349,1.349,0,0,1,1.428,1.428v3.285H8.129A1.431,1.431,0,0,1,9.557,20.57,1.349,1.349,0,0,1,8.129,22H4.415A2.324,2.324,0,0,1,1.987,19.57V15.857A1.349,1.349,0,0,1,3.415,14.429Z"></path>\n</svg>\n'},"./src/ui/assets/loading.svg":
/*!***********************************!*\
      !*** ./src/ui/assets/loading.svg ***!
      \***********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewbox="0 0 100 100">\n  <path d="M100,50A50,50,0,1,1,50,0"></path>\n</svg>\n'},"./src/ui/assets/panel.svg":
/*!*********************************!*\
      !*** ./src/ui/assets/panel.svg ***!
      \*********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="40" height="40">\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M36.5,18.73a1.19,1.19,0,0,0,1-1.14V16.33a1.2,1.2,0,0,0-1-1.13l-.61-.08a1.75,1.75,0,0,1-1.3-.86l-.21-.36-.2-.36A1.72,1.72,0,0,1,34,12l.23-.58a1.18,1.18,0,0,0-.5-1.42l-1.1-.62a1.18,1.18,0,0,0-1.47.3l-.39.51a1.82,1.82,0,0,1-1.41.72c-.44,0-1.88-.27-2.22-.7l-.39-.49a1.18,1.18,0,0,0-1.48-.28l-1.09.64a1.19,1.19,0,0,0-.47,1.43l.25.59a1.87,1.87,0,0,1-.08,1.58c-.26.37-1.17,1.5-1.71,1.58l-.63.09a1.19,1.19,0,0,0-1,1.14l0,1.27a1.17,1.17,0,0,0,1,1.12l.61.08a1.74,1.74,0,0,1,1.3.87l.21.36.2.35A1.69,1.69,0,0,1,24,22.08l-.23.59a1.19,1.19,0,0,0,.5,1.42l1.1.62a1.19,1.19,0,0,0,1.48-.31l.38-.5a1.83,1.83,0,0,1,1.41-.72c.44,0,1.88.25,2.22.69l.39.49a1.18,1.18,0,0,0,1.48.28L33.86,24a1.19,1.19,0,0,0,.47-1.43L34.09,22a1.84,1.84,0,0,1,.07-1.58c.26-.37,1.17-1.5,1.72-1.58ZM31,18.94a2.76,2.76,0,0,1-4.65-1.2A2.71,2.71,0,0,1,27,15.13a2.76,2.76,0,0,1,4.64,1.2A2.7,2.7,0,0,1,31,18.94Z"/>\n  <path fill="#f85959" transform="scale(0.8 0.8)" d="M32,0H3.59A3.59,3.59,0,0,0,0,3.59v17A3.59,3.59,0,0,0,3.59,24.2H19.72a12.59,12.59,0,0,1-.81-1.2A11.73,11.73,0,0,1,35.54,7.28V3.59A3.59,3.59,0,0,0,32,0ZM13,14.18H4.29a1.52,1.52,0,0,1,0-3H13a1.52,1.52,0,0,1,0,3ZM16.45,8H4.29a1.51,1.51,0,0,1,0-3H16.45a1.51,1.51,0,1,1,0,3Z"/>\n</svg>\n'},"./src/ui/assets/pause.svg":
/*!*********************************!*\
      !*** ./src/ui/assets/pause.svg ***!
      \*********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path fill="#fff" d="M 20.57 25.5 C 18.419935730782658 25.51609501264857 16.662441003697012 23.789017603313443 16.641 21.638999999999996C 16.641 6.361 16.641 6.361 16.641 6.361C 16.68918139255758 4.225607404744156 18.434063909555775 2.5196510011223547 20.570000000000014 2.5196510011223627C 22.705936090444258 2.519651001122371 24.450818607442436 4.225607404744185 24.499000000000002 6.361000000000018C 24.499000000000002 21.639 24.499000000000002 21.639 24.499000000000002 21.639C 24.47755899630298 23.789017603313457 22.720064269217325 25.516095012648577 20.569999999999986 25.499999999999996C 20.57 25.5 20.57 25.5 20.57 25.5M 7.4299999999999855 25.499999999999996 C 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996C 5.279546652516016 25.516649329606523 3.5214407273795896 23.789410913079355 3.499999999999999 21.639C 3.499999999999999 6.361 3.499999999999999 6.361 3.499999999999999 6.361C 3.5214403093372475 4.210195654866002 5.280157596304979 2.4827961521994055 7.4310000000000045 2.5000000000000004C 7.4310000000000045 2.5000000000000004 7.4310000000000045 2.5000000000000004 7.4310000000000045 2.5000000000000004C 9.581064269217341 2.4839049873514316 11.338558996302988 4.210982396686553 11.36 6.361000000000001C 11.36 21.639 11.36 21.639 11.36 21.639C 11.338558996302982 23.789017603313457 9.581064269217325 25.516095012648574 7.4309999999999885 25.499999999999996C 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996"></path>\n</svg>\n'},"./src/ui/assets/play.svg":
/*!********************************!*\
      !*** ./src/ui/assets/play.svg ***!
      \********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path fill="#fff" d="M 21.2 17.3 C 21.2 17.3 21.2 17.3 11.399999999999999 23.200000000000003C 9.599999999999998 24.300000000000004 7.299999999999999 23.700000000000003 6.199999999999998 21.900000000000002C 5.799999999999998 21.3 5.699999999999998 20.6 5.699999999999998 19.900000000000002C 5.699999999999998 8.1 5.699999999999998 8.1 5.699999999999998 8.1C 5.699999999999998 6 7.399999999999999 4.3 9.499999999999998 4.3C 10.199999999999998 4.3 10.899999999999999 4.5 11.499999999999998 4.8C 11.499999999999998 4.8 11.499999999999998 4.8 21.299999999999997 10.7C 23.099999999999998 11.799999999999999 23.699999999999996 14.1 22.599999999999998 15.899999999999999C 22.2 16.5 21.7 16.9 21.2 17.3C 21.2 17.3 21.2 17.3 21.2 17.3"></path>\n</svg>\n'},"./src/ui/assets/playNext.svg":
/*!************************************!*\
      !*** ./src/ui/assets/playNext.svg ***!
      \************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n'},"./src/ui/assets/reload.svg":
/*!**********************************!*\
      !*** ./src/ui/assets/reload.svg ***!
      \**********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path fill="#FFF" fill-opacity="1" fill-rule="nonzero" d="M18.17 19.988a7.182 7.182 0 0 1-4.256 1.318 7.806 7.806 0 0 1-.595-.03c-.08-.008-.16-.021-.242-.031a8.004 8.004 0 0 1-.458-.071c-.094-.018-.185-.042-.276-.063a7.743 7.743 0 0 1-.439-.113c-.068-.022-.136-.047-.205-.07a7.03 7.03 0 0 1-.492-.181c-.037-.015-.072-.032-.108-.049a7.295 7.295 0 0 1-.554-.269l-.025-.012a7.347 7.347 0 0 1-2.111-1.753c-.03-.036-.057-.074-.086-.11a7.305 7.305 0 0 1-1.594-4.557h1.686a.123.123 0 0 0 .108-.064.119.119 0 0 0-.006-.125L5.684 9.532a.123.123 0 0 0-.103-.056.123.123 0 0 0-.102.056l-2.834 4.276a.121.121 0 0 0-.005.125c.022.04.064.064.107.064h1.687c0 2.025.627 3.902 1.693 5.454.013.021.022.044.037.066.11.159.233.305.352.455.043.057.085.116.13.171.175.213.36.413.55.61.02.018.036.038.054.055a9.447 9.447 0 0 0 2.91 1.996c.058.026.115.054.175.079.202.084.41.158.619.228.098.034.196.069.296.1.183.054.37.1.558.145.125.029.249.06.376.085.052.01.102.027.155.035.177.032.355.05.533.071.064.007.128.018.19.026.32.03.639.052.956.052a9.46 9.46 0 0 0 5.47-1.746 1.16 1.16 0 0 0 .282-1.608 1.143 1.143 0 0 0-1.6-.283zm5.397-5.991a9.604 9.604 0 0 0-1.685-5.441c-.016-.027-.026-.054-.043-.078-.132-.19-.276-.366-.419-.543-.017-.022-.032-.044-.05-.065a9.467 9.467 0 0 0-3.571-2.7l-.114-.051a11.2 11.2 0 0 0-.673-.248c-.082-.027-.163-.057-.247-.082a9.188 9.188 0 0 0-.6-.156c-.113-.026-.224-.055-.337-.077-.057-.011-.109-.028-.164-.037-.151-.027-.304-.039-.455-.058-.104-.013-.208-.03-.313-.04a10.05 10.05 0 0 0-.759-.039c-.045 0-.09-.007-.136-.007l-.025.003a9.45 9.45 0 0 0-5.46 1.737 1.16 1.16 0 0 0-.284 1.608c.363.523 1.08.65 1.6.284a7.182 7.182 0 0 1 4.222-1.32c.217.002.429.013.639.033.065.007.129.017.193.025.173.021.344.046.513.08.075.014.149.033.221.05.166.037.331.077.494.127l.152.051c.185.061.366.127.545.201l.054.025a7.308 7.308 0 0 1 2.741 2.067l.013.018a7.302 7.302 0 0 1 1.652 4.633h-1.686a.123.123 0 0 0-.108.064.12.12 0 0 0 .006.124l2.834 4.277c.022.033.06.054.103.054.042 0 .08-.021.102-.054l2.833-4.277a.12.12 0 0 0 .005-.124.123.123 0 0 0-.108-.064h-1.685z"/>\n</svg>\n'},"./src/ui/assets/replay.svg":
/*!**********************************!*\
      !*** ./src/ui/assets/replay.svg ***!
      \**********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg class="hkplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" width="78" height="78" viewbox="0 0 78 78">\n  <path d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n'},"./src/ui/assets/replaysmall.svg":
/*!***************************************!*\
      !*** ./src/ui/assets/replaysmall.svg ***!
      \***************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g>\n            <rect x="0" y="0" width="28" height="28"></rect>\n            <path d="M17.0245418,5.0729201 C21.9548319,6.86739894 24.4969092,12.3189013 22.7024303,17.2491914 C20.9079515,22.1794814 15.4564491,24.7215587 10.5261591,22.9270799 C8.33961794,22.131244 6.55969948,20.5878837 5.4584388,18.5914211 C5.05831015,17.8660325 5.32198541,16.9536206 6.04737397,16.5534919 C6.77276254,16.1533633 7.68517451,16.4170385 8.08530316,17.1424271 C8.83942834,18.5095718 10.0539456,19.5626749 11.5522195,20.108002 C14.9255759,21.3358033 18.6555511,19.5964873 19.8833525,16.2231309 C21.1111538,12.8497746 19.3718377,9.11979928 15.9984814,7.89199796 C12.625125,6.66419665 8.89514969,8.40351269 7.66734838,11.7768691 C7.38400962,12.5553359 6.52324609,12.9567165 5.74477924,12.6733778 C5.32370594,12.5201196 5.01295813,12.1979222 4.86121974,11.8111887 C4.77192186,11.6192656 4.72206414,11.4051885 4.72206414,11.1794665 L4.72206414,11.1794665 L4.72206414,7.20389115 C4.72206414,6.37546403 5.39363701,5.70389115 6.22206414,5.70389115 C6.88793057,5.70389115 7.45246144,6.1377603 7.64837559,6.73821746 C10.1634129,4.61934286 13.7116446,3.86712413 17.0245418,5.0729201 Z" fill="#FFFFFF" fill-rule="nonzero"></path>\n        </g>\n    </g>\n</svg>\n'},"./src/ui/assets/requestCssFull.svg":
/*!******************************************!*\
      !*** ./src/ui/assets/requestCssFull.svg ***!
      \******************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M18.562,22.5H5.439A3.867,3.867,0,0,1,1.5,18.562V5.439A3.867,3.867,0,0,1,5.439,1.5H18.562A3.867,3.867,0,0,1,22.5,5.439V18.562A3.867,3.867,0,0,1,18.562,22.5Zm1.312-17.06a1.24,1.24,0,0,0-1.312-1.312H5.439A1.24,1.24,0,0,0,4.127,5.439V18.562a1.24,1.24,0,0,0,1.312,1.312H18.562a1.24,1.24,0,0,0,1.312-1.312V5.439ZM17.75,18.562H15.125a1.312,1.312,0,1,1,0-2.625h1.312V14.625a1.312,1.312,0,0,1,2.625,0V17.25A1.24,1.24,0,0,1,17.75,18.562ZM9.876,8.064H8.564V9.376a1.24,1.24,0,0,1-1.312,1.312A1.24,1.24,0,0,1,5.939,9.376V6.751A1.24,1.24,0,0,1,7.251,5.439H9.876a1.24,1.24,0,0,1,1.312,1.312A1.24,1.24,0,0,1,9.876,8.064Z"></path>\n</svg>\n'},"./src/ui/assets/requestFull.svg":
/*!***************************************!*\
      !*** ./src/ui/assets/requestFull.svg ***!
      \***************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M19.321,21.336H15.73a1.381,1.381,0,1,1,0-2.762h1.243L13.8,15.4a1.367,1.367,0,1,1,1.934-1.934l3.177,3.177V15.4a1.3,1.3,0,0,1,1.381-1.381A1.384,1.384,0,0,1,21.669,15.4v3.591A2.328,2.328,0,0,1,19.321,21.336ZM20.288,9.319a1.3,1.3,0,0,1-1.381-1.381V4.761H15.73A1.3,1.3,0,0,1,14.349,3.38,1.3,1.3,0,0,1,15.73,2h3.591a2.248,2.248,0,0,1,2.348,2.348V7.938A1.3,1.3,0,0,1,20.288,9.319Zm-11.05.967a1.254,1.254,0,0,1-.967-0.414L5.095,6.695V7.938A1.3,1.3,0,0,1,3.713,9.319,1.3,1.3,0,0,1,2.332,7.938V4.347A2.248,2.248,0,0,1,4.68,2H8.271A1.3,1.3,0,0,1,9.653,3.38,1.3,1.3,0,0,1,8.271,4.761H7.028l3.177,3.177a1.335,1.335,0,0,1,0,1.934A1.254,1.254,0,0,1,9.238,10.286ZM3.713,14.015A1.3,1.3,0,0,1,5.095,15.4v3.177H8.271a1.384,1.384,0,0,1,1.381,1.381,1.3,1.3,0,0,1-1.381,1.381H4.68a2.248,2.248,0,0,1-2.348-2.348V15.4A1.3,1.3,0,0,1,3.713,14.015Z"></path>\n</svg>'},"./src/ui/assets/rotate.svg":
/*!**********************************!*\
      !*** ./src/ui/assets/rotate.svg ***!
      \**********************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n'},"./src/ui/assets/startPause.svg":
/*!**************************************!*\
      !*** ./src/ui/assets/startPause.svg ***!
      \**************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path fill="#fff" d="M 20.57 25.5 C 18.419935730782658 25.51609501264857 16.662441003697012 23.789017603313443 16.641 21.638999999999996C 16.641 6.361 16.641 6.361 16.641 6.361C 16.68918139255758 4.225607404744156 18.434063909555775 2.5196510011223547 20.570000000000014 2.5196510011223627C 22.705936090444258 2.519651001122371 24.450818607442436 4.225607404744185 24.499000000000002 6.361000000000018C 24.499000000000002 21.639 24.499000000000002 21.639 24.499000000000002 21.639C 24.47755899630298 23.789017603313457 22.720064269217325 25.516095012648577 20.569999999999986 25.499999999999996C 20.57 25.5 20.57 25.5 20.57 25.5M 7.4299999999999855 25.499999999999996 C 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996C 5.279546652516016 25.516649329606523 3.5214407273795896 23.789410913079355 3.499999999999999 21.639C 3.499999999999999 6.361 3.499999999999999 6.361 3.499999999999999 6.361C 3.5214403093372475 4.210195654866002 5.280157596304979 2.4827961521994055 7.4310000000000045 2.5000000000000004C 7.4310000000000045 2.5000000000000004 7.4310000000000045 2.5000000000000004 7.4310000000000045 2.5000000000000004C 9.581064269217341 2.4839049873514316 11.338558996302988 4.210982396686553 11.36 6.361000000000001C 11.36 21.639 11.36 21.639 11.36 21.639C 11.338558996302982 23.789017603313457 9.581064269217325 25.516095012648574 7.4309999999999885 25.499999999999996C 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996 7.4299999999999855 25.499999999999996"></path>\n</svg>'},"./src/ui/assets/startPlay.svg":
/*!*************************************!*\
      !*** ./src/ui/assets/startPlay.svg ***!
      \*************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">\n    <path d="M21.2,17.3l-9.8,5.9c-1.8,1.1-4.1,0.5-5.2-1.3c-0.4-0.6-0.5-1.3-0.5-2V8.1c0-2.1,1.7-3.8,3.8-3.8c0.7,0,1.4,0.2,2,0.5l9.8,5.9c1.8,1.1,2.4,3.4,1.3,5.2C22.2,16.5,21.7,16.9,21.2,17.3z"></path>\n</svg>'},"./src/ui/assets/volumeLarge.svg":
/*!***************************************!*\
      !*** ./src/ui/assets/volumeLarge.svg ***!
      \***************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M11.972,21a1.223,1.223,0,0,1-.86-0.321L4.768,16.393H2.617A1.651,1.651,0,0,1,1,14.786V9.214A1.493,1.493,0,0,1,2.51,7.607H4.66L11,3.321A1.224,1.224,0,0,1,11.865,3a1.651,1.651,0,0,1,1.613,1.607V19.393A1.606,1.606,0,0,1,11.972,21ZM11.435,6.584a0.429,0.429,0,0,0-.666-0.356L5.628,9.643a0.808,0.808,0,0,1-.538.107H3.476a0.428,0.428,0,0,0-.429.427V13.93a0.428,0.428,0,0,0,.429.427H5.09a1.532,1.532,0,0,1,.645.214l5.029,3.4a0.429,0.429,0,0,0,.67-0.353V6.584Z"></path>\n    <path d="M 18.462 19.026 C 18.11202741885571 19.192371807971472 17.69951096195798 19.156920697887138 17.383055790751026 18.93327698423332C 17.06660061954407 18.709633270579506 16.895474657071414 18.332615348743587 16.93547275939622 17.94717983163222C 16.975470861721025 17.56174431452085 17.220365848482455 17.227898461054334 17.575999999999993 17.073999999999998C 19.503065966047238 16.149055224848485 20.762044365400822 14.235777327389055 20.849 12.100000000000001C 20.7895411014595 9.885731374036904 19.744842291752832 7.813568168121706 18.000000000000014 6.4490000000000105C 17.687571232471626 6.227316705062276 17.517141778245673 5.855794128081069 17.552910764850647 5.474381231562071C 17.58867975145562 5.092968335043074 17.82521301877115 4.75961081296272 18.173410772034128 4.599881220662566C 18.521608525297104 4.440151628362413 18.92857124108291 4.478316691375019 19.240999999268045 4.699999999480642C 21.555047213256636 6.465919797821486 22.93868176060517 9.189754766989893 23 12.099999999999998C 23 16.925 18.648 18.943 18.462 19.026C 18.462 19.026 18.462 19.026 18.462 19.026M 16.354 15.213 C 16.22554004933095 15.265926426850235 16.087935791017188 15.293107514912212 15.949 15.293C 15.436559057888177 15.293620973955175 14.995478496129243 14.93116027817956 14.896762320236064 14.428317140234798C 14.798046144342885 13.925474002290038 15.069357431585397 13.423159356516564 15.544 13.229999999999997C 16.00234124275058 13.034888241156017 16.313086036580206 12.599845529794537 16.349 12.102999999999996C 16.317250328107082 11.623423709949842 16.009073808263047 11.206272223012666 15.56 11.034999999999997C 15.040994176422148 10.80274013177266 14.793620131615882 10.205661846820117 14.996294902743882 9.674404255396786C 15.198969673871883 9.143146663973456 15.781175525425898 8.862553109482361 16.323000000000004 9.034999999999997C 17.61024217992674 9.511343040292777 18.47418737270433 10.72769215185149 18.5 12.1C 18.47058372971049 13.473372410728542 17.62692283691848 14.697584908470521 16.35399999999999 15.214000000000006C 16.354 15.213 16.354 15.213 16.354 15.213"></path>\n</svg>\n'},"./src/ui/assets/volumeMuted.svg":
/*!***************************************!*\
      !*** ./src/ui/assets/volumeMuted.svg ***!
      \***************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M11.972,21a1.223,1.223,0,0,1-.86-0.321L4.768,16.393H2.617A1.651,1.651,0,0,1,1,14.786V9.214A1.493,1.493,0,0,1,2.51,7.607H4.66L11,3.321A1.224,1.224,0,0,1,11.865,3a1.651,1.651,0,0,1,1.613,1.607V19.393A1.606,1.606,0,0,1,11.972,21ZM11.435,6.584a0.429,0.429,0,0,0-.666-0.356L5.628,9.643a0.808,0.808,0,0,1-.538.107H3.476a0.428,0.428,0,0,0-.429.427V13.93a0.428,0.428,0,0,0,.429.427H5.09a1.532,1.532,0,0,1,.645.214l5.029,3.4a0.429,0.429,0,0,0,.67-0.353V6.584Z"></path>\n    <path d="M 22.7 9.934 C 22.7 9.934 22.7 9.934 20.4 12.248C 20.4 12.248 20.4 12.248 22.599999999999998 14.460999999999999C 22.791724786783654 14.645216681730044 22.900088816756583 14.899616228974256 22.900088816756583 15.165499999999998C 22.900088816756583 15.43138377102574 22.791724786783654 15.685783318269952 22.599999999999998 15.869999999999997C 22.41808623922139 16.062548257815404 22.16489138896605 16.171661206339742 21.9 16.171661206339742C 21.635108611033946 16.171661206339742 21.381913760778605 16.062548257815404 21.2 15.869999999999997C 19 13.657 19 13.657 19 13.657C 19 13.657 19 13.657 16.7 15.971C 16.518086239221393 16.163548257815407 16.264891388966053 16.272661206339748 16 16.272661206339748C 15.735108611033947 16.272661206339748 15.481913760778607 16.163548257815407 15.3 15.971000000000002C 15.108591766152443 15.786815475563408 15.000431177316191 15.53263330180265 15.000431177316191 15.267000000000003C 15.000431177316191 15.001366698197357 15.108591766152443 14.747184524436598 15.3 14.563000000000004C 15.3 14.563000000000004 15.3 14.563000000000004 17.6 12.249000000000004C 17.6 12.249000000000004 17.6 12.249000000000004 15.400000000000002 10.036000000000005C 15.208275213216345 9.851783318269959 15.099911183243417 9.597383771025747 15.099911183243417 9.331500000000005C 15.099911183243417 9.065616228974264 15.208275213216345 8.811216681730052 15.400000000000004 8.627000000000006C 15.581913760778612 8.4344517421846 15.835108611033952 8.32533879366026 16.100000000000005 8.32533879366026C 16.364891388966058 8.32533879366026 16.618086239221398 8.4344517421846 16.800000000000004 8.627000000000006C 19 10.84 19 10.84 19 10.84C 19 10.84 19 10.84 21.3 8.526C 21.481913760778607 8.333451742184593 21.735108611033947 8.224338793660255 22 8.224338793660255C 22.264891388966053 8.224338793660255 22.518086239221393 8.333451742184593 22.7 8.526C 22.891408233847557 8.710184524436595 22.99956882268381 8.964366698197354 22.99956882268381 9.23C 22.99956882268381 9.495633301802647 22.891408233847557 9.749815475563405 22.7 9.934000000000001C 22.7 9.934 22.7 9.934 22.7 9.934"></path>\n</svg>\n'},"./src/ui/assets/volumeSmall.svg":
/*!***************************************!*\
      !*** ./src/ui/assets/volumeSmall.svg ***!
      \***************************************/
/*! exports provided: default */function(e,t,r){r.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M11.972,21a1.223,1.223,0,0,1-.86-0.321L4.768,16.393H2.617A1.651,1.651,0,0,1,1,14.786V9.214A1.493,1.493,0,0,1,2.51,7.607H4.66L11,3.321A1.224,1.224,0,0,1,11.865,3a1.651,1.651,0,0,1,1.613,1.607V19.393A1.606,1.606,0,0,1,11.972,21ZM11.435,6.584a0.429,0.429,0,0,0-.666-0.356L5.628,9.643a0.808,0.808,0,0,1-.538.107H3.476a0.428,0.428,0,0,0-.429.427V13.93a0.428,0.428,0,0,0,.429.427H5.09a1.532,1.532,0,0,1,.645.214l5.029,3.4a0.429,0.429,0,0,0,.67-0.353V6.584Z"></path>\n    <path d="M 16.354 15.214 C 16.22554004933095 15.266926426850237 16.087935791017188 15.294107514912213 15.949 15.294C 15.436559057888177 15.294620973955176 14.995478496129243 14.93216027817956 14.896762320236064 14.429317140234799C 14.798046144342885 13.926474002290039 15.069357431585397 13.424159356516565 15.544 13.230999999999998C 16.00234124275058 13.035888241156018 16.313086036580206 12.600845529794539 16.349 12.103999999999997C 16.317250328107082 11.624423709949843 16.009073808263047 11.207272223012668 15.56 11.035999999999998C 15.040994176422148 10.803740131772662 14.793620131615882 10.206661846820118 14.996294902743882 9.675404255396787C 15.198969673871883 9.144146663973457 15.781175525425898 8.863553109482362 16.323000000000004 9.035999999999998C 17.60990718424283 9.5122101430101 18.473779789916595 10.728060241211486 18.5 12.099999999999998C 18.470583729710505 13.473372410728508 17.62692283691851 14.697584908470496 16.35400000000002 15.213999999999995C 16.354 15.214 16.354 15.214 16.354 15.214"></path>\n</svg>\n'},"./src/ui/controls/cssFullscreen.js":
/*!******************************************!*\
      !*** ./src/ui/controls/cssFullscreen.js ***!
      \******************************************/
/*! no static exports found */function(e,t,r){var n=o(r(/*! ../../player */"./src/player.js")),a=o(r(/*! ../assets/requestCssFull.svg */"./src/ui/assets/requestCssFull.svg")),i=o(r(/*! ../assets/exitCssFull.svg */"./src/ui/assets/exitCssFull.svg"));function o(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_cssFullscreen",(function(){var e=this,t=n.default.util;if(e.config.cssFullscreen){var r=t.createDom("hk-cssfullscreen",'<hk-icon class="hkplayer-icon">\n        <div class="hkplayer-icon-requestfull">'+a.default+'</div>\n        <div class="hkplayer-icon-exitfull">'+i.default+"</div>\n    </hk-icon>",{},"hkplayer-cssfullscreen"),o={};o.requestfull=e.lang.CSSFULLSCREEN_TIPS,o.exitfull=e.lang.EXITCSSFULLSCREEN_TIPS;var s=t.createDom("hk-tips",'<span class="hkplayer-tip-requestfull">'+o.requestfull+'</span>\n                                        <span class="hkplayer-tip-exitfull">'+o.exitfull+"</span>",{},"hkplayer-tips");r.appendChild(s),e.once("ready",(function(){e.controls.appendChild(r)})),["click","touchend"].forEach((function(t){r.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("cssFullscreenBtnClick")}))}))}}))},"./src/ui/controls/danmu.js":
/*!**********************************!*\
      !*** ./src/ui/controls/danmu.js ***!
      \**********************************/
/*! no static exports found */function(e,t,r){var n=o(r(/*! ../../player */"./src/player.js")),a=o(r(/*! danmu.js */"./node_modules/danmu.js/dist/index.js")),i=o(r(/*! ../assets/panel.svg */"./src/ui/assets/panel.svg"));function o(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_danmu",(function(){var e=this,t=e.root,r=n.default.util;if(e.config.danmu){var o=r.createDom("hk-danmu","",{},"hkplayer-danmu");e.once("ready",(function(){t.appendChild(o)}));var s=r.deepCopy({container:o,player:e.video,comments:[],area:{start:0,end:1}},e.config.danmu),l=void 0;e.config.danmu.panel&&(l=n.default.util.createDom("hk-panel",'<hk-panel-icon class="hkplayer-panel-icon">\n                                                '+i.default+'\n                                              </hk-panel-icon>\n                                              <hk-panel-slider class="hkplayer-panel-slider">\n                                                <hk-hidemode class="hkplayer-hidemode">\n                                                  <p class="hkplayer-hidemode-font">屏蔽类型</p>\n                                                  <ul class="hkplayer-hidemode-radio">\n                                                    <li class="hkplayer-hidemode-scroll" id="false">滚动</li><li class="hkplayer-hidemode-top" id="false">顶部</li><li class="hkplayer-hidemode-bottom" id="false">底部</li><li class="hkplayer-hidemode-color" id="false">色彩</li>\n                                                  </ul>\n                                                </hk-hidemode>\n                                                <hk-transparency class="hkplayer-transparency">\n                                                  <span>不透明度</span>\n                                                  <input class="hkplayer-transparency-line hkplayer-transparency-color hkplayer-transparency-bar hkplayer-transparency-gradient" type="range" min="0" max="100" step="0.1" value="50"></input>\n                                                </hk-transparency>\n                                                <hk-showarea class="hkplayer-showarea">\n                                                  <div class="hkplayer-showarea-name">显示区域</div>\n                                                  <div class="hkplayer-showarea-control">\n                                                    <div class="hkplayer-showarea-control-up">\n                                                      <span class="hkplayer-showarea-control-up-item hkplayer-showarea-onequarters">1/4</span>\n                                                      <span class="hkplayer-showarea-control-up-item hkplayer-showarea-twoquarters selected-color">1/2</span>\n                                                      <span class="hkplayer-showarea-control-up-item hkplayer-showarea-threequarters">3/4</span>\n                                                      <span class="hkplayer-showarea-control-up-item hkplayer-showarea-full">1</span>\n                                                    </div>\n                                                    <div class="hkplayer-showarea-control-down">\n                                                      <div class="hkplayer-showarea-control-down-dots">\n                                                        <span class="hkplayer-showarea-onequarters-dot"></span>\n                                                        <span class="hkplayer-showarea-twoquarters-dot"></span>\n                                                        <span class="hkplayer-showarea-threequarters-dot"></span>\n                                                        <span class="hkplayer-showarea-full-dot"></span>\n                                                      </div>\n                                                      <input class="hkplayer-showarea-line hkplayer-showarea-color hkplayer-showarea-bar hkplayer-gradient" type="range" min="1" max="4" step="1" value="1">\n                                                    </div>\n                                                  </div>\n                                                </hk-showarea>\n                                                <hk-danmuspeed class="hkplayer-danmuspeed">\n                                                  <div class="hkplayer-danmuspeed-name">弹幕速度</div>\n                                                  <div class="hkplayer-danmuspeed-control">\n                                                    <div class="hkplayer-danmuspeed-control-up">\n                                                      <span class="hkplayer-danmuspeed-control-up-item hkplayer-danmuspeed-small">慢</span>\n                                                      <span class="hkplayer-danmuspeed-control-up-item hkplayer-danmuspeed-middle selected-color">中</span>\n                                                      <span class="hkplayer-danmuspeed-control-up-item hkplayer-danmuspeed-large">快</span>\n                                                    </div>\n                                                    <div class="hkplayer-danmuspeed-control-down">\n                                                      <div class="hkplayer-danmuspeed-control-down-dots">\n                                                        <span class="hkplayer-danmuspeed-small-dot"></span>\n                                                        <span class="hkplayer-danmuspeed-middle-dot"></span>\n                                                        <span class="hkplayer-danmuspeed-large-dot"></span>\n                                                      </div>\n                                                      <input class="hkplayer-danmuspeed-line hkplayer-danmuspeed-color hkplayer-danmuspeed-bar hkplayer-gradient" type="range" min="50" max="150" step="50" value="100">\n                                                    </div>\n                                                  </div>\n                                                </hk-danmuspeed>\n                                                <hk-danmufont class="hkplayer-danmufont">\n                                                  <div class="hkplayer-danmufont-name">字体大小</div>\n                                                  <div class="hkplayer-danmufont-control">\n                                                    <div class="hkplayer-danmufont-control-up">\n                                                      <span class="hkplayer-danmufont-control-up-item hkplayer-danmufont-small">小</span>\n                                                      <span class="hkplayer-danmufont-control-up-item hkplayer-danmufont-middle">中</span>\n                                                      <span class="hkplayer-danmufont-control-up-item hkplayer-danmufont-large selected-color">大</span>\n                                                    </div>\n                                                    <div class="hkplayer-danmufont-control-down">\n                                                      <div class="hkplayer-danmufont-control-down-dots">\n                                                        <span class="hkplayer-danmufont-small-dot"></span>\n                                                        <span class="hkplayer-danmufont-middle-dot"></span>\n                                                        <span class="hkplayer-danmufont-large-dot"></span>\n                                                      </div>\n                                                      <input class="hkplayer-danmufont-line hkplayer-danmufont-color hkplayer-danmufont-bar hkplayer-gradient" type="range" min="20" max="30" step="5" value="25">\n                                                    </div>\n                                                  </div>\n                                                </hk-danmufont>\n                                              </hk-panel-slider>',{tabindex:7},"hkplayer-panel"),e.once("ready",(function(){e.controls.appendChild(l)}))),e.once("complete",(function(){var t=new a.default(s);if(e.emit("initDefaultDanmu",t),e.danmu=t,e.config.danmu.panel){var r=l.querySelector(".hkplayer-panel-slider"),i=void 0;["mouseenter","touchend","click"].forEach((function(e){l.addEventListener(e,(function(e){e.preventDefault(),e.stopPropagation(),n.default.util.addClass(r,"hkplayer-panel-active"),l.focus(),i=!0}))})),l.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),n.default.util.removeClass(r,"hkplayer-panel-active"),i=!1})),r.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),!1===i&&n.default.util.removeClass(r,"hkplayer-panel-active")}));var o=e.config.danmu,u={scroll:l.querySelector(".hkplayer-hidemode-scroll"),top:l.querySelector(".hkplayer-hidemode-top"),bottom:l.querySelector(".hkplayer-hidemode-bottom"),color:l.querySelector(".hkplayer-hidemode-color")},d=function(t){var r=t;["touchend","click"].forEach((function(t){u[r].addEventListener(t,(function(t){"true"!==u[r].getAttribute("id")?(u[r].style.color="#f85959",u[r].setAttribute("id","true"),e.danmu.hide(r)):(u[r].style.color="#aaa",u[r].setAttribute("id","false"),e.danmu.show(r))}))}))};for(var c in u)d(c);var h=l.querySelector(".hkplayer-transparency-line"),f=l.querySelector(".hkplayer-transparency-gradient"),p=50;if(f.style.background="linear-gradient(to right, #f85959 0%, #f85959 "+p+"%, #aaa "+p+"%, #aaa)",h.addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation(),p=e.target.value,f.style.background="linear-gradient(to right, #f85959 0%, #f85959 "+p+"%, #aaa "+p+"%, #aaa)",o.comments.forEach((function(e){e.style.opacity=p/100}))})),l.querySelector(".hkplayer-showarea-line").addEventListener("input",(function(t){t.preventDefault(),t.stopPropagation();var r=t.target.value;e.danmu.config.area.end=r/100,e.config.danmu.area.end=r/100,e.danmu.bulletBtn.main.channel.resize()})),l.querySelector(".hkplayer-danmuspeed-line").addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation();var t=e.target.value;o.comments.forEach((function(e){e.duration=100*(200-t)}))})),l.querySelector(".hkplayer-danmufont-line").addEventListener("input",(function(e){e.preventDefault(),e.stopPropagation();var t=e.target.value;o.comments.forEach((function(e){e.style.fontSize=t+"px"}))})),navigator.userAgent.indexOf("Firefox")>-1)for(var g=0;g<r.querySelectorAll("input").length;g++)r.querySelectorAll("input")[g].style.marginTop="10px"}}))}}))},"./src/ui/controls/definition.js":
/*!***************************************!*\
      !*** ./src/ui/controls/definition.js ***!
      \***************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_definition",(function(){var e=this,t=e.root,r=a.default.util,n=a.default.sniffer,i=void 0,o=r.createDom("hk-definition","",{tabindex:3},"hkplayer-definition");function s(){var n=e.definitionList,a=["<ul>"],i=e.config.url,s=document.createElement("a");e.switchURL?["mp4","hls","__flv__","dash"].every((function(t){return!e[t]||(e[t].url&&(s.href=e[t].url),"__flv__"===t&&(e[t]._options?s.href=e[t]._options.url:s.href=e[t]._mediaDataSource.url),i=s.href,!1)})):i=e.currentSrc||e.src,e.hls&&(s.href=e.hls.url,i=s.href),n.forEach((function(t){s.href=t.url,e.dash?a.push("<li url='"+t.url+"' cname='"+t.name+"' class='"+(t.selected?"selected":"")+"'>"+t.name+"</li>"):a.push("<li url='"+t.url+"' cname='"+t.name+"' class='"+(s.href===i?"selected":"")+"'>"+t.name+"</li>")}));var l=n.filter((function(t){return s.href=t.url,e.dash?!0===t.selected:s.href===i}));a.push("</ul><p class='name'>"+(l[0]||{name:""}).name+"</p>");var u=t.querySelector(".hkplayer-definition");if(u){u.innerHTML=a.join("");var d=u.querySelector(".name");e.config.definitionActive&&"hover"!==e.config.definitionActive||d.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),r.addClass(e.root,"hkplayer-definition-active"),u.focus()}))}else{o.innerHTML=a.join("");var c=o.querySelector(".name");e.config.definitionActive&&"hover"!==e.config.definitionActive||c.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),r.addClass(e.root,"hkplayer-definition-active"),o.focus()})),e.controls.appendChild(o)}}function l(n){e.definitionList=n,n&&n instanceof Array&&n.length>1&&(r.addClass(t,"hkplayer-is-definition"),e.on("canplay",s))}function u(){if(e.currentTime=e.curTime,!i){var t=e.play();void 0!==t&&t&&t.catch((function(e){}))}}function d(){r.removeClass(t,"hkplayer-definition-active")}"mobile"===n.device&&(e.config.definitionActive="click"),e.on("resourceReady",l),["touchend","click"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation();var a=e.definitionList,s=t.target||t.srcElement,l=document.createElement("a");if(s&&"li"===s.tagName.toLocaleLowerCase()){e.emit("beforeDefinitionChange",l.href);var d,c=void 0;if(Array.prototype.forEach.call(s.parentNode.childNodes,(function(e){r.hasClass(e,"selected")&&(c=e.getAttribute("cname"),r.removeClass(e,"selected"))})),e.dash&&a.forEach((function(e){e.selected=!1,e.name===s.innerHTML&&(e.selected=!0)})),r.addClass(s,"selected"),d=s.getAttribute("cname"),s.parentNode.nextSibling.innerHTML=""+s.getAttribute("cname"),l.href=s.getAttribute("url"),e.switchURL){var h=document.createElement("a");["mp4","hls","__flv__","dash"].every((function(t){return!e[t]||(e[t].url&&(h.href=e[t].url),"__flv__"===t&&(e[t]._options?h.href=e[t]._options.url:h.href=e[t]._mediaDataSource.url),!1)})),h.href===l.href||e.ended||e.switchURL(l.href)}else e.hls&&(document.createElement("a"),e.hls.url),l.href!==e.currentSrc&&(e.curTime=e.currentTime,i=e.paused,e.ended||(e.src=l.href,e.once("canplay",u)));e.emit("definitionChange",{from:c,to:d}),"mobile"===n.device&&r.removeClass(e.root,"hkplayer-definition-active")}else"click"!==e.config.definitionActive||!s||"p"!==s.tagName.toLocaleLowerCase()&&"em"!==s.tagName.toLocaleLowerCase()||("mobile"===n.device?r.toggleClass(e.root,"hkplayer-definition-active"):r.addClass(e.root,"hkplayer-definition-active"),o.focus());e.emit("focus")}),!1)})),o.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),r.removeClass(t,"hkplayer-definition-active")})),e.on("blur",d),e.once("destroy",(function t(){e.off("resourceReady",l),e.off("canplay",s),e.off("canplay",u),e.off("blur",d),e.off("destroy",t)}))}))},"./src/ui/controls/download.js":
/*!*************************************!*\
      !*** ./src/ui/controls/download.js ***!
      \*************************************/
/*! no static exports found */function(e,t,r){var n=i(r(/*! ../../player */"./src/player.js")),a=i(r(/*! ../assets/download.svg */"./src/ui/assets/download.svg"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_download",(function(){var e=this,t=n.default.util;if(e.config.download){var r=t.createDom("hk-download",'<hk-icon class="hkplayer-icon">'+a.default+"</hk-icon>",{},"hkplayer-download"),i=e.lang.DOWNLOAD_TIPS,o=t.createDom("hk-tips",'<span class="hkplayer-tip-download">'+i+"</span>",{},"hkplayer-tips");r.appendChild(o),e.once("ready",(function(){e.controls.appendChild(r)})),["click","touchend"].forEach((function(t){r.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("downloadBtnClick")}))}))}}))},"./src/ui/controls/enter.js":
/*!**********************************!*\
      !*** ./src/ui/controls/enter.js ***!
      \**********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_enter",(function(){for(var e=this.root,t=a.default.util,r=this.config,n='<div class="hkplayer-enter-spinner">',i=1;i<=12;i++)n+='<div class="enter-bar hkplayer-enter-bar'+i+'"></div>';n+="</div>";var o=r.enterLogo?'<div class="hkplayer-enter-logo">\n        <img class="hkplayer-enter-logo-img" src="'+r.enterLogo+'" alt="logo"/>\n    </div><div class="hkplayer-enter-tips"></div>':n,s=t.createDom("hk-enter",o,{},"hkplayer-enter");e.appendChild(s)}))},"./src/ui/controls/error.js":
/*!**********************************!*\
      !*** ./src/ui/controls/error.js ***!
      \**********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_error",(function(){var e=this,t=e.root,r=a.default.util,n=r.createDom("hk-error",'<span class="hkplayer-error-text">请<span class="hkplayer-error-refresh">刷新</span>试试</span>',{},"hkplayer-error");e.once("ready",(function(){t.appendChild(n)}));var i=n.querySelector(".hkplayer-error-text"),o=null;function s(){e.config.lang&&"zh-cn"===e.config.lang?i.innerHTML=e.config.errorTips||'出错了，请<span class="hkplayer-error-refresh">刷新</span>试试':i.innerHTML=e.config.errorTips||'please try to <span class="hkplayer-error-refresh">refresh</span>',r.addClass(e.root,"hkplayer-is-error"),(o=n.querySelector(".hkplayer-error-refresh"))&&["touchend","click"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.autoplay=!0,e.once("playing",(function(){r.removeClass(e.root,"hkplayer-is-error")})),window.location.reload()}))}))}e.on("error",s),e.once("destroy",(function t(){e.off("error",s),e.off("destroy",t)}))}))},"./src/ui/controls/flex.js":
/*!*********************************!*\
      !*** ./src/ui/controls/flex.js ***!
      \*********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_flex",(function(){this.root;var e=a.default.util.createDom("hk-placeholder","",{},"hkplayer-placeholder");this.controls.appendChild(e)}))},"./src/ui/controls/fullscreen.js":
/*!***************************************!*\
      !*** ./src/ui/controls/fullscreen.js ***!
      \***************************************/
/*! no static exports found */function(e,t,r){var n=o(r(/*! ../../player */"./src/player.js")),a=o(r(/*! ../assets/requestFull.svg */"./src/ui/assets/requestFull.svg")),i=o(r(/*! ../assets/exitFull.svg */"./src/ui/assets/exitFull.svg"));function o(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_fullscreen",(function(){var e=this,t=n.default.util,r=e.config.fullscreenBtn?e.config.fullscreenBtn:{},o=void 0;o="img"===r.type?t.createImgBtn("fullscreen",r.url.request,r.width,r.height):t.createDom("hk-fullscreen",'<hk-icon class="hkplayer-icon">\n                                             <div class="hkplayer-icon-requestfull">'+a.default+'</div>\n                                             <div class="hkplayer-icon-exitfull">'+i.default+"</div>\n                                           </hk-icon>",{},"hkplayer-fullscreen");var s={};s.requestfull=e.lang.FULLSCREEN_TIPS,s.exitfull=e.lang.EXITFULLSCREEN_TIPS;var l=t.createDom("hk-tips",'<span class="hkplayer-tip-requestfull">'+s.requestfull+'</span>\n                                        <span class="hkplayer-tip-exitfull">'+s.exitfull+"</span>",{},"hkplayer-tips");o.appendChild(l),e.once("ready",(function(){e.controls.appendChild(o)})),["click","touchend"].forEach((function(t){o.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("fullscreenBtnClick")}))}))}))},"./src/ui/controls/loading.js":
/*!************************************!*\
      !*** ./src/ui/controls/loading.js ***!
      \************************************/
/*! no static exports found */function(e,t,r){var n=i(r(/*! ../../player */"./src/player.js")),a=i(r(/*! ../assets/loading.svg */"./src/ui/assets/loading.svg"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_loading",(function(){var e=this.root,t=n.default.util.createDom("hk-loading",""+a.default,{},"hkplayer-loading");this.once("ready",(function(){e.appendChild(t)}))}))},"./src/ui/controls/localPreview.js":
/*!*****************************************!*\
      !*** ./src/ui/controls/localPreview.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_localPreview",(function(){var e=this,t=(e.root,a.default.util);if(e.config.preview&&e.config.preview.uploadEl){var r=t.createDom("hk-preview",'<input type="file">',{},"hkplayer-preview"),n=r.querySelector("input");e.config.preview.uploadEl.appendChild(r),n.onchange=function(){e.emit("upload",n)}}}))},"./src/ui/controls/memoryPlay.js":
/*!***************************************!*\
      !*** ./src/ui/controls/memoryPlay.js ***!
      \***************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_memoryPlay",(function(){var e=this,t=a.default.util,r=e.config.lastPlayTime||0,n=e.config.lastPlayTimeHideDelay||3,i=null;if(!(r<=0)){(i=t.createDom("hk-memoryplay",'<div class="hkplayer-memoryplay-spot"><div class="hkplayer-progress-tip">您上次观看到 <span class="hkplayer-lasttime">'+t.format(r)+'</span> ，为您自动续播 <span class="btn-close"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg></span></div></div>',{},"hkplayer-memoryplay")).addEventListener("mouseover",(function(e){e.stopPropagation()}));var o=function(){i&&i.parentNode.removeChild(i),i=null};i.querySelector(".hkplayer-progress-tip .btn-close").addEventListener("click",o),e.once("play",(function(){e.root.appendChild(i),e.emit("memoryPlayStart",r),n>0&&setTimeout((function(){o()}),1e3*n)})),e.once("ended",o)}}))},"./src/ui/controls/pip.js":
/*!********************************!*\
      !*** ./src/ui/controls/pip.js ***!
      \********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_pip",(function(){var e=this,t=a.default.util;if(e.config.pip){var r=e.lang.PIP,n=t.createDom("hk-pip",'<p class="name"><span>'+r+"</span></p>",{tabindex:9},"hkplayer-pip");e.once("ready",(function(){e.controls.appendChild(n)})),["click","touchend"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("pipBtnClick")}))}))}}))},"./src/ui/controls/play.js":
/*!*********************************!*\
      !*** ./src/ui/controls/play.js ***!
      \*********************************/
/*! no static exports found */function(e,t,r){var n=s(r(/*! ../../player */"./src/player.js")),a=s(r(/*! ../assets/play.svg */"./src/ui/assets/play.svg")),i=s(r(/*! ../assets/pause.svg */"./src/ui/assets/pause.svg")),o=s(r(/*! ../assets/replaysmall.svg */"./src/ui/assets/replaysmall.svg"));function s(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_play",(function(){var e=this,t=n.default.util,r=e.config.playBtn?e.config.playBtn:{},s=void 0;if("img"===r.type)s=t.createImgBtn("play",r.url.play,r.width,r.height);else{var l=e.config.ignores.indexOf("replay")>-1?'<div class="hkplayer-icon-replay">'+o.default+"</div>":"";s=t.createDom("hk-play",'<hk-icon class="hkplayer-icon">\n            <div class="hkplayer-icon-play">'+a.default+'</div>\n            <div class="hkplayer-icon-pause">'+i.default+"</div>\n            "+l+"\n        </hk-icon>",{},"hkplayer-play")}var u={};u.play=e.lang.PLAY_TIPS,u.pause=e.lang.PAUSE_TIPS,u.replay=e.lang.REPLAY;var d=e.config.ignores.indexOf("replay")>-1?'<span class="hkplayer-tip-replay">'+u.replay+"</span>":"",c=t.createDom("hk-tips",'<span class="hkplayer-tip-play">'+u.play+'</span>\n        <span class="hkplayer-tip-pause">'+u.pause+"</span>\n        "+d+"\n        ",{},"hkplayer-tips");s.appendChild(c),e.once("ready",(function(){e.controls.appendChild(s)})),["click","touchend"].forEach((function(t){s.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("playBtnClick")}))}))}))},"./src/ui/controls/playNext.js":
/*!*************************************!*\
      !*** ./src/ui/controls/playNext.js ***!
      \*************************************/
/*! no static exports found */function(e,t,r){var n=i(r(/*! ../../player */"./src/player.js")),a=i(r(/*! ../assets/playNext.svg */"./src/ui/assets/playNext.svg"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_playNext",(function(){var e=this,t=n.default.util,r=e.config.playNext;if(r&&r.urlList){var i=t.createDom("hk-playnext",'<hk-icon class="hkplayer-icon">'+a.default+"</hk-icon>",{},"hkplayer-playnext"),o=e.lang.PLAYNEXT_TIPS,s=t.createDom("hk-tips",'<span class="hkplayer-tip-playnext">'+o+"</span>",{},"hkplayer-tips");i.appendChild(s),e.once("ready",(function(){e.controls.appendChild(i)})),["click","touchend"].forEach((function(t){i.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),n.default.util.addClass(e.root,"hkplayer-is-enter"),e.emit("playNextBtnClick")}))}));var l=function(){n.default.util.addClass(e.root,"hkplayer-playnext-inactive")};e.on("urlListEnd",l),e.once("destroy",(function t(){e.off("urlListEnd",l),e.off("destroy",t)}))}}))},"./src/ui/controls/playbackRate.js":
/*!*****************************************!*\
      !*** ./src/ui/controls/playbackRate.js ***!
      \*****************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_playbackRate",(function(){var e=this,t=a.default.util,r=0,n=[];if(!e.config.playbackRate)return!1;e.config.playbackRate.sort((function(e,t){return e-t})),e.config.playbackRate.forEach((function(t,a){e.config.defaultPlaybackRate&&e.config.defaultPlaybackRate===t?(r=a,e.once("playing",(function(){e.video.playbackRate=t}))):1!==t&&"1"!==t||(r=a),n.push(""+t)}));var i=e.config.lang&&"zh-cn"===e.config.lang?"倍速":"Speed",o='<ul class="hkplayer-playback-list">';n.forEach((function(e,t){o+="<li class="+(1===e||"1"===e?"selected":"")+">"+e+"x</li>"})),o+="</ul>";var s=t.createDom("hk-playback",o+"<p class='name'><span>"+i+"</span></p>",{},"hkplayer-playback");e.controls.appendChild(s),s.addEventListener("click",(function(a){a.preventDefault(),a.stopPropagation();var i=a.target||a.srcElement;if(i&&"li"===i.tagName.toLocaleLowerCase()){for(var o=i.parentNode,l=0;l<o.children.length;l++)t.removeClass(o.children[l],"selected"),i===o.children[l]&&(r=l);t.addClass(i,"selected"),s.querySelector("p").innerHTML="<span>"+n[r]+"x</span>",e.video.playbackRate=1*n[r]}}),!1),s.querySelector(".name").addEventListener("mouseenter",(function(e){e.preventDefault(),e.stopPropagation(),t.addClass(s,"hkplayer-playback-active")})),s.addEventListener("mouseleave",(function(e){e.preventDefault(),e.stopPropagation(),t.removeClass(s,"hkplayer-playback-active")})),e.on("play",(function(){var t=parseFloat(n[r]);e.video.playbackRate.toFixed(1)!==t.toFixed(1)&&(e.video.playbackRate=t)}))}))},"./src/ui/controls/poster.js":
/*!***********************************!*\
      !*** ./src/ui/controls/poster.js ***!
      \***********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_poster",(function(){var e=this.root,t=a.default.util;if(this.config.poster){var r=t.createDom("hk-poster","",{},"hkplayer-poster");r.style.backgroundImage="url("+this.config.poster+")",e.appendChild(r)}}))},"./src/ui/controls/progress.js":
/*!*************************************!*\
      !*** ./src/ui/controls/progress.js ***!
      \*************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n},i=function(e){return a.default.util.hasClass(e.root,"hkplayer-rotate-fullscreen")};a.default.install("s_progress",(function(){var e=this,t=a.default.util,r=e.config.diyDuration,n=t.createDom("hk-progress",'<hk-outerinner class="hkplayer-progress-inner">\n            <hk-outer class="hkplayer-progress-outer '+(r?"diyduration":"")+'">\n                <hk-cache class="hkplayer-progress-cache"></hk-cache>\n                <hk-played class="hkplayer-progress-played">\n                    <hk-progress-btn class="hkplayer-progress-btn"></hk-progress-btn>\n                    <hk-point class="hkplayer-progress-point hkplayer-tips"></hk-point>\n                    <hk-thumbnail class="hkplayer-progress-thumbnail hkplayer-tips"></hk-thumbnail>\n                </hk-played>\n            </hk-outer>\n        </hk-progress-inner>',{tabindex:1},"hkplayer-progress"),o=void 0;e.controls.appendChild(n);var s=n.querySelector(".hkplayer-progress-played"),l=(n.querySelector(".hkplayer-progress-btn"),n.querySelector(".hkplayer-progress-outer")),u=n.querySelector(".hkplayer-progress-cache"),d=n.querySelector(".hkplayer-progress-point"),c=n.querySelector(".hkplayer-progress-thumbnail");function h(r,a){r.addEventListener("mouseenter",(function(e){a&&(t.addClass(r,"hkplayer-progress-dot-show"),t.addClass(n,"hkplayer-progress-dot-active"))})),r.addEventListener("mouseleave",(function(e){a&&(t.removeClass(r,"hkplayer-progress-dot-show"),t.removeClass(n,"hkplayer-progress-dot-active"))})),r.addEventListener("touchend",(function(i){i.stopPropagation(),a&&(t.hasClass(r,"hkplayer-progress-dot-show")||Object.keys(e.dotArr).forEach((function(r){e.dotArr[r]&&t.removeClass(e.dotArr[r],"hkplayer-progress-dot-show")})),t.toggleClass(r,"hkplayer-progress-dot-show"),t.toggleClass(n,"hkplayer-progress-dot-active"))}))}function f(){r&&e.duration<r&&(l.style.width=e.duration/r*100+"%"),e.config.progressDot&&"Array"===t.typeOf(e.config.progressDot)&&e.config.progressDot.forEach((function(r){if(r.time>=0&&r.time<=e.duration){var n=t.createDom("hk-progress-dot",r.text?'<span class="hkplayer-progress-tip">'+r.text+"</span>":"",{},"hkplayer-progress-dot");n.style.left=r.time/e.duration*100+"%",r.duration>=0&&(n.style.width=Math.min(r.duration,e.duration-r.time)/e.duration*100+"%"),l.appendChild(n),e.dotArr[r.time]=n,h(n,r.text)}}))}e.dotArr={},e.once("canplay",f),e.addProgressDot=function(r,n,a){if(!e.dotArr[r]&&r>=0&&r<=e.duration){var i=t.createDom("hk-progress-dot","",{},"hkplayer-progress-dot");i.style.left=r/e.duration*100+"%",a>=0&&(i.style.width=Math.min(a,e.duration-r)/e.duration*100+"%"),l.appendChild(i),e.dotArr[r]=i,h(i,n)}},e.removeProgressDot=function(t){if(t>=0&&t<=e.duration&&e.dotArr[t]){var r=e.dotArr[t];r.parentNode.removeChild(r),r=null,e.dotArr[t]=null}},e.removeAllProgressDot=function(){Object.keys(e.dotArr).forEach((function(t){if(e.dotArr[t]){var r=e.dotArr[t];r.parentNode.removeChild(r),r=null,e.dotArr[t]=null}}))};var p=0,g=0,y=0,m=0,v=0,k=0,b=[];e.config.thumbnail&&(p=e.config.thumbnail.pic_num,g=e.config.thumbnail.width,y=e.config.thumbnail.height,m=e.config.thumbnail.col,v=e.config.thumbnail.row,b=e.config.thumbnail.urls,c.style.width=g+"px",c.style.height=y+"px"),"function"==typeof e.config.disableSwipeHandler&&"function"==typeof e.config.enableSwipeHandler&&(e.root.addEventListener("touchmove",(function(t){t.preventDefault(),e.disableSwipe||(e.disableSwipe=!0,e.config.disableSwipeHandler.call(e))})),e.root.addEventListener("touchstart",(function(t){e.disableSwipe=!0,e.config.disableSwipeHandler.call(e)})),e.root.addEventListener("touchend",(function(t){e.disableSwipe=!1,e.config.enableSwipeHandler.call(e)}))),["touchstart","mousedown"].forEach((function(r){l.addEventListener(r,(function(r){if(!e.config.disableProgress){if(r.stopPropagation(),t.event(r),r._target===d||!e.config.allowSeekAfterEnded&&e.ended)return!0;l.focus();var n=l.getBoundingClientRect().left,a=i(e);a?(n=s.getBoundingClientRect().top,o=l.getBoundingClientRect().height):(o=l.getBoundingClientRect().width,n=s.getBoundingClientRect().left);var u=function(r){r.stopPropagation(),t.event(r),e.isProgressMoving=!0;var i=(a?r.clientY:r.clientX)-n;i>o&&(i=o);var l=i/o*e.duration;if(s.style.width=100*i/o+"%","video"!==e.videoConfig.mediaType||e.dash||e.config.closeMoveSeek){var u=t.findDom(e.controls,".hkplayer-time");u&&(u.innerHTML='<span class="hkplayer-time-current">'+t.format(l||0)+"</span><span>"+t.format(e.duration)+"</span>")}else e.currentTime=Number(l).toFixed(1);e.emit("focus")},c=function r(i){if(i.stopPropagation(),t.event(i),window.removeEventListener("mousemove",u),window.removeEventListener("touchmove",u,{passive:!1}),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),l.blur(),!e.isProgressMoving||"audio"===e.videoConfig.mediaType||e.dash||e.config.closeMoveSeek){var d=(a?i.clientY:i.clientX)-n;d>o&&(d=o);var c=d/o*e.duration;s.style.width=100*d/o+"%",e.currentTime=Number(c).toFixed(1)}e.emit("focus"),e.isProgressMoving=!1};return window.addEventListener("mousemove",u),window.addEventListener("touchmove",u,{passive:!1}),window.addEventListener("mouseup",c),window.addEventListener("touchend",c),!0}}))})),n.addEventListener("mouseenter",(function(a){if(!e.config.allowSeekAfterEnded&&e.ended)return!0;var o=i(e),s=o?n.getBoundingClientRect().top:n.getBoundingClientRect().left,l=o?n.getBoundingClientRect().height:n.getBoundingClientRect().width,u=r&&r>e.duration?r:e.duration,h=function(r){var a=((o?r.clientY:r.clientX)-s)/l*u;a=a<0?0:a,d.textContent=t.format(a);var i=d.getBoundingClientRect().width;if(e.config.thumbnail){k=u/p;var h=Math.floor(a/k);c.style.backgroundImage="url("+b[Math.ceil((h+1)/(m*v))-1]+")";var f=h+1-m*v*(Math.ceil((h+1)/(m*v))-1),w=Math.ceil(f/v)-1,E=f-w*v-1;c.style["background-position"]="-"+E*g+"px -"+w*y+"px";var T=(o?r.clientY:r.clientX)-s-g/2;T=(T=T>0?T:0)<l-g?T:l-g,c.style.left=T+"px",c.style.top=-10-y+"px",c.style.display="block",d.style.left=T+g/2-i/2+"px"}else{var _=r.clientX-s-i/2;_=(_=_>0?_:0)>l-i?l-i:_,d.style.left=_+"px"}t.hasClass(n,"hkplayer-progress-dot-active")?d.style.display="none":d.style.display="block"},f=function(e){h(e)};n.addEventListener("mousemove",f,!1),n.addEventListener("mouseleave",(function e(t){n.removeEventListener("mousemove",f,!1),n.removeEventListener("mouseleave",e,!1),h(t),d.style.display="none",c.style.display="none"}),!1),h(a)}),!1);var w=function(){if(!o&&n&&(o=n.getBoundingClientRect().width),"audio"!==e.videoConfig.mediaType||!e.isProgressMoving||!e.dash){var t=e.currentTime/e.duration,r=Number.parseFloat(s.style.width||"0")/Number.parseFloat(n.style.width||"100");Math.abs(t-r)<=1&&(s.style.width=100*e.currentTime/e.duration+"%")}};e.on("timeupdate",w);var E=function(){s.style.width=100*e.currentTime/e.duration+"%"};e.on("currentTimeChange",E);var T=function(){s.style.width="0%"};e.on("srcChange",T);var _=function(){var t=e.buffered;if(t&&t.length>0){for(var r=t.end(t.length-1),n=0,a=t.length;n<a;n++)if(e.currentTime>=t.start(n)&&e.currentTime<=t.end(n)){r=t.end(n);for(var i=n+1;i<t.length;i++)if(t.start(i)-t.end(i-1)>=2){r=t.end(i-1);break}break}u.style.width=r/e.duration*100+"%"}},x=["bufferedChange","cacheupdate","ended","timeupdate"];x.forEach((function(t){e.on(t,_)})),e.once("destroy",(function t(){e.removeAllProgressDot(),e.off("canplay",f),e.off("timeupdate",w),e.off("currentTimeChange",E),e.off("srcChange",T),x.forEach((function(t){e.off(t,_)})),e.off("destroy",t)}))}))},"./src/ui/controls/reload.js":
/*!***********************************!*\
      !*** ./src/ui/controls/reload.js ***!
      \***********************************/
/*! no static exports found */function(e,t,r){var n=i(r(/*! ../../player */"./src/player.js")),a=i(r(/*! ../assets/reload.svg */"./src/ui/assets/reload.svg"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_reload",(function(){var e=this,t=n.default.util;if(e.config.reload){var r=t.createDom("hk-reload",'<hk-icon class="hkplayer-icon">'+a.default+"</hk-icon>",{},"hkplayer-reload"),i=e.lang.RELOAD_TIPS,o=t.createDom("hk-tips",'<span class="hkplayer-tip-reload">'+i+"</span>",{},"hkplayer-tips");r.appendChild(o),e.once("ready",(function(){e.controls.appendChild(r)})),["click","touchend"].forEach((function(t){r.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("reloadBtnClick")}))}))}}))},"./src/ui/controls/replay.js":
/*!***********************************!*\
      !*** ./src/ui/controls/replay.js ***!
      \***********************************/
/*! no static exports found */function(e,t,r){var n=i(r(/*! ../../player */"./src/player.js")),a=i(r(/*! ../assets/replay.svg */"./src/ui/assets/replay.svg"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_replay",(function(){var e=this,t=n.default.util,r=e.root,i=e.lang.REPLAY,o=t.createDom("hk-replay",a.default+'\n        <hk-replay-txt class="hkplayer-replay-txt">'+i+"</hk-replay-txt>\n        ",{},"hkplayer-replay");function s(){var e=o.querySelector("path");if(e){var t=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof t&&t.indexOf("none")>-1)return;e.setAttribute("transform",t)}}e.once("ready",(function(){r.appendChild(o)})),e.on("ended",s);var l=o.querySelector("svg");["click","touchend"].forEach((function(t){l.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("replayBtnClick")}))})),e.once("destroy",(function t(){e.off("ended",s),e.off("destroy",t)}))}))},"./src/ui/controls/rotate.js":
/*!***********************************!*\
      !*** ./src/ui/controls/rotate.js ***!
      \***********************************/
/*! no static exports found */function(e,t,r){var n=i(r(/*! ../../player */"./src/player.js")),a=i(r(/*! ../assets/rotate.svg */"./src/ui/assets/rotate.svg"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_rotate",(function(){var e=this,t=n.default.util;if(e.config.rotate){var r=t.createDom("hk-rotate",'<hk-icon class="hkplayer-icon">'+a.default+"</hk-icon>",{},"hkplayer-rotate"),i=e.lang.ROTATE_TIPS,o=t.createDom("hk-tips",'<span class="hkplayer-tip-rotate">'+i+"</span>",{},"hkplayer-tips");r.appendChild(o),e.once("ready",(function(){e.controls.appendChild(r)})),["click","touchend"].forEach((function(t){r.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("rotateBtnClick")}))}))}}))},"./src/ui/controls/screenShot.js":
/*!***************************************!*\
      !*** ./src/ui/controls/screenShot.js ***!
      \***************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_screenShot",(function(){var e=this,t=a.default.util;if(e.config.screenShot){var r=e.lang.SCREENSHOT,n=t.createDom("hk-screenshot",'<p class="name"><span>'+r+"</span></p>",{tabindex:11},"hkplayer-screenshot");e.once("ready",(function(){e.controls.appendChild(n)})),["click","touchend"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("screenShotBtnClick")}))}))}}))},"./src/ui/controls/start.js":
/*!**********************************!*\
      !*** ./src/ui/controls/start.js ***!
      \**********************************/
/*! no static exports found */function(e,t,r){var n=o(r(/*! ../../player */"./src/player.js")),a=o(r(/*! ../assets/startPlay.svg */"./src/ui/assets/startPlay.svg")),i=o(r(/*! ../assets/startPause.svg */"./src/ui/assets/startPause.svg"));function o(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_start",(function(){var e=this,t=e.root,r=n.default.util,o=r.createDom("hk-start",'<div class="hkplayer-icon-play">'+a.default+'</div>\n        <div class="hkplayer-icon-pause">'+i.default+"</div>",{},"hkplayer-start");function s(e){r.addClass(e.root,"hkplayer-skin-default"),e.config&&(e.config.autoplay&&!r.isWeiXin()&&r.addClass(e.root,"hkplayer-is-enter"),e.config.lang&&"en"===e.config.lang?r.addClass(e.root,"lang-is-en"):"jp"===e.config.lang&&r.addClass(e.root,"lang-is-jp"),e.config.enableContextmenu||e.video.addEventListener("contextmenu",(function(e){e.preventDefault(),e.stopPropagation()})))}e.isReady?(t.appendChild(o),s(e)):e.once("ready",(function(){t.appendChild(o),s(e)})),e.on("play",(function(){r.addClass(o,"hkplayer-start-interact")})),e.on("pause",(function(){r.addClass(o,"hkplayer-start-interact")})),o.addEventListener("animationend",(function(){r.removeClass(o,"hkplayer-start-interact")})),e.once("autoplay was prevented",(function(){r.removeClass(e.root,"hkplayer-is-enter"),r.addClass(e.root,"hkplayer-nostart")})),e.once("canplay",(function(){r.removeClass(e.root,"hkplayer-is-enter")})),o.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.emit("startBtnClick")}}))},"./src/ui/controls/textTrack.js":
/*!**************************************!*\
      !*** ./src/ui/controls/textTrack.js ***!
      \**************************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_textTrack",(function(){var e=this,t=e.root,r=a.default.util,n=(a.default.sniffer,e.controls,r.createDom("hk-texttrack","",{tabindex:7},"hkplayer-texttrack")),i=e.config.textTrack;i&&Array.isArray(i)&&i.length>0&&(r.addClass(e.root,"hkplayer-is-texttrack"),e.once("canplay",(function(){var a=this,o=["<ul>"];o.push("<li class='"+(this.textTrackShowDefault?"":"selected")+"'}'>"+e.lang.OFF+"</li>"),i.forEach((function(e){o.push("<li class='"+(e.default&&a.textTrackShowDefault?"selected":"")+"'>"+e.label+"</li>")}));var s=e.lang.TEXTTRACK;o.push('</ul><p class="name">'+s+"</p>");var l=t.querySelector(".hkplayer-texttrack");if(l){l.innerHTML=o.join("");var u=l.querySelector(".name");e.config.textTrackActive&&"hover"!==e.config.textTrackActive||u.addEventListener("mouseenter",(function(e){e.preventDefault(),e.stopPropagation(),r.addClass(t,"hkplayer-texttrack-active"),l.focus()}))}else{n.innerHTML=o.join("");var d=n.querySelector(".name");e.config.textTrackActive&&"hover"!==e.config.textTrackActive||d.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),r.addClass(e.root,"hkplayer-texttrack-active"),n.focus()})),e.controls.appendChild(n)}}))),["touchend","click"].forEach((function(t){n.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation();var a=t.target||t.srcElement;if(a&&"li"===a.tagName.toLocaleLowerCase()){Array.prototype.forEach.call(a.parentNode.childNodes,(function(e){r.removeClass(e,"selected")})),r.addClass(a,"selected");var o=e.root.getElementsByTagName("Track");a.innerHTML===e.lang.OFF?(o[0].track.mode="hidden",o[0].src="",r.removeClass(e.root,"hkplayer-texttrack-active")):(o[0].style.display="block",r.addClass(e.root,"hkplayer-texttrack-active"),o[0].track.mode="showing",i.some((function(e){if(e.label===a.innerHTML)return o[0].src=e.src,e.kind&&(o[0].kind=e.kind),o[0].label=e.label,e.srclang&&(o[0].srclang=e.srclang),!0})),e.emit("textTrackChange",a.innerHTML))}else"click"!==e.config.textTrackActive||!a||"p"!==a.tagName.toLocaleLowerCase()&&"em"!==a.tagName.toLocaleLowerCase()||(r.addClass(e.root,"hkplayer-texttrack-active"),n.focus())}),!1)})),e.on("play",(function(){var n=t.querySelector(".hkplayer-texttrack ul"),a=t.getElementsByTagName("Track");e.hls&&n&&a&&(a[0].src="",Array.prototype.forEach.call(n.childNodes,(function(t){r.hasClass(t,"selected")&&(t.innerHTML===e.lang.OFF?(a[0].track.mode="hidden",a[0].src=""):(a[0].track.mode="hidden",i.some((function(e){if(e.label!==t.innerHTML)return a[0].src=e.src,e.kind&&(a[0].kind=e.kind),a[0].label=e.label,e.srclang&&(a[0].srclang=e.srclang),!0})),i.some((function(e){if(e.label===t.innerHTML)return setTimeout((function(){a[0].src=e.src,e.kind&&(a[0].kind=e.kind),a[0].label=e.label,e.srclang&&(a[0].srclang=e.srclang),a[0].track.mode="showing"})),!0}))))})),r.removeClass(e.root,"hkplayer-texttrack-active"))})),n.addEventListener("mouseleave",(function(t){t.preventDefault(),t.stopPropagation(),r.removeClass(e.root,"hkplayer-texttrack-active")}))}))},"./src/ui/controls/time.js":
/*!*********************************!*\
      !*** ./src/ui/controls/time.js ***!
      \*********************************/
/*! no static exports found */function(e,t,r){var n,a=(n=r(/*! ../../player */"./src/player.js"))&&n.__esModule?n:{default:n};a.default.install("s_time",(function(){var e=this,t=(e.root,a.default.util),r=e.config.diyDuration,n=t.createDom("hk-time",'<span class="hkplayer-time-current">'+(e.currentTime||t.format(0))+"</span>\n        <span>"+t.format(r&&r>e.duration?r:e.duration)+"</span>",{},"hkplayer-time");e.once("ready",(function(){e.controls.appendChild(n)}));var i=function(){"audio"===e.videoConfig.mediaType&&e.isProgressMoving&&e.dash||(n.innerHTML='<span class="hkplayer-time-current">'+t.format(e.currentTime||0)+"</span>\n            <span>"+t.format(r&&r>e.duration?r:e.duration)+"</span>")};e.on("durationchange",i),e.on("timeupdate",i),e.once("destroy",(function t(){e.off("durationchange",i),e.off("timeupdate",i),e.off("destroy",t)}))}))},"./src/ui/controls/volume.js":
/*!***********************************!*\
      !*** ./src/ui/controls/volume.js ***!
      \***********************************/
/*! no static exports found */function(e,t,r){var n=s(r(/*! ../../player */"./src/player.js")),a=s(r(/*! ../assets/volumeMuted.svg */"./src/ui/assets/volumeMuted.svg")),i=s(r(/*! ../assets/volumeSmall.svg */"./src/ui/assets/volumeSmall.svg")),o=s(r(/*! ../assets/volumeLarge.svg */"./src/ui/assets/volumeLarge.svg"));function s(e){return e&&e.__esModule?e:{default:e}}n.default.install("s_volume",(function(){var e=this,t=n.default.util.createDom("hk-volume",'<hk-icon class="hkplayer-icon">\n            <div class="hkplayer-icon-large">'+o.default+'</div>\n            <div class="hkplayer-icon-small">'+i.default+'</div>\n            <div class="hkplayer-icon-muted">'+a.default+'</div>\n        </hk-icon>\n        <hk-slider class="hkplayer-slider" tabindex="2">\n            <hk-volume-val class="hkplayer-volume-val"></hk-volume-val>\n            <hk-bar class="hkplayer-bar">\n                <hk-drag class="hkplayer-drag"></hk-drag>\n            </hk-bar>\n        </hk-slider>',{},"hkplayer-volume");e.once("ready",(function(){e.controls.appendChild(t)}));var r=t.querySelector(".hkplayer-slider"),s=t.querySelector(".hkplayer-bar"),l=t.querySelector(".hkplayer-drag"),u=t.querySelector(".hkplayer-icon"),d=t.querySelector(".hkplayer-volume-val");l.style.height=100*e.config.volume+"%",d.innerText=40,r.volume=e.config.volume,s.addEventListener("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeBarClick",t)})),["click","touchend"].forEach((function(t){u.addEventListener(t,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconClick")}))})),u.addEventListener("mouseenter",(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconEnter")})),["blur","mouseleave"].forEach((function(r){t.addEventListener(r,(function(t){t.preventDefault(),t.stopPropagation(),e.emit("volumeIconLeave")}))}))}))},"./src/ui/index.js":
/*!*************************!*\
      !*** ./src/ui/index.js ***!
      \*************************/
/*! no static exports found */function(e,t,r){r(/*! ./style/index.scss */"./src/ui/style/index.scss"),r(/*! ./controls/enter.js */"./src/ui/controls/enter.js"),r(/*! ./controls/play.js */"./src/ui/controls/play.js"),r(/*! ./controls/start.js */"./src/ui/controls/start.js"),r(/*! ./controls/poster.js */"./src/ui/controls/poster.js"),r(/*! ./controls/flex.js */"./src/ui/controls/flex.js"),r(/*! ./controls/fullscreen.js */"./src/ui/controls/fullscreen.js"),r(/*! ./controls/cssFullscreen.js */"./src/ui/controls/cssFullscreen.js"),r(/*! ./controls/volume.js */"./src/ui/controls/volume.js"),r(/*! ./controls/definition.js */"./src/ui/controls/definition.js"),r(/*! ./controls/loading.js */"./src/ui/controls/loading.js"),r(/*! ./controls/progress.js */"./src/ui/controls/progress.js"),r(/*! ./controls/time.js */"./src/ui/controls/time.js"),r(/*! ./controls/replay.js */"./src/ui/controls/replay.js"),r(/*! ./controls/playbackRate.js */"./src/ui/controls/playbackRate.js"),r(/*! ./controls/localPreview.js */"./src/ui/controls/localPreview.js"),r(/*! ./controls/download.js */"./src/ui/controls/download.js"),r(/*! ./controls/danmu.js */"./src/ui/controls/danmu.js"),r(/*! ./controls/pip.js */"./src/ui/controls/pip.js"),r(/*! ./controls/playNext.js */"./src/ui/controls/playNext.js"),r(/*! ./controls/rotate.js */"./src/ui/controls/rotate.js"),r(/*! ./controls/reload.js */"./src/ui/controls/reload.js"),r(/*! ./controls/screenShot.js */"./src/ui/controls/screenShot.js"),r(/*! ./controls/textTrack.js */"./src/ui/controls/textTrack.js"),r(/*! ./controls/error.js */"./src/ui/controls/error.js"),r(/*! ./controls/memoryPlay.js */"./src/ui/controls/memoryPlay.js")},"./src/ui/style/index.scss":
/*!*********************************!*\
      !*** ./src/ui/style/index.scss ***!
      \*********************************/
/*! no static exports found */function(e,t,r){var n=r(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),a=r(/*! !../../../node_modules/css-loader/dist/cjs.js??ref--5-1!../../../node_modules/postcss-loader/lib!../../../node_modules/sass-loader/dist/cjs.js!./index.scss */"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/dist/cjs.js!./src/ui/style/index.scss");"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]),n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},"./src/utils/database.js":
/*!*******************************!*\
      !*** ./src/utils/database.js ***!
      \*******************************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"hkplayer",version:1,db:null,ojstore:{name:"hk-m4a",keypath:"vid"}};a(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return n(e,[{key:"openDB",value:function(e){var t=this,r=this,n=this.myDB.version||1,a=r.indexedDB.open(r.myDB.name,n);a.onerror=function(e){},a.onsuccess=function(n){t.myDB.db=n.target.result,e.call(r)},a.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(r.myDB.ojstore.name)||t.createObjectStore(r.myDB.ojstore.name,{keyPath:r.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var r=this.myDB.db.transaction(e,"readwrite").objectStore(e),n=void 0,a=0;a<t.length;a++)(n=r.add(t[a])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var r=this.myDB.db.transaction(e,"readwrite").objectStore(e),n=void 0,a=0;a<t.length;a++)(n=r.put(t[a])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,r){var n=this,a=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);a.onerror=function(){r.call(n,null)},a.onsuccess=function(e){var t=e.target.result;r.call(n,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}();t.default=i,e.exports=t.default},"./src/utils/sniffer.js":
/*!******************************!*\
      !*** ./src/utils/sniffer.js ***!
      \******************************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n={get device(){return n.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(r){return t[r].test(e)})))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),r=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),a=/(?:Firefox)/.test(e),i=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||a&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!i;return{isTablet:i,isPhone:o,isAndroid:n,isPc:!o&&!n&&!r,isSymbian:r,isWindowsPhone:t,isFireFox:a}}};t.default=n,e.exports=t.default},"./src/utils/url.js":
/*!**************************!*\
      !*** ./src/utils/url.js ***!
      \**************************/
/*! no static exports found */function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}},"./src/utils/util.js":
/*!***************************!*\
      !*** ./src/utils/util.js ***!
      \***************************/
/*! no static exports found */function srcUtilsUtilJs(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var util={createDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=document.createElement(e);return a.className=n,a.innerHTML=t,Object.keys(r).forEach((function(t){var n=t,i=r[t];"video"===e||"audio"===e?i&&a.setAttribute(n,i):a.setAttribute(n,i)})),a},hasClass:function(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,(function(e){return e===t})):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))},addClass:function(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):util.hasClass(e,t)||(e.className+=" "+t))},removeClass:function(e,t){e&&(e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):util.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")})))},toggleClass:function(e,t){e&&t.split(/\s+/g).forEach((function(t){util.hasClass(e,t)?util.removeClass(e,t):util.addClass(e,t)}))},findDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],r=void 0;try{r=e.querySelector(t)}catch(n){0===t.indexOf("#")&&(r=e.getElementById(t.slice(1)))}return r},padStart:function(e,t,r){for(var n=String(r),a=t>>0,i=Math.ceil(a/n.length),o=[],s=String(e);i--;)o.push(n);return o.join("").substring(0,a-s.length)+s},format:function(e){if(window.isNaN(e))return"";var t=util.padStart(Math.floor(e/3600),2,0),r=util.padStart(Math.floor((e-3600*t)/60),2,0),n=util.padStart(Math.floor(e-3600*t-60*r),2,0);return("00"===t?[r,n]:[t,r,n]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(e,t){if("Object"===util.typeOf(t)&&"Object"===util.typeOf(e))return Object.keys(t).forEach((function(r){"Object"!==util.typeOf(t[r])||t[r]instanceof Node?"Array"===util.typeOf(t[r])?e[r]="Array"===util.typeOf(e[r])?e[r].concat(t[r]):t[r]:e[r]=t[r]:e[r]?util.deepCopy(e[r],t[r]):e[r]=t[r]})),e},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var r=document.createElement("a");return r.href=t.replace(/url\("|"\)/g,""),r.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e){function t(t,r,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,r,n){e._interval[t]||(e._interval[t]=setInterval(r.bind(e),n))})),clearInterval:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){clearInterval(e._interval[t]),e._interval[t]=null})),createImgBtn:function(e,t,r,n){var a=util.createDom("hk-"+e,"",{},"hkplayer-"+e+"-img");if(a.style.backgroundImage='url("'+t+'")',r&&n){var i=void 0,o=void 0,s=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(r.indexOf(e)>-1&&n.indexOf(e)>-1&&(i=parseFloat(r.slice(0,r.indexOf(e)).trim()),o=parseFloat(n.slice(0,n.indexOf(e)).trim()),s=e,1))})),a.style.width=""+i+s,a.style.height=""+o+s,a.style.backgroundSize=""+i+s+" "+o+s,a.style.margin="start"===e?"-"+o/2+s+" auto auto -"+i/2+s:"auto 5px auto 5px"}return a},Hex2RGBA:function Hex2RGBA(hex,alpha){var rgb=[];if(/^\#[0-9A-F]{3}$/i.test(hex)){var sixHex="#";hex.replace(/[0-9A-F]/gi,(function(e){sixHex+=e+e})),hex=sixHex}return/^#[0-9A-F]{6}$/i.test(hex)?(hex.replace(/[0-9A-F]{2}/gi,(function(kw){rgb.push(eval("0x"+kw))})),"rgba("+rgb.join(",")+", "+alpha+")"):"rgba(255, 255, 255, 0.1)"},isWeiXin:function(){return window.navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1},computeWatchDur:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],r=0;r<e.length;r++)if(!(!e[r].end||e[r].begin<0||e[r].end<0||e[r].end<e[r].begin))if(t.length<1)t.push({begin:e[r].begin,end:e[r].end});else for(var n=0;n<t.length;n++){var a=e[r].begin,i=e[r].end;if(i<t[n].begin){t.splice(n,0,{begin:a,end:i});break}if(!(a>t[n].end)){var o=t[n].begin,s=t[n].end;t[n].begin=Math.min(a,o),t[n].end=Math.max(i,s);break}if(n>t.length-2){t.push({begin:a,end:i});break}}for(var l=0,u=0;u<t.length;u++)l+=t[u].end-t[u].begin;return l},downloadFile:function(e){var t=this;return new Promise((function(r,n){var a=new XMLHttpRequest;a.open("get",e),a.responseType="arraybuffer",a.onload=function(){var n=void 0,i=a.response;try{n=new Blob([i],{type:"application/x-mpegURL"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(n=new BlobBuilder).append(i),n=n.getBlob()}var o=URL.createObjectURL(n);t.cacheBuffer[e]={blobUrl:o,blob:n},t.options.backupUrls&&t.options.backupUrls.length&&!t.backup_download_success&&t.options.backupUrls.every((function(e){return t.cacheBuffer[e]&&!isPromise(t.cacheBuffer[e])}))&&(t.emit("backup_download_success"),t.backup_download_success=!0),r({blobUrl:o,blob:n})},a.onerror=function(n){delete t.cacheBuffer[e],r(e)},a.onprogress=function(r){-1==t.cacheBuffer[e]&&a&&(a.abort(),delete t.cacheBuffer[e])},a.send()}))}};exports.default=util,module.exports=exports.default},0:
/*!****************************!*\
      !*** multi ./src/index.js ***!
      \****************************/
/*! no static exports found */function(e,t,r){e.exports=r(/*! ./src/index.js */"./src/index.js")}})},"object"==_typeof(exports)&&"object"==_typeof(module)?module.exports=t():(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=t)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(this,__webpack_require__(3)(module))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n;"undefined"!=typeof window&&(n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,a="~";function i(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,i),l=a?a+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,i,o){var s=a?a+e:e;if(!this._events[s])return!1;var l,u,d=this._events[s],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,n),!0;case 5:return d.fn.call(d.context,t,r,n,i),!0;case 6:return d.fn.call(d.context,t,r,n,i,o),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];d.fn.apply(d.context,l)}else{var h,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),c){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,n);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];d[u].fn.apply(d[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var i=a?a+e:e;if(!this._events[i])return this;if(!t)return l(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||l(this,i);else{for(var s=0,u=[],d=o.length;s<d;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:l(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=a,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n,a,i,o,s;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,a=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=s.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var i=s.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=a.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(u.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var d=o.path,c=d.substring(0,d.lastIndexOf("/")+1)+i.path;u.path=s.normalizePath(c)}else u.path=o.path,i.params||(u.params=o.params,i.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(e,t,n){var i={};i[n]=[];var o=t.toString(),s=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return i;for(var l,u=s[1],d=new RegExp("(\\\\n|\\W)"+a(u)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=d.exec(o);)"dll-reference"!==l[3]&&i[n].push(l[3]);for(d=new RegExp("\\("+a(u)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=d.exec(o);)e[l[2]]||(i[n].push(l[1]),e[l[2]]=r(l[1]).m),i[l[2]]=i[l[2]]||[],i[l[2]].push(l[4]);for(var c,h=Object.keys(i),f=0;f<h.length;f++)for(var p=0;p<i[h[f]].length;p++)c=i[h[f]][p],isNaN(1*c)||(i[h[f]][p]=1*i[h[f]][p]);return i}function o(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}e.exports=function(e,t){t=t||{};var a={main:r.m},s=t.all?{main:Object.keys(a.main)}:function(e,t){for(var r={main:[t]},n={main:[]},a={main:{}};o(r);)for(var s=Object.keys(r),l=0;l<s.length;l++){var u=s[l],d=r[u].pop();if(a[u]=a[u]||{},!a[u][d]&&e[u][d]){a[u][d]=!0,n[u]=n[u]||[],n[u].push(d);for(var c=i(e,e[u][d],u),h=Object.keys(c),f=0;f<h.length;f++)r[h[f]]=r[h[f]]||[],r[h[f]]=r[h[f]].concat(c[h[f]])}}return n}(a,e),l="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+a[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+a.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([l],{type:"text/javascript"});if(t.bare)return u;var d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),c=new window.Worker(d);return c.objectURL=d,c}},"./src/crypt/decrypter.js":
/*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),a=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],a=r[1],i=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],d=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,e[f]=y,t[y]=f;var m=h[f],v=h[m],k=h[v],b=257*h[y]^16843008*y;n[f]=b<<24|b>>>8,a[f]=b<<16|b>>>16,i[f]=b<<8|b>>>24,o[f]=b,b=16843009*k^65537*v^257*m^16843008*f,l[y]=b<<24|b>>>8,u[y]=b<<16|b>>>16,d[y]=b<<8|b>>>24,c[y]=b,f?(f=m^h[h[h[k^m]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var i,o,s,l,u=this.ksRows=4*(a+6+1),d=this.keySchedule=new Uint32Array(u),c=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],y=p[1],m=p[2],v=p[3];for(i=0;i<u;i++)i<a?s=d[i]=t[i]:(l=s,i%a==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=f[i/a|0]<<24):a>6&&i%a==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),d[i]=s=(d[i-a]^l)>>>0);for(o=0;o<u;o++)i=u-o,l=3&o?d[i]:d[i-4],c[o]=o<4||i<=4?l:g[h[l>>>24]]^y[h[l>>>16&255]]^m[h[l>>>8&255]]^v[h[255&l]],c[o]=c[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,n){for(var a,i,o,s,l,u,d,c,h,f,p,g,y,m,v,k,b,w=this.keySize+6,E=this.invKeySchedule,T=this.invSBox,_=this.invSubMix,x=_[0],S=_[1],C=_[2],A=_[3],R=this.uint8ArrayToUint32Array_(r),D=R[0],L=R[1],O=R[2],P=R[3],I=new Int32Array(e),M=new Int32Array(I.length),F=this.networkToHostOrderSwap;t<I.length;){for(h=F(I[t]),f=F(I[t+1]),p=F(I[t+2]),g=F(I[t+3]),l=h^E[0],u=g^E[1],d=p^E[2],c=f^E[3],y=4,m=1;m<w;m++)a=x[l>>>24]^S[u>>16&255]^C[d>>8&255]^A[255&c]^E[y],i=x[u>>>24]^S[d>>16&255]^C[c>>8&255]^A[255&l]^E[y+1],o=x[d>>>24]^S[c>>16&255]^C[l>>8&255]^A[255&u]^E[y+2],s=x[c>>>24]^S[l>>16&255]^C[u>>8&255]^A[255&d]^E[y+3],l=a,u=i,d=o,c=s,y+=4;a=T[l>>>24]<<24^T[u>>16&255]<<16^T[d>>8&255]<<8^T[255&c]^E[y],i=T[u>>>24]<<24^T[d>>16&255]<<16^T[c>>8&255]<<8^T[255&l]^E[y+1],o=T[d>>>24]<<24^T[c>>16&255]<<16^T[l>>8&255]<<8^T[255&u]^E[y+2],s=T[c>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&d]^E[y+3],y+=3,M[t]=F(a^D),M[t+1]=F(s^L),M[t+2]=F(o^O),M[t+3]=F(i^P),D=h,L=f,O=p,P=g,t+=4}return n?(v=M.buffer,k=v.byteLength,(b=k&&new DataView(v).getUint8(k-1))?v.slice(0,k-b):v):M.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=r("./src/errors.ts"),s=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js"),d=Object(u.getSelfScope)(),c=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,a=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var i=d.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new i),u.expandKey(t),o(u.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var d=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a(d,t)),this.fastAesKey.expandKey().then((function(a){new n(d,r).decrypt(e,a).catch((function(n){l.onWebCryptoError(n,e,t,r,o)})).then((function(e){o(e)}))})).catch((function(n){l.onWebCryptoError(n,e,t,r,o)}))}},t.onWebCryptoError=function(e,t,r,n,a){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,a)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/demux/demuxer-inline.js":
/*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){"use strict";r.r(t);var n=r("./src/events.js"),a=r("./src/errors.ts"),i=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number.js"),s=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(e,t){return 255===e[t]&&240==(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function h(e,t){return!!(t+1<e.length&&u(e,t))}function f(e,t){if(h(e,t)){var r=d(e,t);if(t+r>=e.length)return!1;var n=c(e,t);if(n<=r)return!1;var a=t+n;if(a===e.length||a+1<e.length&&u(e,a))return!0}return!1}function p(e,t,r,i,o){if(!e.samplerate){var l=function(e,t,r,i){var o,l,u,d,c,h=navigator.userAgent.toLowerCase(),f=i,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>p.length-1))return d=(1&t[r+2])<<2,d|=(192&t[r+3])>>>6,s.logger.log("manifest codec:"+i+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+d),/firefox/i.test(h)?l>=6?(o=5,c=new Array(4),u=l-3):(o=2,c=new Array(2),u=l):-1!==h.indexOf("android")?(o=2,c=new Array(2),u=l):(o=5,c=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&l>=6?u=l-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(l>=6&&1===d||/vivaldi/i.test(h))||!i&&1===d)&&(o=2,c=new Array(2)),u=l)),c[0]=o<<3,c[0]|=(14&l)>>1,c[1]|=(1&l)<<7,c[1]|=d<<3,5===o&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:p[l],channelCount:d,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,r,i,o);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(e){return 9216e4/e}function y(e,t,r,n,a){var i=function(e,t,r,n,a){var i,o,s=e.length;if(i=d(e,t),o=c(e,t),(o-=i)>0&&t+i+o<=s)return{headerLength:i,frameLength:o,stamp:r+n*a}}(t,r,n,a,g(e.samplerate));if(i){var o=i.stamp,s=i.headerLength,l=i.frameLength,u={unit:t.subarray(r+s,r+s+l),pts:o,dts:o};return e.samples.push(u),{sample:u,length:l+s}}}var m=r("./src/demux/id3.js"),v=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(f(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,n){for(var a=this._audioTrack,i=m.default.getID3Data(e,0)||[],l=m.default.getTimeStamp(i),u=Object(o.isFiniteNumber)(l)?90*l:9e4*t,d=0,c=u,f=e.length,g=i.length,v=[{pts:c,dts:c,data:i}];g<f-1;)if(h(e,g)&&g+5<f){p(a,this.observer,e,g,a.manifestCodec);var k=y(a,e,g,u,d);if(!k){s.logger.log("Unable to parse AAC frame");break}g+=k.length,c=k.sample.pts,d++}else m.default.isHeader(e,g)?(i=m.default.getID3Data(e,g),v.push({pts:c,dts:c,data:i}),g+=i.length):g++;this.remuxer.remux(a,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),k=r("./src/demux/mp4demuxer.js"),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,a){if(!(r+24>t.length)){var i=this.parseHeader(t,r);if(i&&r+i.frameLength<=t.length){var o=n+a*(9e4*i.samplesPerFrame/i.sampleRate),s={unit:t.subarray(r,r+i.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=i.channelCount,e.samplerate=i.sampleRate,e.samples.push(s),{sample:s,length:i.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,a=e[t+2]>>4&15,i=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==i){var s=3===r?3-n:3===n?3:4,l=1e3*b.BitratesMap[14*s+a-1],u=3===r?0:2===r?1:2,d=b.SamplingRateMap[3*u+i],c=e[t+3]>>6==3?1:2,h=b.SamplesCoefficients[r][n],f=b.BytesInSlot[n],p=8*h*f;return{sampleRate:d,channelCount:c,frameLength:parseInt(h*l/d+o,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var a=t+n;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},w=b,E=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");n.set(e.subarray(r,r+a)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},t.readSPS=function(){var e,t,r,n,a,i,o,s=0,l=0,u=0,d=0,c=this.readUByte.bind(this),h=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),m=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);if(c(),e=c(),h(5),g(3),c(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var k=f();if(3===k&&g(1),m(),m(),g(1),p())for(i=3!==k?8:12,o=0;o<i;o++)p()&&v(o<6?16:64)}m();var b=f();if(0===b)f();else if(1===b)for(g(1),y(),y(),t=f(),o=0;o<t;o++)y();m(),g(1),r=f(),n=f(),0===(a=h(1))&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),d=f());var w=[1,1];if(p()&&p())switch(c()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-a)*(n+1)*16-(a?2:4)*(u+d),pixelRatio:w}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),T=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new i.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var a=e[t].unit,i=a.subarray(16,a.length-a.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),s=this;this.decryptBuffer(o,(function(i){i=new Uint8Array(i),a.set(i,16),n||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,a=32;a<=e.length-16;a+=160,n+=16)r.set(e.subarray(a,a+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,a,i){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){a.data=l.getAvcDecryptedUnit(o,s),i||l.decryptAvcSamples(e,t,r+1,n)}))},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var a=e[t].units;!(r>=a.length);r++){var i=a[r];if(!(i.length<=48||1!==i.type&&5!==i.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,i,o),!o)return}}}},e}(),_={video:1,audio:2,id3:3,text:4},x=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new T(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:_[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,n,a){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack("video",a),this._audioTrack=e.createTrack("audio",a),this._id3Track=e.createTrack("id3",a),this._txtTrack=e.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=a},t.resetTimeStamp=function(){},t.append=function(t,r,i,o){var l,u,d,c,h,f=t.length,p=!1;this.pmtUnknownTypes={},this.contiguous=i;var g=this.pmtParsed,y=this._avcTrack,m=this._audioTrack,v=this._id3Track,k=y.pid,b=m.pid,w=v.pid,E=this._pmtId,T=y.pesData,_=m.pesData,x=v.pesData,S=this._parsePAT,C=this._parsePMT.bind(this),A=this._parsePES,R=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),L=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),P=e._syncOffset(t);for(f-=(f+P)%188,l=P;l<f;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),d=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((c=l+5+t[l+4])===l+188)continue}else c=l+4;switch(d){case k:u&&(T&&(h=A(T))&&R(h,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(c,l+188)),T.size+=l+188-c);break;case b:u&&(_&&(h=A(_))&&(m.isAAC?D(h):L(h)),_={data:[],size:0}),_&&(_.data.push(t.subarray(c,l+188)),_.size+=l+188-c);break;case w:u&&(x&&(h=A(x))&&O(h),x={data:[],size:0}),x&&(x.data.push(t.subarray(c,l+188)),x.size+=l+188-c);break;case 0:u&&(c+=t[c]+1),E=this._pmtId=S(t,c);break;case E:u&&(c+=t[c]+1);var I=C(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(k=I.avc)>0&&(y.pid=k),(b=I.audio)>0&&(m.pid=b,m.isAAC=I.isAAC),(w=I.id3)>0&&(v.pid=w),p&&!g&&(s.logger.log("reparse from beginning"),p=!1,l=P-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(h=A(T))?(R(h,!0),y.pesData=null):y.pesData=T,_&&(h=A(_))?(m.isAAC?D(h):L(h),m.pesData=null):(_&&_.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=_),x&&(h=A(x))?(O(h),v.pesData=null):v.pesData=x,null==this.sampleAes?this.remuxer.remux(m,y,v,this._txtTrack,r,i,o):this.decryptAndRemux(m,y,v,this._txtTrack,r,i,o)},t.decryptAndRemux=function(e,t,r,n,a,i,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,a,i,o)}))}else this.decryptAndRemuxAvc(e,t,r,n,a,i,o)},t.decryptAndRemuxAvc=function(e,t,r,n,a,i,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,a,i,o)}))}else this.remuxer.remux(e,t,r,n,a,i,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,r){var n=this.pmtUnknownTypes[e]||0;return 0===n&&(this.pmtUnknownTypes[e]=0,t.call(s.logger,r)),this.pmtUnknownTypes[e]++,n},t._parsePMT=function(e,t,r,n){var a,i,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){this._trackUnknownPmt(e[t],s.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===o.audio&&(o.audio=i);break;case 21:-1===o.id3&&(o.id3=i);break;case 219:if(!n){this._trackUnknownPmt(e[t],s.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===o.avc&&(o.avc=i);break;case 3:case 4:r?-1===o.audio&&(o.audio=i,o.isAAC=!1):this._trackUnknownPmt(e[t],s.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(e[t],s.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(e[t],s.logger.log,"Unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},t._parsePES=function(e){var t,r,n,a,i,o,l,u,d=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(1===((t=c[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;if(192&(r=t[7])&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?o-(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l):l=o),u=(a=t[8])+9,e.size<=u)return null;e.size-=u,i=new Uint8Array(e.size);for(var f=0,p=c.length;f<p;f++){var g=(t=c[f]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}i.set(t,d),d+=g}return n&&(n-=a+3),{data:i,pts:o,dts:l,len:n}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;if(isNaN(e.pts)){if(!n)return void t.dropped++;var a=r[n-1];e.pts=a.pts,e.dts=a.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,n,a,i=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,d=this.pushAccesUnit.bind(this),c=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&s.length&&!o.audFound&&(d(l,o),l=this.avcSample=c(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,l||(l=i.avcSample=c(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var h=new E(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=i.avcSample=c(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(r=new E(i.discardEPB(t.data))).readUByte();for(var f=0,p=0,g=!1,y=0;!g&&r.bytesAvailable>1;){f=0;do{f+=y=r.readUByte()}while(255===y);p=0;do{p+=y=r.readUByte()}while(255===y);if(4===f&&0!==r.bytesAvailable){if(g=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var v=r.readUByte(),k=31&v,b=[v,r.readUByte()];for(a=0;a<k;a++)b.push(r.readUByte()),b.push(r.readUByte()),b.push(r.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(5===f&&0!==r.bytesAvailable){if(g=!0,p>16){var w=[];for(a=0;a<16;a++)w.push(r.readUByte().toString(16)),3!==a&&5!==a&&7!==a&&9!==a||w.push("-");var T=p-16,_=new Uint8Array(T);for(a=0;a<T;a++)_[a]=r.readUByte();i._insertSampleInOrder(i._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:w.join(""),userDataBytes:_,userData:Object(m.utf8ArrayToStr)(_.buffer)})}}else if(p<r.bytesAvailable)for(a=0;a<p;a++)r.readUByte()}break;case 7:if(n=!0,u=!0,!o.sps){var x=(r=new E(t.data)).readSPS();o.width=x.width,o.height=x.height,o.pixelRatio=x.pixelRatio,o.sps=[t.data],o.duration=i._duration;var S=t.data.subarray(1,4),C="avc1.";for(a=0;a<3;a++){var A=S[a].toString(16);A.length<2&&(A="0"+A),C+=A}o.codec=C}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,l&&d(l,o),l=i.avcSample=c(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&n&&l.units.push(t)})),t&&l&&(d(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,a,i=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,d=[],c=-1;for(-1===l&&(c=0,a=31&e[0],l=0,i=1);i<o;)if(t=e[i++],l)if(1!==l)if(t)if(1===t){if(c>=0)n={data:e.subarray(c,i-l-1),type:a},d.push(n);else{var h=this._getLastNalUnit();if(h&&(u&&i<=4-u&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-u)),(r=i-l-1)>0)){var f=new Uint8Array(h.data.byteLength+r);f.set(h.data,0),f.set(e.subarray(0,r),h.data.byteLength),h.data=f}}i<o?(c=i,a=31&e[i],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(c>=0&&l>=0&&(n={data:e.subarray(c,o),type:a,state:l},d.push(n)),0===d.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return s.naluState=l,d},t.discardEPB=function(e){for(var t,r,n=e.byteLength,a=[],i=1;i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(a.push(i+2),i+=2):i++;if(0===a.length)return e;t=n-a.length,r=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===a[0]&&(o++,a.shift()),r[i]=e[o];return r},t._parseAACPES=function(e){var t,r,i,o,l,u,d,c=this._audioTrack,f=e.data,m=e.pts,v=this.aacOverFlow,k=this.aacLastPTS;if(v){var b=new Uint8Array(v.byteLength+f.byteLength);b.set(v,0),b.set(f,v.byteLength),f=b}for(i=0,l=f.length;i<l-1&&!h(f,i);i++);if(!i||(i<l-1?(u="AAC PES did not start with ADTS header,offset:"+i,d=!1):(u="no ADTS header found in AAC PES",d=!0),s.logger.warn("parsing error:"+u),this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:d,reason:u}),!d)){if(p(c,this.observer,f,i,this.audioCodec),r=0,t=g(c.samplerate),v&&k){var w=k+t;Math.abs(w-m)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((w-m)/90)),m=w)}for(;i<l;){if(h(f,i)){if(i+5<l){var E=y(c,f,i,m,r);if(E){i+=E.length,o=E.sample.pts,r++;continue}}break}i++}v=i<l?f.subarray(i,l):null,this.aacOverFlow=v,this.aacLastPTS=o}},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,a=0,i=e.pts;a<r;)if(w.isHeader(t,a)){var o=w.appendFrame(this._audioTrack,t,a,i,n);if(!o)break;a+=o.length,n++}else a++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),S=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=m.default.getID3Data(e,0);if(n&&void 0!==m.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(w.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,n){for(var a=m.default.getID3Data(e,0)||[],i=m.default.getTimeStamp(a),o=void 0!==i?90*i:9e4*t,s=a.length,l=e.length,u=0,d=0,c=this._audioTrack,h=[{pts:o,dts:o,data:a}];s<l;)if(w.isHeader(e,s)){var f=w.appendFrame(c,e,s,o,u);if(!f)break;s+=f.length,d=f.sample.pts,u++}else m.default.isHeader(e,s)?(a=m.default.getID3Data(e,s),h.push({pts:d,dts:d,data:a}),s+=a.length):s++;this.remuxer.remux(c,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),C=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),A=Math.pow(2,32)-1,R=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,a=r.length,i=a;a--;)n+=r[a].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),a=0,n=8;a<i;a++)t.set(r[a],n),n+=r[a].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(A+1)),a=Math.floor(r%(A+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(A+1)),a=Math.floor(r%(A+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)},e.sdtp=function(t){var r,n,a=t.samples||[],i=new Uint8Array(4+a.length);for(n=0;n<a.length;n++)r=a[n].flags,i[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,i)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,a,i=[],o=[];for(r=0;r<t.sps.length;r++)a=(n=t.sps[r]).byteLength,i.push(a>>>8&255),i.push(255&a),i=i.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)a=(n=t.pps[r]).byteLength,o.push(a>>>8&255),o.push(255&a),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,d=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,a=t.width,i=t.height,o=Math.floor(n/(A+1)),s=Math.floor(n%(A+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,i>>8&255,255&i,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),a=t.id,i=Math.floor(r/(A+1)),o=Math.floor(r%(A+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,a,i,o,s,l,u=t.samples||[],d=u.length,c=12+16*d,h=new Uint8Array(c);for(r+=8+c,h.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<d;n++)i=(a=u[n]).duration,o=a.size,s=a.flags,l=a.cts,h.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();function D(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var a=e*t*r;return n?Math.round(a):a}function L(e,t){return void 0===t&&(t=!1),D(e,1e3,1/9e4,t)}function O(e,t){return void 0===t&&(t=1),D(e,9e4,1/t)}var P=O(10),I=O(.2),M=null;function F(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}var N,j=function(){function e(e,t,r,n){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===M){var a=navigator.userAgent.match(/Chrome\/(\d+)/i);M=a?parseInt(a[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var n=r.pts-e;return n<-4294967296?(t=!0,e):n>0?e:r.pts}),e[0].pts);return t&&s.logger.debug("PTS rollover detected"),r},t.remux=function(e,t,r,a,i,o,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var u=e.samples.length,d=t.samples.length,c=i,h=i;if(u&&d){var f=this.getVideoStartPts(t.samples),p=(e.samples[0].pts-f)/t.inputTimeScale;c+=Math.max(0,p),h+=Math.max(0,-p)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var g,y=this.remuxAudio(e,c,o,l);d&&(y&&(g=y.endPTS-y.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,h,o,g))}else if(d){var m=this.remuxVideo(t,h,o,0,l);m&&e.codec&&this.remuxEmptyAudio(e,c,o,m)}}r.samples.length&&this.remuxID3(r,i),a.samples.length&&this.remuxText(a,i),this.observer.trigger(n.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var i,o,l=this.observer,u=e.samples,d=t.samples,c=this.typeSupported,h="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(i=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(c.mpeg?(h="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),f.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array:R.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(i=o=u[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&d.length){var y=t.inputTimeScale;if(t.timescale=y,f.video={container:"video/mp4",codec:t.codec,initSegment:R.initSegment([t]),metadata:{width:t.width,height:t.height}},g){var m=this.getVideoStartPts(d),v=Math.round(y*r);o=Math.min(o,d[0].dts-v),i=Math.min(i,m-v),this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:i})}}else g&&f.audio&&this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:i});Object.keys(f).length?(l.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=i,this._initDTS=o)):l.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,i){var o,l,u,d,c,h=e.timescale,f=e.samples,p=[],g=f.length,y=this._initPTS,m=8,v=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,b=0,w=!1,E=this.nextAvcDts;if(0!==g){r||(E=t*h-(f[0].pts-F(f[0].dts,f[0].pts)));for(var T=0;T<g;T++){var _=f[T];_.pts=F(_.pts-y,E),_.dts=F(_.dts-y,E),_.dts>_.pts&&(b=Math.max(Math.min(b,_.pts-_.dts),-1*I)),_.dts<f[T>0?T-1:T].dts&&(w=!0)}w&&f.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id})),d=f[0].dts,c=f[g-1].dts;var x=Math.round((c-d)/(g-1));if(b<0){if(b<-2*x){s.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+L(-x,!0)+" ms");for(var S=b,C=0;C<g;C++)f[C].dts=S=Math.max(S,f[C].pts-x),f[C].pts=Math.max(S,f[C].pts)}else{s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+L(b,!0)+" ms to overcome this issue");for(var A=0;A<g;A++)f[A].dts=f[A].dts+b}d=f[0].dts,c=f[g-1].dts}if(r){var D=d-E,O=D>x;if(O||D<-1){O?s.logger.warn("AVC: "+L(D,!0)+" ms ("+D+"dts) hole between fragments detected, filling it"):s.logger.warn("AVC: "+L(-D,!0)+" ms ("+D+"dts) overlapping between fragments detected"),d=E;var P=f[0].pts-D;f[0].dts=d,f[0].pts=P,s.logger.log("Video: First PTS/DTS adjusted: "+L(P,!0)+"/"+L(d,!0)+", delta: "+L(D,!0)+" ms")}}M&&M<75&&(d=Math.max(0,d));for(var N=0,j=0,B=0;B<g;B++){for(var U=f[B],z=U.units,H=z.length,G=0,q=0;q<H;q++)G+=z[q].data.length;j+=G,N+=H,U.length=G,U.dts=Math.max(U.dts,d),U.pts=Math.max(U.pts,U.dts,0),v=Math.min(U.pts,v),k=Math.max(U.pts,k)}c=f[g-1].dts;var K=j+4*N+8;try{l=new Uint8Array(K)}catch(e){return void this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:K,reason:"fail allocating video mdat "+K})}var V=new DataView(l.buffer);V.setUint32(0,K),l.set(R.types.mdat,4);for(var W=0;W<g;W++){for(var Y,X=f[W],Z=X.units,J=0,$=0,Q=Z.length;$<Q;$++){var ee=Z[$],te=ee.data,re=ee.data.byteLength;V.setUint32(m,re),m+=4,l.set(te,m),m+=re,J+=4+re}if(W<g-1)o=f[W+1].dts-X.dts;else{var ne=this.config,ae=X.dts-f[W>0?W-1:W].dts;if(ne.stretchShortVideoTrack){var ie=ne.maxBufferHole,oe=Math.floor(ie*h),se=(i?v+i*h:this.nextAudioPts)-X.pts;se>oe?((o=se-ae)<0&&(o=ae),s.logger.log("It is approximately "+L(se,!1)+" ms to the next segment; using duration "+L(o,!1)+" ms for the last video frame.")):o=ae}else o=ae}Y=Math.round(X.pts-X.dts),p.push({size:J,duration:o,cts:Y,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:X.key?2:1,isNonSync:X.key?0:1}})}this.nextAvcDts=c+o;var le=e.dropped;if(e.nbNalu=0,e.dropped=0,p.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ue=p[0].flags;ue.dependsOn=2,ue.isNonSync=0}e.samples=p,u=R.moof(e.sequenceNumber++,d,e),e.samples=[];var de={data1:u,data2:l,startPTS:v/h,endPTS:(k+o)/h,startDTS:d/h,endDTS:this.nextAvcDts/h,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:le};return this.observer.trigger(n.default.FRAG_PARSING_DATA,de),de}},t.remuxAudio=function(e,t,r,i){var o,l,u,d,c,h,f=e.inputTimeScale,p=e.timescale,g=f/p,y=(e.isAAC?1024:1152)*g,m=this._initPTS,v=!e.isAAC&&this.typeSupported.mpeg,k=v?0:8,b=e.samples,w=[],E=this.nextAudioPts;if(r|=b.length&&E&&(i&&Math.abs(t-E/f)<.1||Math.abs(b[0].pts-E-m)<20*y),b.forEach((function(e){e.pts=e.dts=F(e.pts-m,t*f)})),0!==(b=b.filter((function(e){return e.pts>=0}))).length){if(r||(E=i?Math.max(0,t*f):b[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,_=0,x=E;_<b.length;){var S=b[_],A=S.pts,D=A-x;if(D<=-T*y)r||_>0?(s.logger.warn("Dropping 1 audio frame @ "+L(x,!0)/1e3+"s due to "+L(D,!0)+" ms overlap."),b.splice(_,1)):(s.logger.warn("Audio frame @ "+L(A,!0)/1e3+"s overlaps nextAudioPts by "+L(D,!0)+" ms."),x=A+y,_++);else if(D>=T*y&&D<P&&x){var O=Math.round(D/y);s.logger.warn("Injecting "+O+" audio frames @ "+L(x,!0)/1e3+"s due to "+L(D,!0)+" ms gap.");for(var I=0;I<O;I++){var M=Math.max(x,0);(l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=S.unit.subarray()),b.splice(_,0,{unit:l,pts:M,dts:M}),x+=y,_++}S.pts=S.dts=x,x+=y,_++}else Math.abs(D),S.pts=S.dts=x,x+=y,_++}for(var N=b.length,j=0;N--;)j+=b[N].unit.byteLength;for(var B=0,U=b.length;B<U;B++){var z=b[B],H=z.unit,G=z.pts;if(void 0!==h&&o)o.duration=Math.round((G-h)/g);else{var q=G-E,K=0;if(r&&e.isAAC&&q){if(q>0&&q<P)K=Math.round((G-E)/y),s.logger.log(L(q,!0)+" ms hole between AAC samples detected,filling it"),K>0&&((l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=H.subarray()),j+=K*l.length);else if(q<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+L(E,!0)+" ms / "+L(G,!0)+" ms / "+L(-q,!0)+" ms"),j-=H.byteLength;continue}G=E}if(c=G,!(j>0))return;j+=k;try{u=new Uint8Array(j)}catch(e){return void this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}v||(new DataView(u.buffer).setUint32(0,j),u.set(R.types.mdat,4));for(var V=0;V<K;V++)(l=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=H.subarray()),u.set(l,k),k+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o)}u.set(H,k);var W=H.byteLength;k+=W,o={size:W,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o),h=G}var Y=0;if((N=w.length)>=2&&(Y=w[N-2].duration,o.duration=Y),N){this.nextAudioPts=E=h+g*Y,e.samples=w,d=v?new Uint8Array:R.moof(e.sequenceNumber++,c/g,e),e.samples=[];var X=c/f,Z=E/f,J={data1:d,data2:u,startPTS:X,endPTS:Z,startDTS:X,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(n.default.FRAG_PARSING_DATA,J),J}return null}},t.remuxEmptyAudio=function(e,t,r,n){var a=e.inputTimeScale,i=a/(e.samplerate?e.samplerate:a),o=this.nextAudioPts,l=(void 0!==o?o:n.startDTS*a)+this._initDTS,u=n.endDTS*a+this._initDTS,d=1024*i,c=Math.ceil((u-l)/d),h=C.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var f=[],p=0;p<c;p++){var g=l+p*d;f.push({unit:h,pts:g,dts:g})}e.samples=f,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,i=this._initPTS,o=this._initDTS,s=0;s<r;s++){var l=e.samples[s];l.pts=F(l.pts-i,t*a)/a,l.dts=F(l.dts-o,t*a)/a}this.observer.trigger(n.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var r=e.samples.length,a=e.inputTimeScale,i=this._initPTS;if(r){for(var o=0;o<r;o++){var s=e.samples[o];s.pts=F(s.pts-i,t*a)/a}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(n.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}(),B=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,a,i,o,s,l){var u=this.observer,d="";e&&(d+="audio"),t&&(d+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:i,startDTS:i,type:d,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)},e}(),U=Object(l.getSelfScope)();try{N=U.performance.now.bind(U.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),N=U.Date.now}var z=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,a,o,s,l,u,d,c,h,f){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new i.default(this.observer,this.config));var y=N();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var i=N();p.observer.trigger(n.default.FRAG_DECRYPTED,{stats:{tstart:y,tdecrypt:i}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,o,s,l,u,d,c,h,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,o,s,l,u,d,c,h,f)},t.pushDecrypted=function(e,t,r,i,o,s,l,u,d,c,h,f){var p=this.demuxer,g=this.remuxer;if(!p||l||u){for(var y,m=this.observer,b=this.typeSupported,w=this.config,E=[{demux:x,remux:j},{demux:k.default,remux:B},{demux:v,remux:j},{demux:S,remux:j}],T=0,_=E.length;T<_&&!(y=E[T]).demux.probe(e);T++);if(!y)return void m.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});g&&g instanceof y.remux||(g=new y.remux(m,w,b,this.vendor)),p&&p instanceof y.demux||(p=new y.demux(m,g,w,b),this.probe=y.demux.probe),this.demuxer=p,this.remuxer=g}(l||u)&&(p.resetInitSegment(r,i,o,c),g.resetInitSegment()),l&&(p.resetTimeStamp(f),g.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,d,h)},e}();t.default=z},"./src/demux/demuxer-worker.js":
/*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,r){"use strict";r.r(t);var n=r(/*! ../demux/demuxer-inline */"./src/demux/demuxer-inline.js"),a=r(/*! ../events */"./src/events.js"),i=r(/*! ../utils/logger */"./src/utils/logger.js"),o=r(/*! eventemitter3 */"./node_modules/eventemitter3/index.js");t.default=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(a){var o=a.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n.default(t,o.typeSupported,s,o.vendor),Object(i.enableLogs)(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(a.default.FRAG_DECRYPTED,r),t.on(a.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(a.default.FRAG_PARSED,r),t.on(a.default.ERROR,r),t.on(a.default.FRAG_PARSING_METADATA,r),t.on(a.default.FRAG_PARSING_USERDATA,r),t.on(a.default.INIT_PTS_FOUND,r),t.on(a.default.FRAG_PARSING_DATA,(function(t,r){var n=[],a={event:t,data:r};r.data1&&(a.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(a,n)}))}},"./src/demux/id3.js":
/*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
/*! exports provided: default, utf8ArrayToStr */function(e,t,r){"use strict";r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var n,a=r(/*! ../utils/get-self-scope */"./src/utils/get-self-scope.js"),i=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,a=0;e.isHeader(t,r);)a+=10,a+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(a+=10),r+=a;if(a>0)return t.subarray(n,n+a)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var a=r[n];if(e.isTimeStampFrame(a))return e._readTimeStamp(a)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var a=e._readSize(t,r+6),i=(r+=10)+a;r+8<i;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:a}}var i=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:i}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:a}}var i=e._utf8ArrayToStr(t.data);return{key:t.type,data:i}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var n=r.decode(e);if(t){var a=n.indexOf("\0");return-1!==a?n.substring(0,a):n}return n.replace(/\0/g,"")}for(var i,s,l,u=e.length,d="",c=0;c<u;){if(0===(i=e[c++])&&t)return d;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d+=String.fromCharCode(i);break;case 12:case 13:s=e[c++],d+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=e[c++],l=e[c++],d+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&l)<<0)}}return d},e}();function o(){var e=Object(a.getSelfScope)();return n||void 0===e.TextDecoder||(n=new e.TextDecoder("utf-8")),n}var s=i._utf8ArrayToStr;t.default=i},"./src/demux/mp4demuxer.js":
/*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n=r(/*! ../utils/logger */"./src/utils/logger.js"),a=r(/*! ../events */"./src/events.js"),i=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,i){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:i?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:i?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:i?t:null})),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,a,i,o,s,l,u=[];if(t.data?(s=t.start,i=t.end,t=t.data):(s=0,i=t.byteLength),!r.length)return null;for(n=s;n<i;)l=(a=e.readUint32(t,n))>1?n+a:i,e.bin2str(t.subarray(n+4,n+8))===r[0]&&(1===r.length?u.push({data:t,start:n+8,end:l}):(o=e.findBox({data:t,start:n+8,end:l},r.slice(1))).length&&(u=u.concat(o))),n=l;return u},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],a=n?n.end:null,i=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[];var s=(o=o[0]).data[0];i=0===s?8:16;var l=e.readUint32(o,i);i+=4,i+=0===s?8:16,i+=2;var u=o.end+0,d=e.readUint16(o,i);i+=2;for(var c=0;c<d;c++){var h=i,f=e.readUint32(o,h);h+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(o,h);h+=4,r.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,i=h+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:d,references:r,moovEndOffset:a}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var a=e.findBox(t,["tkhd"])[0];if(a){var i=a.data[a.start],o=0===i?12:20,s=e.readUint32(a,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){o=0===(i=l.data[l.start])?12:20;var u=e.readUint32(l,o),d=e.findBox(t,["mdia","hdlr"])[0];if(d){var c={soun:"audio",vide:"video"}[e.bin2str(d.data.subarray(d.start+8,d.start+12))];if(c){var h=e.findBox(t,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var f=e.bin2str(h.data.subarray(h.start+12,h.start+16));n.logger.log("MP4Demuxer:"+c+":"+f+" found")}r[s]={timescale:u,type:c},r[c]={timescale:u,id:s}}}}}})),r},e.getStartDTS=function(t,r){var n,a,i;return n=e.findBox(r,["moof","traf"]),a=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var a,i;return a=e.readUint32(n,4),i=t[a].timescale||9e4,e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0]/i}))}))),i=Math.min.apply(null,a),isFinite(i)?i:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(a){var o=e.readUint32(a,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],a=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,a-n*s);else{a*=Math.pow(2,32),a+=e.readUint32(t,8),a-=n*s,a=Math.max(a,0);var o=Math.floor(a/(i+1)),l=Math.floor(a%(i+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}}))}))}))},t.append=function(t,r,n,i){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,i,t)},t.destroy=function(){},e}();t.default=o},"./src/errors.ts":
/*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,r){"use strict";var n,a;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return a})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(n||(n={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(a||(a={}))},"./src/events.js":
/*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":
/*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
/*! exports provided: default */
/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return ir}));var n={};r.r(n),r.d(n,"newCue",(function(){return ft}));var a,i,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),l=r("./src/polyfills/number.js"),u=r("./src/events.js"),d=r("./src/utils/logger.js"),c={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},h=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(c[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){d.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(i||(i={}));var f=r("./src/demux/mp4demuxer.js");function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g,y=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,r,n;return t=e,(r=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&p(t.prototype,r),n&&p(t,n),e}();function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(g||(g={}));var v=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[g.AUDIO]=!1,e[g.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r,n,a=e.prototype;return a.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},a.addElementaryStream=function(e){this._elementaryStreams[e]=!0},a.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},a.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},a.setDecryptDataFromLevelKey=function(e,t){var r=e;return(null==e?void 0:e.method)&&e.uri&&!e.iv&&((r=new y(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},t=e,(r=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&d.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&m(t.prototype,r),n&&m(t,n),e}();function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,r,n;return t=e,(r=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&k(t.prototype,r),n&&k(t,n),e}(),w=/^(\d+)x(\d+)$/,E=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,T=function(){function e(t){for(var r in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=w.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(E.lastIndex=0;null!==(t=E.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),_={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function x(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var S=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,C=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),R=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,D=/\.(mp4|m4s|m4v|m4a)$/i,L=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,a=[],i={},o=!1;function s(e,t){["video","audio"].forEach((function(r){var n=e.filter((function(e){return function(e,t){var r=_[t];return!!r&&!0===r[e.slice(0,4)]}(e,r)}));if(n.length){var a=n.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[r+"Codec"]=a.length>0?a[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)}))}})),t.unknownCodecs=e}for(S.lastIndex=0;null!=(n=S.exec(t));)if(n[1]){var l={},u=l.attrs=new T(n[1]);l.url=e.resolve(n[2],r);var d=u.decimalResolution("RESOLUTION");d&&(l.width=d.width,l.height=d.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),a.push(l)}else if(n[3]){var c=new T(n[3]);c["DATA-ID"]&&(o=!0,i[c["DATA-ID"]]=c)}return{levels:a,sessionData:o?i:null}},e.parseMasterPlaylistMedia=function(t,r,n,a){var i;void 0===a&&(a=[]);var o=[],s=0;for(C.lastIndex=0;null!==(i=C.exec(t));){var l=new T(i[1]);if(l.TYPE===n){var u={attrs:l,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),a.length){var d=e.findGroup(a,u.groupId);u.audioCodec=d?d.codec:a[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,n,a){var i,o,s,u=0,c=0,h=new b(t),f=0,p=null,g=new v,m=null;for(A.lastIndex=0;null!==(i=A.exec(e));){var k=i[1];if(k){g.duration=parseFloat(k);var w=(" "+i[2]).slice(1);g.title=w||null,g.tagList.push(w?["INF",k,w]:["INF",k])}else if(i[3]){if(Object(l.isFiniteNumber)(g.duration)){var E=u++;g.type=n,g.start=c,s&&(g.levelkey=s),g.sn=E,g.level=r,g.cc=f,g.urlId=a,g.baseurl=t,g.relurl=(" "+i[3]).slice(1),O(g,p),h.fragments.push(g),p=g,c+=g.duration,g=new v}}else if(i[4]){var _=(" "+i[4]).slice(1);p?g.setByteRange(_,p):g.setByteRange(_)}else if(i[5])g.rawProgramDateTime=(" "+i[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(!(i=i[0].match(R))){d.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<i.length&&void 0===i[o];o++);var x=(" "+i[o+1]).slice(1),S=(" "+i[o+2]).slice(1);switch(i[o]){case"#":g.tagList.push(S?[x,S]:[x]);break;case"PLAYLIST-TYPE":h.type=x.toUpperCase();break;case"MEDIA-SEQUENCE":u=h.startSN=parseInt(x);break;case"TARGETDURATION":h.targetduration=parseFloat(x);break;case"VERSION":h.version=parseInt(x);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(x);break;case"KEY":var C=new T(x),L=C.enumeratedString("METHOD"),P=C.URI,I=C.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(C.KEYFORMAT||"identity")){d.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}L&&(s=new y(t,P),P&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(s.method=L,s.key=null,s.iv=I));break;case"START":var M=new T(x).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(M)&&(h.startTimeOffset=M);break;case"MAP":var F=new T(x);g.relurl=F.URI,F.BYTERANGE&&g.setByteRange(F.BYTERANGE),g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,(g=new v).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:d.logger.warn("line parsed but not handled: "+i)}}}return(g=p)&&!g.relurl&&(h.fragments.pop(),c-=g.duration),h.totalduration=c,h.averagetargetduration=c/h.fragments.length,h.endSN=u-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(e){return D.test(e.relurl)}))&&(d.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new v).relurl=h.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=n,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),m&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var a=e[n];a.programDateTime=r.programDateTime-1e3*a.duration,r=a}}(h.fragments,m),h},e}();function O(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null==t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var P=window.performance,I=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.canHaveQualityLevels=function(e){return e!==a.AUDIO_TRACK&&e!==a.SUBTITLE_TRACK},n.mapContextToLevelType=function(e){switch(e.type){case a.AUDIO_TRACK:return i.AUDIO;case a.SUBTITLE_TRACK:return i.SUBTITLE;default:return i.MAIN}},n.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var o=n.prototype;return o.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,a=new(r||n)(t);return e.loader=a,this.loaders[e.type]=a,a},o.getInternalLoader=function(e){return this.loaders[e.type]},o.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},o.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},o.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},o.onManifestLoading=function(e){this.load({url:e.url,type:a.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(e){this.load({url:e.url,type:a.LEVEL,level:e.level,id:e.id,responseType:"text"})},o.onAudioTrackLoading=function(e){this.load({url:e.url,type:a.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},o.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:a.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},o.load=function(e){var t=this.hls.config;d.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,n,i,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return d.logger.trace("playlist request ongoing"),!1;d.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case a.MANIFEST:r=t.manifestLoadingMaxRetry,n=t.manifestLoadingTimeOut,i=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case a.LEVEL:r=0,o=0,i=0,n=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,n=t.levelLoadingTimeOut,i=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var u={timeout:n,maxRetry:r,retryDelay:i,maxRetryDelay:o},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return d.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,c),!0},o.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var a=e.data;t.tload=P.now(),0===a.indexOf("#EXTM3U")?a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},o.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},o.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},o._handleMasterPlaylist=function(e,t,r,a){var i=this.hls,o=e.data,s=n.getResponseUrl(e,r),l=L.parseMasterPlaylist(o,s),c=l.levels,h=l.sessionData;if(c.length){var f=c.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=L.parseMasterPlaylistMedia(o,s,"AUDIO",f),g=L.parseMasterPlaylistMedia(o,s,"SUBTITLES"),y=L.parseMasterPlaylistMedia(o,s,"CLOSED-CAPTIONS");if(p.length){var m=!1;p.forEach((function(e){e.url||(m=!0)})),!1===m&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}i.trigger(u.default.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:g,captions:y,url:s,stats:t,networkDetails:a,sessionData:h})}else this._handleManifestParsingError(e,r,"no level found in manifest",a)},o._handleTrackOrLevelPlaylist=function(e,t,r,i){var o=this.hls,d=r.id,c=r.level,h=r.type,f=n.getResponseUrl(e,r),p=Object(l.isFiniteNumber)(d)?d:0,g=Object(l.isFiniteNumber)(c)?c:p,y=n.mapContextToLevelType(r),m=L.parseLevelPlaylist(e.data,f,g,y,p);if(m.tload=t.tload,m.fragments.length){if(h===a.MANIFEST){var v={url:f,details:m};o.trigger(u.default.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:f,stats:t,networkDetails:i,sessionData:null})}if(t.tparsed=P.now(),m.needSidxRanges){var k=m.initSegment.url;this.load({url:k,isSidxRequest:!0,type:h,level:c,levelDetails:m,id:d,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=m,this._handlePlaylistLoaded(e,t,r,i)}else o.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:f,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},o._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=f.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,a=t.levelDetails;n.forEach((function(e,t){var r=e.info;if(a){var n=a.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),a&&a.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},o._handleNetworkError=function(e,t,r,n){var i,o;void 0===r&&(r=!1),void 0===n&&(n=null),d.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case a.MANIFEST:i=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case a.LEVEL:i=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case a.AUDIO_TRACK:i=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var c={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};n&&(c.response=n),this.hls.trigger(u.default.ERROR,c)},o._handlePlaylistLoaded=function(e,t,r,i){var o=r.type,s=r.level,l=r.id,d=r.levelDetails;if(d&&d.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:d,level:s||0,id:l||0,stats:t,networkDetails:i});else switch(o){case a.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:d,id:l,stats:t,networkDetails:i});break;case a.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:d,id:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},n}(h),M=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.FRAG_LOADING)||this).loaders={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},a.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,a=this.hls.config,i=a.fLoader,o=a.loader;t.loaded=0;var s,u,c,h=n[r];h&&(d.logger.warn("abort previous fragment loader for type: "+r),h.abort()),h=n[r]=t.loader=a.fLoader?new i(a):new o(a),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var f=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l.isFiniteNumber)(f)&&Object(l.isFiniteNumber)(p)&&(s.rangeStart=f,s.rangeEnd=p),u={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,u,c)},a.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var a=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:a,frag:i,stats:t,networkDetails:n})},a.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},a.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},a.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var a=t.frag;a.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:n})},n}(h),F=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.KEY_LOADING)||this).loaders={},r.decryptkey=null,r.decrypturl=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},a.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(t.decryptdata){var a=t.decryptdata.uri;if(a!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;if(n&&(d.logger.warn("abort previous key loader for type:"+r),n.abort()),!a)return void d.logger.warn("key uri is falsy");t.loader=this.loaders[r]=new i.loader(i),this.decrypturl=a,this.decryptkey=null;var o={url:a,frag:t,responseType:"arraybuffer"},s={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}else d.logger.warn("Missing decryption data on fragment in onKeyLoading")},a.loadsuccess=function(e,t,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(u.default.KEY_LOADED,{frag:n})):d.logger.error("after key load, decryptdata unset")},a.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},a.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},n}(h),N="NOT_LOADED",j="APPENDING",B="PARTIAL",U="OK",z=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,h.prototype.destroy.call(this),e.prototype.destroy.call(this)},a.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter((function(n){var a=r[n];if(a.body.type!==t)return!1;if(!a.buffered)return!1;var i=a.body;return i.startPTS<=e&&e<=i.endPTS}));if(0===n.length)return null;var a=n.pop();return r[a].body},a.detectEvictedFragments=function(e,t){var r=this;Object.keys(this.fragments).forEach((function(n){var a=r.fragments[n];if(a&&a.buffered){var i=a.range[e];if(i)for(var o=i.time,s=0;s<o.length;s++){var l=o[s];if(!r.isTimeBuffered(l.startPTS,l.endPTS,t)){r.removeFragment(a.body);break}}}}))},a.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){if(e.hasElementaryStream(r)){var a=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,a)}})))},a.getBufferedTimes=function(e,t,r){for(var n,a,i=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,e>=n&&t<=a){i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<a&&t>n)i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:i,partial:o}},a.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},a.getPartialFragment=function(e){var t,r,n,a=this,i=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=a.fragments[s];a.isPartial(l)&&(r=l.body.startPTS-a.bufferPadding,n=l.body.endPTS+a.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(i=l.body,o=t)))})),i},a.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=N;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?B:U:j),n},a.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},a.isTimeBuffered=function(e,t,r){for(var n,a,i=0;i<r.length;i++){if(n=r.start(i)-this.bufferPadding,a=r.end(i)+this.bufferPadding,e>=n&&t<=a)return!0;if(t<=n)return!1}return!1},a.onFragLoaded=function(e){var t=e.frag;Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},a.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},a.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},a.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},a.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},a.removeAllFragments=function(){this.fragments=Object.create(null)},n}(h),H={search:function(e,t){for(var r=0,n=e.length-1,a=null,i=null;r<=n;){var o=t(i=e[a=(r+n)/2|0]);if(o>0)r=a+1;else{if(!(o<0))return i;n=a-1}}return null}},G=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,a=e.buffered,i=[];for(n=0;n<a.length;n++)i.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var n=[];if(r)for(var a=0;a<e.length;a++){var i=n.length;if(i){var o=n[i-1].end;e[a].start-o<r?e[a].end>o&&(n[i-1].end=e[a].end):n.push(e[a])}else n.push(e[a])}else n=e;for(var s,l=0,u=t,d=t,c=0;c<n.length;c++){var h=n[c].start,f=n[c].end;if(t+r>=h&&t<f)u=h,l=(d=f)-t;else if(t+r<h){s=h;break}}return{len:l,start:u,end:d,nextStart:s}},e}(),q=r("./node_modules/eventemitter3/index.js"),K=r("./node_modules/webworkify-webpack/index.js"),V=r("./src/demux/demuxer-inline.js");function W(){return window.MediaSource||window.WebKitMediaSource}var Y=r("./src/utils/get-self-scope.js"),X=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},n}(q.EventEmitter),Z=Object(Y.getSelfScope)(),J=W()||{isTypeSupported:function(){return!1}},$=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new X,a=e.config,i=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(u.default.FRAG_DECRYPTED,i),n.on(u.default.FRAG_PARSING_INIT_SEGMENT,i),n.on(u.default.FRAG_PARSING_DATA,i),n.on(u.default.FRAG_PARSED,i),n.on(u.default.ERROR,i),n.on(u.default.FRAG_PARSING_METADATA,i),n.on(u.default.FRAG_PARSING_USERDATA,i),n.on(u.default.INIT_PTS_FOUND,i);var o={mp4:J.isTypeSupported("video/mp4"),mpeg:J.isTypeSupported("audio/mpeg"),mp3:J.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){var c;d.logger.log("demuxing in webworker");try{c=this.w=K(/*! ../demux/demuxer-worker.js */"./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),c.addEventListener("message",this.onwmsg),c.onerror=function(t){e.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},c.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(a)})}catch(e){d.logger.warn("Error in worker:",e),d.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),c&&Z.URL.revokeObjectURL(c.objectURL),this.demuxer=new V.default(n,o,a,l),this.w=void 0}}else this.demuxer=new V.default(n,o,a,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,a,i,o,s){var u=this.w,c=Object(l.isFiniteNumber)(a.startPTS)?a.startPTS:a.start,h=a.decryptdata,f=this.frag,p=!(f&&a.cc===f.cc),g=!(f&&a.level===f.level),y=f&&a.sn===f.sn+1,m=!g&&y;if(p&&d.logger.log(this.id+":discontinuity detected"),g&&d.logger.log(this.id+":switch detected"),this.frag=a,u)u.postMessage({cmd:"demux",data:e,decryptdata:h,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:c,discontinuity:p,trackSwitch:g,contiguous:m,duration:i,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var v=this.demuxer;v&&v.push(e,h,t,r,n,c,p,g,m,i,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":Z.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function Q(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function ee(e,t,r){var n=e[t],a=e[r],i=a.startPTS;if(Object(l.isFiniteNumber)(i))r>t?(n.duration=i-n.start,n.duration<0&&d.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(a.duration=n.start-i,a.duration<0&&d.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!"));else if(r>t){var o=n.cc===a.cc;a.start=n.start+(o&&n.minEndPTS?n.minEndPTS-n.start:n.duration)}else a.start=Math.max(n.start-a.duration,0)}function te(e,t,r,n,a,i){var o=r,s=n;if(Object(l.isFiniteNumber)(t.startPTS)){var u=Math.abs(t.startPTS-r);Object(l.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),s=Math.min(n,t.endPTS),n=Math.max(n,t.endPTS),a=Math.min(a,t.startDTS),i=Math.max(i,t.endDTS)}var d=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.minEndPTS=s,t.startDTS=a,t.endDTS=i,t.duration=n-r;var c,h,f,p=t.sn;if(!e||p<e.startSN||p>e.endSN)return 0;for(c=p-e.startSN,(h=e.fragments)[c]=t,f=c;f>0;f--)ee(h,f,f-1);for(f=c;f<h.length-1;f++)ee(h,f,f+1);return e.PTSKnown=!0,d}function re(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,n=0;if(ne(e,t,(function(e,a){n=e.cc-a.cc,Object(l.isFiniteNumber)(e.startPTS)&&(a.start=a.startPTS=e.startPTS,a.endPTS=e.endPTS,a.duration=e.duration,a.backtracked=e.backtracked,a.dropped=e.dropped,r=a),t.PTSKnown=!0})),t.PTSKnown){if(n){d.logger.log("discontinuity sliding from playlist, take drift into account");for(var a=t.fragments,i=0;i<a.length;i++)a[i].cc+=n}r?te(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(e,t){var r=t.startSN-e.startSN,n=e.fragments,a=t.fragments;if(!(r<0||r>n.length))for(var i=0;i<a.length;i++)a[i].start+=n[r].start}(e,t),t.PTSKnown=e.PTSKnown}}function ne(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,i=t.startSN-e.startSN,o=n;o<=a;o++){var s=e.fragments[i+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function ae(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),a=n/2;return e&&t.endSN===e.endSN&&(n=a),r&&(n=Math.max(a,n-(window.performance.now()-r))),Math.round(n)}var ie={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};function oe(e,t){t.fragments.forEach((function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}})),t.PTSKnown=!0}function se(e,t,r){!function(e,t,r){if(function(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}(e,r,t)){var n=function(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var a=function(e,t){for(var r=null,n=0;n<e.length;n+=1){var a=e[n];if(a&&a.cc===t){r=a;break}}return r}(r,n[0].cc);if(a&&(!a||a.startPTS))return a;d.logger.log("No frag in previous level to align on")}else d.logger.log("No fragments to align")}(r.details,t);n&&(d.logger.log("Adjusting PTS using last level due to CC increase within current level"),oe(n.start,t))}}(e,r,t),!r.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(l.isFiniteNumber)(n)&&(d.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),oe(n,e))}}(r,t.details)}function le(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var n=0;n<e.length;++n){var a=e[n];if(ce(t,r,a))return a}return null}function ue(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var a=null;if(e?a=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(a=t[0]),a&&0===de(r,n,a))return a;var i=H.search(t,de.bind(null,r,n));return i||a}function de(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function ce(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}var he=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,a=r.currentTime,i=r.seeking,o=this.seeking&&!i,s=!this.seeking&&i;if(this.seeking=i,a===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=G.bufferInfo(r,a,0),u=l.len>0,c=l.nextStart||0;if(u||c){if(i){var h=l.len>2,f=!c||c-a>2&&!this.fragmentTracker.getPartialFragment(a);if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var p=Math.max(c,l.start||0)-a;if(p>0&&p<=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==n){var y=g-n;!i&&y>=250&&this._reportStall(l.len);var m=G.bufferInfo(r,a,t.maxBufferHole);this._tryFixBufferStall(m,y)}else this.stalled=g}}}else if(this.moved=!0,null!==n){if(this.stallReported){var v=self.performance.now()-n;d.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(v)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,a=this.media.currentTime,i=n.getPartialFragment(a);i&&this._trySkipBufferHole(i)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(d.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,d.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,a=n.currentTime,i=0,o=0;o<n.buffered.length;o++){var l=n.buffered.start(o);if(a+t.maxBufferHole>=i&&a<l){var c=Math.max(l+.05,n.currentTime+.1);return d.logger.warn("skipping hole, adjusting currentTime from "+a+" to "+c),this.moved=!0,this.stalled=null,n.currentTime=c,e&&r.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+c,frag:e}),c}i=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var i=n+a*e.nudgeOffset;d.logger.warn("Nudging 'currentTime' from "+n+" to "+i),r.currentTime=i,t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else d.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pe=function(e){var t,r;function n(t){for(var r,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return(r=e.call.apply(e,[this,t].concat(a))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(fe(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},a.hasInterval=function(){return!!this._tickInterval},a.hasNextTick=function(){return!!this._tickTimer},a.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},a.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},a.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},a.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},a.doTick=function(){},n}(h),ge="STOPPED",ye="STARTING",me="IDLE",ve="PAUSED",ke="KEY_LOADING",be="FRAG_LOADING",we="FRAG_LOADING_WAITING_RETRY",Ee="WAITING_TRACK",Te="PARSING",_e="PARSED",xe="BUFFER_FLUSHING",Se="ENDED",Ce="ERROR",Ae="WAITING_INIT_PTS",Re="WAITING_LEVEL",De=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.doTick=function(){},a.startLoad=function(){},a.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ge},a._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var a=n.getState(r);return a===B||a===U}return!1},a.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,a=t?t.currentTime:null,i=G.bufferInfo(r||t,a,this.config.maxBufferHole);if(d.logger.log("media seeking to "+(Object(l.isFiniteNumber)(a)?a.toFixed(3):a)),n===be){var o=this.fragCurrent;if(0===i.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,c=o.start+o.duration+s;a<u||a>c?(o.loader&&(d.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=me):d.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else n===Se&&(0===i.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=me);t&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},a.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},a.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},a.onHandlerDestroyed=function(){this.state=ge,this.fragmentTracker=null},a.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},n}(pe);function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Oe,Pe=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=ge,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n.audioOnly=!1,n.bitrateTest=!1,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,o,c,h=n.prototype;return h.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(r.config.testBandwidth?(n=0,this.bitrateTest=!0):n=r.nextAutoLevel),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(d.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=me,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ge},h.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},h.doTick=function(){switch(this.state){case xe:this.fragLoadError=0;break;case me:this._doTickIdle();break;case Re:var e=this.levels[this.level];e&&e.details&&(this.state=me);break;case we:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(d.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=me)}this._checkBuffer(),this._checkFragmentChanged()},h._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,i=this.levels[a];if(i){var o,s=i.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=n<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,c=G.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,l),h=c.len;if(!(h>=o)){d.logger.trace("buffer length of "+h.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var f=i.details;if(!f||f.live&&this.levelLastLoaded!==a)this.state=Re;else{if(this._streamEnded(c,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(u.default.BUFFER_EOS,p),void(this.state=Se)}this._fetchPayloadOrEos(n,c,f)}}}}},h._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,a=(this.level,r.fragments),i=a.length;if(0!==i){var o,s=a[0].start,l=a[i-1].start+a[i-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var c=this.config.initialLiveManifestSize;if(i<c)return void d.logger.warn("Can not start playback of a level, reason: not enough fragments "+i+" < "+c);if(null===(o=this._ensureFragmentAtLivePoint(r,u,s,l,n,a)))return}else u<s&&(o=a[0]);o||(o=this._findFragment(s,n,i,a,u,l,r)),o&&(o.encrypted?this._loadKey(o,r):this._loadFragment(o,r,e,u))}},h._ensureFragmentAtLivePoint=function(e,t,r,n,a,i){var o,s=this.hls.config,u=this.media,c=1/0;if(void 0!==s.liveMaxLatencyDuration?c=s.liveMaxLatencyDuration:Object(l.isFiniteNumber)(s.liveMaxLatencyDurationCount)&&(c=s.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-s.maxFragLookUpTolerance,n-c)){var h=this.liveSyncPosition=this.computeLivePosition(r,e);t=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(d.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown&&a)if(e.hasProgramDateTime)d.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),o=le(i,a.endProgramDateTime,s.maxFragLookUpTolerance);else{var f=a.sn+1;if(f>=e.startSN&&f<=e.endSN){var p=i[f-e.startSN];a.cc===p.cc&&(o=p,d.logger.log("live playlist, switching playlist, load frag with next SN: "+o.sn))}o||(o=H.search(i,(function(e){return a.cc-e.cc})))&&d.logger.log("live playlist, switching playlist, load frag with same CC: "+o.sn)}return o},h._findFragment=function(e,t,r,n,a,i,o){var s,l=this.hls.config;if(s=a<i?ue(t,n,a,a>i-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):n[r-1]){var u=s.sn-o.startSN,c=t&&s.level===t.level,h=n[u-1],f=n[u+1];if(t&&s.sn===t.sn)if(c&&!s.backtracked)if(s.sn<o.endSN){var p=t.deltaPTS;p&&p>l.maxBufferHole&&t.dropped&&u?(s=h,d.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=f,this.fragmentTracker.getState(s)!==U&&d.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(f&&f.backtracked?(d.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+f.sn),s=f):(d.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:u&&(s=null)))}return s},h._loadKey=function(e,t){d.logger.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level),this.state=ke,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},h._loadFragment=function(e,t,r,n){var a=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||a===N||a===B?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,d.logger.log("Loading "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(r.toFixed(3))+", bufferEnd: "+parseFloat(n.toFixed(3))),this.hls.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new $(this.hls,"main")),this.state=be):a===j&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},h.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,i.MAIN)},h.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},h._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),G.isBuffered(r,t)?e=this.getBufferedFrag(t):G.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:n});var a=n.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:a}),this.fragPlaying=n}}},h.immediateLevelSwitch=function(){if(d.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused)||t.pause():e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},h.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,e.currentTime>0&&G.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},h.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r=this.getBufferedFrag(e.currentTime);if(r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var n=this.hls.nextLoadLevel,a=this.levels[n],i=this.fragLastKbps;t=i&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*i)+1:0}var o=this.getBufferedFrag(e.currentTime+t);if(o){var s=this.followingBufferedFrag(o);if(s){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null;var u=Math.max(o.endPTS,s.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,s.duration));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},h.flushMainBuffer=function(e,t){this.state=xe;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,r)},h.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new he(r,t,this.fragmentTracker,this.hls)},h.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},h.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.isFiniteNumber)(t)&&d.logger.log("media seeked to "+t.toFixed(3)),this.tick()},h.onManifestLoading=function(){d.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},h.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&d.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},h.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],a=this.levels[r],i=t.totalduration,o=0;if(d.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var s=a.details;s&&t.fragments.length>0?(re(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l.isFiniteNumber)(o)?d.logger.log("live playlist sliding:"+o.toFixed(3)):(d.logger.log("live playlist - outdated PTS, unknown sliding"),se(this.fragPrevious,n,t))):(d.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,se(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(a.details=t,this.levelLastLoaded=r,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=t.startTimeOffset;Object(l.isFiniteNumber)(c)?(c<0&&(d.logger.log("negative start time offset "+c+", count from end of last fragment"),c=o+i+c),d.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):t.live?(this.startPosition=this.computeLivePosition(o,t),d.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Re&&(this.state=me),this.tick()},h.onKeyLoaded=function(){this.state===ke&&(this.state=me,this.tick())},h.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,a=this.media,i=e.frag;if(this.state===be&&t&&"main"===i.type&&i.level===t.level&&i.sn===t.sn){var o=e.stats,s=n[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,d.logger.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),i.bitrateTest&&r.nextLoadLevel)this.state=me,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=me,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{d.logger.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=Te,this.pendingBuffering=!0,this.appended=!1,i.bitrateTest&&(i.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:i}));var c=!(a&&a.seeking)&&(l.PTSKnown||!l.live),h=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s);(this.demuxer=this.demuxer||new $(this.hls,"main")).push(e.payload,h,f,s.videoCodec,t,l.totalduration,c)}}this.fragLoadError=0},h.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te){var n,a,i=e.tracks;if(this.audioOnly=i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio,a=i.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",d.logger.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=e.id}for(n in(a=i.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,i),i){a=i[n],d.logger.log("main track:"+n+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},h.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===Te){var a=this.levels[this.level],i=r;if(Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&i.addElementaryStream(g.AUDIO),!0===e.hasVideo&&i.addElementaryStream(g.VIDEO),d.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(i.dropped=e.dropped,i.dropped)if(i.backtracked)d.logger.warn("Already backtracked on this fragment, appending with the gap",i.sn);else{var o=a.details;if(!o||i.sn!==o.startSN)return d.logger.warn("missing video frame(s), backtracking fragment",i.sn),this.fragmentTracker.removeFragment(i),i.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=me,this.fragPrevious=i,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();d.logger.warn("missing video frame(s) on first frag, appending with gap",i.sn)}else i.backtracked=!1;var s=te(a.details,i,e.startPTS,e.endPTS,e.startDTS,e.endDTS),c=this.hls;c.trigger(u.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===Te&&(t.appended=!0,t.pendingBuffering=!0,c.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}},h.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te&&(this.stats.tparsed=window.performance.now(),this.state=_e,this._checkAppendedParsed())},h.onAudioTrackSwitching=function(e){var t=this.altAudio,r=!!e.url,n=e.id;if(!r){if(this.mediaBuffer!==this.media){d.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a.loader&&(d.logger.log("switching to main audio track, cancel main fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=me}var i=this.hls;t&&i.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:n})}},h.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(d.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},h.onBufferCreated=function(e){var t,r,n=e.tracks,a=!1;for(var i in n){var o=n[i];"main"===o.id?(r=i,t=o,"video"===i&&(this.videoBuffer=n[i].buffer)):a=!0}a&&t?(d.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},h.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==Te&&t!==_e||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},h._checkAppendedParsed=function(){if(!(this.state!==_e||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("main buffered : "+ie.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=me}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},h.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&G.isBuffered(this.media,this.media.currentTime)&&G.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);d.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=we}else d.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ce;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Ce&&(e.fatal?(this.state=Ce,d.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Re||(this.state=me));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==Te&&this.state!==_e||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=me):(d.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},h._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,d.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},h._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},h.onFragLoadEmergencyAborted=function(){this.state=me,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},h.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;if(e){var t=this.audioOnly?g.AUDIO:g.VIDEO;this.fragmentTracker.detectEvictedFragments(t,e.buffered)}this.state=me,this.fragPrevious=null},h.onLevelsUpdated=function(e){this.levels=e.levels},h.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},h._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(t!==r&&r>=0){if(e.seeking)return void d.logger.log("could not seek to "+r+", already seeking at "+t);var n=(e.buffered.length?e.buffered.start(0):0)-r;n>0&&n<this.config.maxBufferHole&&(d.logger.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),d.logger.log("seek to target start position "+r+" from current time "+t+". ready state "+e.readyState),e.currentTime=r}},h._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},a=n,(o=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&Le(a.prototype,o),c&&Le(a,c),n}(De);function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Me=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,Oe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,l=n.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(e){var t,r=[],n=[],a={},i=null,o=!1,l=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Oe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(i=a[e.bitrate])?i.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&Q(i||e,"audio",t.AUDIO),t.SUBTITLES&&Q(i||e,"text",t.SUBTITLES))})),o&&l&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||x(t,"audio"))&&(!r||x(r,"video"))})),e.audioTracks&&(n=e.audioTracks.filter((function(e){return!e.audioCodec||x(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var c=0;c<r.length;c++)if(r[c].bitrate===t){this._firstLevel=c,d.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}var h=l&&!o;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:!h&&n.some((function(e){return!!e.url}))})}else this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){d.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(u.default.LEVEL_SWITCHING,n)}var a=t[e],i=a.details;if(!i||i.live){var o=a.urlId;r.trigger(u.default.LEVEL_LOADING,{url:a.url[o],level:e,id:o})}}else r.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},l.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},l.recoverLevel=function(e,t,r,n){var a,i,o,s=this,l=this.hls.config,u=e.details,c=this._levels[t];if(c.loadError++,c.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return d.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);i=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),i),e.levelRetry=!0,this.levelRetryCount++,d.logger.warn("level controller, "+u+", retry in "+i+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((a=c.url.length)>1&&c.loadError<a?(c.urlId=(c.urlId+1)%a,c.details=void 0,d.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+c.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,d.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(d.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var a=this._levels[r];if(a.fragmentError||(a.loadError=0,this.levelRetryCount=0),n.live){var i=ae(a.details,n,e.stats.trequest);d.logger.log("live playlist, reload in "+Math.round(i)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),i)}else this.clearTimer()}},l.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===t){n=a;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},l.loadLevel=function(){if(d.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];d.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(u.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},l.removeLevel=function(e,t){var r=this.levels.filter((function(r,n){return n!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter((function(e,r){return r!==t})),r.urlId=0,!0)})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:r})},a=n,(i=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Ie(a.prototype,i),o&&Ie(a,o),n}(h),Fe=r("./src/demux/id3.js");function Ne(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function je(e){if(null==e?void 0:e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Be=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,r.media=void 0,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){h.prototype.destroy.call(this)},a.onMediaAttached=function(e){this.media=e.media,this.media},a.onMediaDetaching=function(){je(this.id3Track),this.id3Track=void 0,this.media=void 0},a.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Ne(r,this.media),r}return this.media.addTextTrack("metadata","id3")},a.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var i=Fe.default.getID3Frames(r[a].data);if(i){var o=Math.max(r[a].pts,0),s=a<r.length-1?r[a+1].pts:t.endPTS;s||(s=t.start+t.duration),s-o<=0&&(s=o+.25);for(var l=0;l<i.length;l++){var u=i[l];if(!Fe.default.isTimeStampFrame(u)){var d=new n(o,s,"");d.value=u,this.id3Track.addCue(d)}}}}},a.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var n=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,n=e.length-1;r<=n;){var a=Math.floor((n+r)/2);if(t<e[a].endTime)n=a-1;else{if(!(t>e[a].endTime))return e[a];r=a+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}(r.cues,t);if(n)for(;r.cues[0]!==n;)r.removeCue(r.cues[0])}},n}(h),Ue=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),ze=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ue(t),this.fast_=new Ue(r)}var t=e.prototype;return t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ge=window.performance,qe=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,c=n.prototype;return c.destroy=function(){this.clearTimer(),h.prototype.destroy.call(this)},c.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,a=this.hls,i=a.config,o=t.level;a.levels[o].details.live?(r=i.abrEwmaFastLive,n=i.abrEwmaSlowLive):(r=i.abrEwmaFastVoD,n=i.abrEwmaSlowVoD),this._bwEstimator=new ze(a,n,r,i.abrEwmaDefaultEstimate)}},c._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader;if(!n||n.stats&&n.stats.aborted)return d.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=n.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var i=Ge.now()-a.trequest,o=Math.abs(t.playbackRate);if(i>500*r.duration/o){var s=e.levels,l=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/i),c=s[r.level];if(!c)return;var h=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,f=a.total?a.total:Math.max(a.loaded,Math.round(r.duration*h/8)),p=t.currentTime,g=(f-a.loaded)/l,y=(G.bufferInfo(t,p,e.config.maxBufferHole).end-p)/o;if(y<2*r.duration/o&&g>y){var m,v=e.minAutoLevel;for(m=r.level-1;m>v;m--){var k=s[m].realBitrate?Math.max(s[m].realBitrate,s[m].bitrate):s[m].bitrate;if(r.duration*k/(6.4*l)<y)break}void 0<g&&(d.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),e.nextLoadLevel=m,this._bwEstimator.sample(i,a.loaded),n.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:a}))}}}}},c.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,a=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:a},r.realBitrate=Math.round(8*n/a)}if(e.frag.bitrateTest){var i=e.stats;i.tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)}}},c.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l.isFiniteNumber)(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;d.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},c.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},c.clearTimer=function(){clearInterval(this.timer),this.timer=null},c._findBestLevel=function(e,t,r,n,a,i,o,s,l){for(var u=a;u>=n;u--){var c=l[u];if(c){var h=c.details,f=h?h.totalduration/h.fragments.length:t,p=!!h&&h.live,g=void 0;g=u<=e?o*r:s*r;var y=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,m=y*f/g;if(d.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+y+"/"+f+"/"+i+"/"+m),g>y&&(!m||p&&!this.bitrateTestDelay||m<i))return u}}return-1},a=n,(i=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,a=e.minAutoLevel,i=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=i?i.currentTime:0,u=i&&0!==i.playbackRate?Math.abs(i.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(G.bufferInfo(i,l,n.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,c,a,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;d.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;m&&(p=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-m,d.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=y=1)}return f=this._findBestLevel(o,s,c,a,t,h+p,g,y,r),Math.max(f,0)}}])&&He(a.prototype,i),o&&He(a,o),n}(h),Ke=W(),Ve=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){d.logger.log("media source opened"),r.hls.trigger(u.default.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){d.logger.log("media source closed")},r._onMediaSourceEnded=function(){d.logger.log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;d.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),a={},i=r.sourceBuffer;for(var o in i){var s=i[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");a[o]=s.buffered}r.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:a}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){d.logger.error("sourceBuffer error:",e),r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){h.prototype.destroy.call(this)},a.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(n.timestampOffset-e.start)>.1){var a=n.updating;try{n.abort()}catch(e){d.logger.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(d.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},a.onManifestParsed=function(e){var t=2;(e.audio&&!e.video||!e.altAudio)&&(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,d.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},a.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Ke){var r=this.mediaSource=new Ke;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},a.onMediaDetaching=function(){d.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){d.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):d.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},a.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},a.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},a.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},a.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in e)if(!t[n]){var a=e[n];if(!a)throw Error("source buffer exists for track "+n+", however track does not");var i=a.levelCodec||a.codec,o=a.container+";codecs="+i;d.logger.log("creating sourceBuffer("+o+")");try{var l=t[n]=r.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:i,id:a.id,container:a.container,levelCodec:a.levelCodec}}catch(e){d.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},a.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},a.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,d.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},a.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}d.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){d.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},a.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},a.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),a=t-Math.max(e,this._levelTargetDuration),i=n.length-1;i>=0;i--){var o=n[i],s=r[o];if(s){var l=s.buffered;l.length>0&&a>l.start(0)&&this.removeBufferRange(o,s,0,a)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:a})}}else d.logger.error("flushLiveBackBuffer called without attaching media")}},a.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},a.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(d.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.isFiniteNumber)(e))&&(d.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},a.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var a=r[n];a&&(t+=a.buffered.length)}}catch(e){d.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}},a.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void d.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var a=r.shift();if(a)try{var i=n[a.type];if(!i)return void this._onSBUpdateEnd();if(i.updating)return void r.unshift(a);i.ended=!1,this.parent=a.parent,i.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0}catch(n){d.logger.error("error while trying to append buffer:"+n.message),r.unshift(a);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:a.parent,details:"",fatal:!1};22===n.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(d.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u.default.ERROR,o)}}}},a.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var a="null";if(this.media&&(a=this.media.currentTime.toFixed(3)),d.logger.log("flushBuffer,pos/start/end: "+a+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return d.logger.warn("abort flushing too many retries"),!0;var i=n[r];if(i){if(i.ended=!1,i.updating)return d.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,i,e,t))return this.flushBufferCounter++,!1}return d.logger.log("buffer flushed"),!0},a.removeBufferRange=function(e,t,r,n){try{for(var a=0;a<t.buffered.length;a++){var i=t.buffered.start(a),o=t.buffered.end(a),s=Math.max(i,r),l=Math.min(o,n);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),d.logger.log("sb remove "+e+" ["+s+","+l+"], of ["+i+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(e){d.logger.warn("removeBufferRange failed",e)}return!1},n}(h);function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ye=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,s=n.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,a){return n.isLevelAllowed(a,t.restrictedLevels)&&a<=e}));return this.clientRect=null,n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},n.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n,a,i=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=r)&&(n=s,!(a=e[o+1])||n.width!==a.width||n.height!==a.height)){i=o;break}}return i},a=n,o=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(i=[{key:"mediaWidth",get:function(){return this.getDimensions().width*n.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*n.contentScaleFactor}}])&&We(a.prototype,i),o&&We(a,o),n}(h),Xe=window.performance,Ze=function(e){var t,r;function n(t){return e.call(this,t,u.default.MEDIA_ATTACHING)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},a.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},a.checkFPS=function(e,t,r){var n=Xe.now();if(t){if(this.lastTime){var a=n-this.lastTime,i=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*i/a,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:i,currentDecoded:o,totalDroppedFrames:r}),s>0&&i>l.config.fpsDroppedMonitoringThreshold*o){var c=l.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=c)&&(c-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},a.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},n}(h),Je=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,a=this.context,i=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(window.performance.now(),n.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,l;n.tload=Math.max(n.tfirst,window.performance.now()),l="arraybuffer"===a.responseType?(s=t.response).byteLength:(s=t.responseText).length,n.loaded=n.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,a,t)}else n.retry>=i.maxRetry||o>=400&&o<499?(d.logger.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:t.statusText},a,t)):(d.logger.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,i.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),i.timeout)},t.loadtimeout=function(){d.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Qe=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,l=n.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},l.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)d.logger.warn("Invalid audio track id:",e.id);else{if(d.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},l.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},l.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},l.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(d.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},l._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)d.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)d.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];d.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,a=t.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:a,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},l.doTick=function(){this._updateTrack(this._trackId)},l._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},l._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var a=t.filter((function(e){return e.default}));a.length?t=a:d.logger.warn("No default audio tracks defined")}var i=!1,o=function(){t.forEach((function(t){i||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),i=!0)}))};o(),i||(n=null,o()),i||(d.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live||!r)},l._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;d.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},l._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,d.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,a=t.groupId;d.logger.warn("Loading failed on audio track id: "+e+", group-id: "+a+', name/language: "'+r+'" / "'+n+'"');for(var i=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===r){i=o;break}i!==e?(d.logger.log("Attempting audio-track fallback id:",i,"group-id:",this.tracks[i].groupId),this._setAudioTrack(i)):d.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},a=n,(i=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&$e(a.prototype,i),o&&$e(a,o),n}(pe);function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tt=window.performance,rt=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=ge,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n.waitingVideoCC=null,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,c=n.prototype;return c.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,d.logger.log("InitPTS for cc: "+r+" found from main: "+n),this.state===Ae&&this.tick())},c.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(d.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=me):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=ye),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ge},c.doTick=function(){var e,t,r,n=this.hls,a=n.config;switch(this.state){case Ce:case ve:case xe:break;case ye:this.state=Ee,this.loadedmetadata=!1;break;case me:var i=this.tracks;if(!i)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,c=e<a.maxBufferHole?Math.max(2,a.maxBufferHole):a.maxBufferHole,h=G.bufferInfo(o,e,c),f=G.bufferInfo(s,e,c),p=h.len,g=h.end,y=this.fragPrevious,m=Math.min(a.maxBufferLength,a.maxMaxBufferLength),v=Math.max(m,f.len),k=this.audioSwitch,b=this.trackId;if((p<v||k)&&b<i.length){if(void 0===(r=i[b].details)){this.state=Ee;break}if(!k&&this._streamEnded(h,r))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=Se);var w,E=r.fragments,T=E.length,_=E[0].start,x=E[T-1].start+E[T-1].duration;if(k)if(r.live&&!r.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=e,r.PTSKnown&&e<_){if(!(h.end>_||h.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(r.initSegment&&!r.initSegment.data)w=r.initSegment;else if(g<=_){if(w=E[0],null!==this.videoTrackCC&&w.cc!==this.videoTrackCC&&(w=function(e,t){return H.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(E,this.videoTrackCC)),r.live&&w.loadIdx&&w.loadIdx===this.fragLoadIdx){var S=h.nextStart?h.nextStart:_;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var C,A=a.maxFragLookUpTolerance,R=y?E[y.sn-E[0].sn+1]:void 0;g<x?(g>x-A&&(A=0),C=R&&!de(g,A,R)?R:H.search(E,(function(e){return de(g,A,e)}))):C=E[T-1],C&&(w=C,_=C.start,y&&w.level===y.level&&w.sn===y.sn&&(w.sn<r.endSN?(w=E[w.sn+1-r.startSN],this.fragmentTracker.getState(w)!==U&&d.logger.log("SN just loaded, load next one: "+w.sn)):w=null))}w&&(w.encrypted?(d.logger.log("Loading key for "+w.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=ke,n.trigger(u.default.KEY_LOADING,{frag:w})):(this.fragCurrent=w,(k||this.fragmentTracker.getState(w)===N)&&(d.logger.log("Loading "+w.sn+", cc: "+w.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+e+", bufferEnd: "+g.toFixed(3)),"initSegment"!==w.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(w.sn)&&(this.nextLoadPosition=w.start+w.duration),n.trigger(u.default.FRAG_LOADING,{frag:w}),this.state=be)))}break;case Ee:(t=this.tracks[this.trackId])&&t.details&&(this.state=me);break;case we:var D=tt.now(),L=this.retryDate,O=(o=this.media)&&o.seeking;(!L||D>=L||O)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=me);break;case Ae:var P=this.waitingFragment;if(P){var I=P.frag.cc;if(void 0!==this.initPTS[I])this.waitingFragment=null,this.state=be,this.onFragLoaded(P);else if(this.videoTrackCC!==this.waitingVideoCC)d.logger.log("Waiting fragment cc ("+I+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var M=G.bufferInfo(this.mediaBuffer,this.media.currentTime,a.maxBufferHole);de(M.end,a.maxFragLookUpTolerance,P.frag)<0&&(d.logger.log("Waiting fragment cc ("+I+") @ "+P.frag.start+" cancelled because another fragment at "+M.end+" is needed"),this.clearWaitingFragment())}}else this.state=me}},c.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=me)},c.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},c.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},c.onAudioTracksUpdated=function(e){d.logger.log("audio tracks updated"),this.tracks=e.audioTracks},c.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=ve,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=me),this.tick()},c.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],a=t.totalduration,i=0;if(d.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var o=n.details;o&&t.fragments.length>0?(re(o,t),i=t.fragments[0].start,t.PTSKnown?d.logger.log("live audio playlist sliding:"+i.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l.isFiniteNumber)(s)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(i,t),d.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Ee&&(this.state=me),this.tick()},c.onKeyLoaded=function(){this.state===ke&&(this.state=me,this.tick())},c.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===be&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],a=n.details,i=a.totalduration,o=t.level,s=t.sn,l=t.cc,c=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=e.stats;if("initSegment"===s)this.state=me,h.tparsed=h.tbuffered=tt.now(),a.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:h,frag:t,id:"audio"}),this.tick();else{this.state=Te,this.appended=!1,this.demuxer||(this.demuxer=new $(this.hls,"audio"));var f=this.initPTS[l],p=a.initSegment?a.initSegment.data:[];void 0!==f?(this.pendingBuffering=!0,d.logger.log("Demuxing "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.demuxer.push(e.payload,p,c,null,t,i,!1,f)):(d.logger.log("Unknown video PTS for cc "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=Ae)}}this.fragLoadError=0},c.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te){var n,a=e.tracks;if(a.video&&delete a.video,n=a.audio){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,a),d.logger.log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var i=n.initSegment;if(i){var o={type:"audio",data:i,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,o))}this.tick()}}},c.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===Te){var a=this.trackId,i=this.tracks[a],o=this.hls;Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(g.AUDIO),d.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),te(i.details,r,e.startPTS,e.endPTS);var c=this.media,h=!1;if(this.audioSwitch)if(c&&c.readyState){var f=c.currentTime;d.logger.log("switching audio track : currentTime:"+f),f>=e.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=xe,o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:a});var p=this.pendingData;if(!p)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&p.push({type:e.type,data:t,parent:"audio",content:"data"})})),!h&&p.length&&(p.forEach((function(e){t.state===Te&&(t.pendingBuffering=!0,t.hls.trigger(u.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},c.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te&&(this.stats.tparsed=tt.now(),this.state=_e,this._checkAppendedParsed())},c.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},c.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},c.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==Te&&t!==_e||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},c._checkAppendedParsed=function(){if(!(this.state!==_e||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=tt.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&d.logger.log("audio buffered : "+ie.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=me}this.tick()}},c.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var a=this.config;if(n<=a.fragLoadingMaxRetry){this.fragLoadError=n;var i=Math.min(Math.pow(2,n-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=tt.now()+i,this.state=we}else d.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ce}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Ce&&(this.state=e.fatal?Ce:me,d.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Te||this.state===_e)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&G.isBuffered(o,l)&&G.isBuffered(o,l+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+c.maxMaxBufferLength+"s")),this.state=me}else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=xe,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},c.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach((function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=_e):(this.state=me,this.fragPrevious=null,this.tick())},a=n,(i=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,d.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&et(a.prototype,i),o&&et(a,o),n}(De),nt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function a(t,a,i){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,d=t,c=a,h=i,f=null,p="",g=!0,y="auto",m="start",v=50,k="middle",b=50,w="middle";Object.defineProperty(o,"id",n({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",n({},s,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",n({},s,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},s,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},s,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},s,{get:function(){return p},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},s,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},s,{get:function(){return y},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},s,{get:function(){return m},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},s,{get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},s,{get:function(){return k},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");k=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},s,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},s,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),at=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function it(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new at,this.regionList=[]}function ot(){this.values=Object.create(null)}function st(e,t,r,n){var a=n?e.split(n):[e];for(var i in a)if("string"==typeof a[i]){var o=a[i].split(r);2===o.length&&t(o[0],o[1])}}ot.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var lt=new nt(0,0,0),ut="middle"===lt.align?"middle":"center";function dt(e,t,r){var n=e;function a(){var t=function(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}if(i(),t.startTime=a(),i(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),i(),t.endTime=a(),i(),function(e,t){var n=new ot;st(e,(function(e,t){switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){n.set(e,r[a].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",ut,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",ut,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",ut,"end","left","right"])}}),/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var a=n.get("line","auto");"auto"===a&&-1===lt.line&&(a=-1),t.line=a,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",ut);var i=n.get("position","auto");"auto"===i&&50===lt.position&&(i="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=i}(e,t)}function ct(e){return e.replace(/<br(?: \/)?>/gi,"\n")}it.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=ct(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(n=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var i=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:n=r(),t.state){case"HEADER":/:/.test(n)?st(n,(function(e,t){}),/:/):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new nt(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{dt(n,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(i=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var ht=it;function ft(e,t,r,n){for(var a,i,o,s,l,u=[],d=window.VTTCue||TextTrackCue,c=0;c<n.rows.length;c++)if(o=!0,s=0,l="",!(a=n.rows[c]).isEmpty()){for(var h=0;h<a.chars.length;h++)a.chars[h].uchar.match(/\s/)&&o?s++:(l+=a.chars[h].uchar,o=!1);a.cueStartTime=t,t===r&&(r+=1e-4),i=new d(t,r,ct(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?i.line=c+1:i.line=c>7?c-2:c+1,i.align="left",i.position=Math.max(0,Math.min(100,s/32*100)),u.push(i),e&&e.addCue(i)}return u}var pt,gt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},yt=function(e){var t=e;return gt.hasOwnProperty(e)&&(t=gt[e]),String.fromCharCode(t)},mt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},vt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},kt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},bt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},wt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(pt||(pt={}));var Et=function(){function e(){this.time=null,this.verboseLevel=pt.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&d.logger.log(this.time+" ["+e+"] "+t)},e}(),Tt=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},_t=function(){function e(e,t,r,n,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=a||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),xt=function(){function e(e,t,r,n,a,i){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new _t(t,r,n,a,i)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),St=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new xt);this.logger=e,this.pos=0,this.currPenState=new _t}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(pt.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(pt.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=yt(e);this.pos>=100?this.logger.log(pt.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<100;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<100;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Ct=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new St(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(pt.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(pt.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var i=a.rows[n].cueStartTime,o=this.logger.time;if(i&&null!==o&&i<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(a.rows[n+s])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,d=Math.max(u-1,0);l.setCursor(e.indent),e.color=l.chars[d].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},t.setBkgData=function(e){this.logger.log(pt.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(pt.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(pt.INFO,"Rolling up")}else this.logger.log(pt.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,a=0;a<15;a++){var i=this.rows[a].getTextString();i&&(n=a+1,e?t.push("Row "+n+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),At=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Ct(r),this.nonDisplayedMemory=new Ct(r),this.lastOutputScreen=new Ct(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(pt.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(pt.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(pt.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(pt.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(pt.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(pt.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(pt.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(pt.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(pt.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(pt.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(pt.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(pt.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(pt.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(pt.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(pt.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(pt.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(pt.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(pt.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function Rt(e,t,r){r.a=e,r.b=t}function Dt(e,t,r){return r.a===e&&r.b===t}var Lt=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new Et;this.channels=[null,new At(e,t,n),new At(e+1,r,n)],this.cmdHistory={a:null,b:null},this.logger=n}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,a,i=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(n=127&t[o],a=127&t[o+1],0!==n||0!==a){if(this.logger.log(pt.DATA,"["+Tt([t[o],t[o+1]])+"] -> ("+Tt([n,a])+")"),(r=this.parseCmd(n,a))||(r=this.parseMidrow(n,a)),r||(r=this.parsePAC(n,a)),r||(r=this.parseBackgroundAttributes(n,a)),!r&&(i=this.parseChars(n,a))){var s=this.currentChannel;s&&s>0?this.channels[s].insertChars(i):this.logger.log(pt.WARNING,"No channel found yet. TEXT-MODE?")}r||i||this.logger.log(pt.WARNING,"Couldn't parse cleaned data "+Tt([n,a])+" orig: "+Tt([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(Dt(e,t,r))return Rt(null,null,r),this.logger.log(pt.DEBUG,"Repeated command ("+Tt([e,t])+") is dropped"),!0;var n=20===e||21===e||23===e?1:2,a=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),Rt(e,t,r),this.currentChannel=n,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(pt.ERROR,"Mismatch channel in midrow parsing"),!1;var n=this.channels[r];return!!n&&(n.ccMIDROW(t),this.logger.log(pt.DEBUG,"MIDROW ("+Tt([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var r,n=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(Dt(e,t,n))return Rt(null,null,n),!0;var a=e<=23?1:2;r=t>=64&&t<=95?1===a?mt[e]:kt[e]:1===a?vt[e]:bt[e];var i=this.channels[a];return!!i&&(i.setPAC(this.interpretPAC(r,t)),Rt(e,t,n),this.currentChannel=a,!0)},t.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,n=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),a>=17&&a<=19){var i=t;i=17===a?t+80:18===a?t+112:t+144,this.logger.log(pt.INFO,"Special char '"+yt(i)+"' in channel "+r),n=[i]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var o=Tt(n);this.logger.log(pt.DEBUG,"Char codes =  "+o.join(",")),Rt(e,t,this.cmdHistory)}return n},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var n={};16===e||24===e?(r=Math.floor((t-32)/2),n.background=wt[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0));var a=e<=23?1:2;return this.channels[a].setBkgData(n),Rt(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}(),Ot=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Pt=function(e,t,r){return e.substr(r||0,t.length)===t},It=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},Mt={parse:function(e,t,r,n,a,i){var o,s=Object(Fe.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",d=0,c=0,h=0,f=[],p=!0,g=!1,y=new ht;y.oncue=function(e){var t=r[n],a=r.ccOffset;t&&t.new&&(void 0!==c?a=r.ccOffset=t.start:function(e,t,r){var n=e[t],a=e[n.prevCC];if(!a||!a.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;a&&a.new;)e.ccOffset+=n.start-a.start,n.new=!1,a=e[(n=a).prevCC];e.presentationOffset=r}(r,n,h)),h&&(a=h-r.presentationOffset),g&&(e.startTime+=a-c,e.endTime+=a-c),e.id=It(e.startTime.toString())+It(e.endTime.toString())+It(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&f.push(e)},y.onparsingerror=function(e){o=e},y.onflush=function(){o&&i?i(o):a(f)},s.forEach((function(e){if(p){if(Pt(e,"X-TIMESTAMP-MAP=")){p=!1,g=!0,e.substr(16).split(",").forEach((function(e){Pt(e,"LOCAL:")?u=e.substr(6):Pt(e,"MPEGTS:")&&(d=parseInt(e.substr(7)))}));try{t+(9e4*r[n].start||0)<0&&(t+=8589934592),d-=t,c=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(t)&&Object(l.isFiniteNumber)(r)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,t+=6e4*n,t+=36e5*a}(u)/1e3,h=d/9e4}catch(e){g=!1,o=e}return}""===e&&(p=!1)}y.parse(e+"\n")})),y.flush()}};function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var jt=function(e){var t,r;function n(t){var r;if((r=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.captionsTracks={},r.nonNativeCaptionsTracks={},r.captionsProperties=void 0,r.cea608Parser1=void 0,r.cea608Parser2=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode},textTrack3:{label:r.config.captionsTextTrack3Label,languageCode:r.config.captionsTextTrack3LanguageCode},textTrack4:{label:r.config.captionsTextTrack4Label,languageCode:r.config.captionsTextTrack4LanguageCode}},r.config.enableCEA708Captions){var n=new Ot(Ft(r),"textTrack1"),a=new Ot(Ft(r),"textTrack2"),i=new Ot(Ft(r),"textTrack3"),o=new Ot(Ft(r),"textTrack4");r.cea608Parser1=new Lt(1,n,a),r.cea608Parser2=new Lt(3,i,o)}return r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.addCues=function(e,t,r,n,a){for(var i,o,s,l,d=!1,c=a.length;c--;){var h=a[c],f=(i=h[0],o=h[1],s=t,l=r,Math.min(o,l)-Math.max(i,s));if(f>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],r),d=!0,f/(r-t)>.5))return}if(d||a.push([t,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[e],t,r,n);else{var p=this.Cues.newCue(null,t,r,n);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:p,track:e})}},a.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,a=e.initPTS,i=this.unparsedVttFrags;"main"===n&&(this.initPTS[r.cc]=a),i.length&&(this.unparsedVttFrags=[],i.forEach((function(e){t.onFragLoaded(e)})))},a.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},a.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},a.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,a=t[e],i=a.label,o=a.languageCode,s=this.getExistingTrack(e);if(s)r[e]=s,je(r[e]),Ne(r[e],n);else{var l=this.createTextTrack("captions",i,o);l&&(l[e]=!0,r[e]=l)}}},a.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},a.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},a.destroy=function(){e.prototype.destroy.call(this)},a.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},a.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){je(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},a.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},a._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)je(t[r])}},a.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=e.subtitles||[],n=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=e.subtitles||[],this.config.renderTextTracksNatively){var a=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,r){var n;if(r<a.length){for(var i=null,o=0;o<a.length;o++)if(Nt(a[o],e)){i=a[o];break}i&&(n=i)}n||(n=t.createTextTrack("subtitles",e.name,e.lang)),e.default?n.mode=t.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",t.textTracks.push(n)}))}else if(!n&&this.tracks&&this.tracks.length){var i=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:i})}}this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var r=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(r){var n="textTrack"+r[1],a=t.captionsProperties[n];a&&(a.label=e.name,e.lang&&(a.languageCode=e.lang),a.media=e)}}))},a.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser1,a=this.cea608Parser2,i=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if("main"===t.type){var d=t.sn;t.sn!==o+1&&n&&a&&(n.reset(),a.reset()),this.lastSn=d}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l.isFiniteNumber)(i[t.cc]))return s.push(e),void(i.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var c=t.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(t,r)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},a._parseVTTs=function(e,t){var r=this,n=this.hls,a=this.prevCC,i=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:a,new:!0},this.prevCC=e.cc),Mt.parse(t,this.initPTS[e.cc],o,e.cc,(function(t){if(r.config.renderTextTracksNatively){var a=i[e.level];if("disabled"===a.mode)return void n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!a.cues.getCueById(e.id))try{if(a.addCue(e),!a.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){d.logger.debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,a.addCue(t)}}))}else{var o=r.tracks[e.level].default?"default":"subtitles"+e.level;n.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:t,track:o})}n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){d.logger.log("Failed to parse VTT cue: "+t),n.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},a.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},a.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var n=0;n<e.samples.length;n++){var a=e.samples[n].bytes;if(a){var i=this.extractCea608Data(a);t.addData(e.samples[n].pts,i[0]),r.addData(e.samples[n].pts,i[1])}}},a.extractCea608Data=function(e){for(var t=31&e[0],r=2,n=[[],[]],a=0;a<t;a++){var i=e[r++],o=127&e[r++],s=127&e[r++],l=3&i;0===o&&0===s||0!=(4&i)&&(0!==l&&1!==l||(n[l].push(o),n[l].push(s)))}return n},n}(h);function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ut(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var zt,Ht=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,s=n.prototype;return s.destroy=function(){h.prototype.destroy.call(this)},s.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},s.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Ut(this.media.textTracks).forEach((function(e){je(e)})),this.subtitleTrack=-1,this.media=null)},s.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},s.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,a=this.trackId,i=this.tracks,o=i[a];if(r>=i.length||r!==a||!o||this.stopped)this._clearReloadTimer();else if(d.logger.log("subtitle track "+r+" loaded"),n.live){var s=ae(o.details,n,e.stats.trequest);d.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){t._loadCurrentTrack()}),s)}else this._clearReloadTimer()},s.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},s.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},s._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},s._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(d.logger.log("Loading subtitle track "+e),r.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},s._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var a=Ut(t.textTracks);if(-1===e)[].slice.call(a).forEach((function(e){e.mode="disabled"}));else{var i=a[n];i&&(i.mode="disabled")}var o=a[e];o&&(o.mode=r?"showing":"hidden")}},s._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l.isFiniteNumber)(e)||e<-1||e>=r.length||(this.trackId=e,d.logger.log("Switching to subtitle track "+e),t.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},s._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=Ut(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},a=n,(i=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Bt(a.prototype,i),o&&Bt(a,o),n}(h),Gt=r("./src/crypt/decrypter.js"),qt=window.performance,Kt=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=r,n.config=t.config,n.state=ge,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new Gt.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=me,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var a,i=t.start,o=0;o<n.length;o++)if(i>=n[o].start&&i<=n[o].end){a=n[o];break}var s=t.start+t.duration;a?a.end=s:(a={start:i,end:s},n.push(a))}}},a.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=me},a.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ge)},a.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=me)},a.onSubtitleTracksUpdated=function(e){var t=this;d.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},a.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},a.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,a=this.tracks,i=a[n];t>=a.length||t!==n||!i||(r.live&&function(e,t,r){void 0===r&&(r=0);var n=-1;ne(e,t,(function(e,t,r){t.start=e.start,n=r}));var a=t.fragments;if(n<0)a.forEach((function(e){e.start+=r}));else for(var i=n+1;i<a.length;i++)a[i].start=a[i-1].start+a[i-1].duration}(i.details,r,this.lastAVStart),i.details=r,this.setInterval(500))},a.onKeyLoaded=function(){this.state===ke&&(this.state=me)},a.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,a=this.hls;if(this.state===be&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var i=qt.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,(function(e){var t=qt.now();a.trigger(u.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:i,tdecrypt:t}})}))}},a.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},a.doTick=function(){if(this.media)switch(this.state){case me:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,a=this.tracks;if(!a||!a[t]||!a[t].details)break;var i,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),c=G.bufferedInfo(this._getBuffered(),n.currentTime,o),h=c.end,f=c.len,p=a[t].details,g=p.fragments,y=g.length,m=g[y-1].start+g[y-1].duration;if(f>l)return;var v=this.fragPrevious;h<m?(v&&p.hasProgramDateTime&&(i=le(g,v.endProgramDateTime,s)),i||(i=ue(v,g,h,s))):i=g[y-1],i&&i.encrypted?(d.logger.log("Loading key for "+i.sn),this.state=ke,this.hls.trigger(u.default.KEY_LOADING,{frag:i})):i&&r.getState(i)===N&&(this.fragCurrent=i,this.state=be,this.hls.trigger(u.default.FRAG_LOADING,{frag:i}))}else this.state=me},a.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},a._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},a.onMediaSeeking=function(){this.fragPrevious=null},n}(De);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(zt||(zt={}));var Vt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yt=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(e){if(d.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!r.mediaKeysPromise)return d.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var t=function(t){r._media&&(r._attemptSetMediaKeys(t),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};r.mediaKeysPromise.then(t).catch(t)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=t.config.drmSystemOptions,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,l=n.prototype;return l.getLicenseServerUrl=function(e){switch(e){case zt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,r){var n=this,a=function(e,t,r,n){switch(e){case zt.WIDEVINE:return function(e,t,r){var n={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:r.audioRobustness||""})})),t.forEach((function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:r.videoRobustness||""})})),[n]}(t,r,n);default:throw new Error("Unknown key-system: "+e)}}(e,t,r,this._drmSystemOptions);d.logger.log("Requesting encrypted media key-system access");var i=this.requestMediaKeySystemAccess(e,a);this.mediaKeysPromise=i.then((function(t){return n._onMediaKeySystemAccessObtained(e,t)})),i.catch((function(t){d.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var r=this;d.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n);var a=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return n.mediaKeys=t,d.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated(),t}));return a.catch((function(e){d.logger.error("Failed to create media-keys:",e)})),a},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;d.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},l._onKeySessionMessage=function(e,t){d.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){d.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return d.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});d.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return d.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)d.logger.warn("Key-Session already initialized but requested again");else{var a=n.mediaKeysSession;if(!a)return d.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return d.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});d.logger.log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,a.generateRequest(e,t).then((function(){d.logger.debug("Key-session generation succeeded")})).catch((function(e){d.logger.error("Error generating key-session request:",e),r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,a=this._licenseXhrSetup;try{if(a)try{a(n,e)}catch(t){n.open("POST",e,!0),a(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},l._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,d.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&d.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),n(e.response);else{if(d.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var a=3-this._requestLicenseFailureCount+1;d.logger.warn("Retrying license request, "+a+" attempts left"),this._requestLicense(r,n)}}},l._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case zt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){d.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return d.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),a=this._createLicenseXhr(n,e,t);d.logger.log("Sending license request to URL: "+n);var i=this._generateLicenseRequestChallenge(r,e);a.send(i)}catch(e){d.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},l.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(zt.WIDEVINE,t,r)}},a=n,(i=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Wt(a.prototype,i),o&&Wt(a,o),n}(h);function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){Jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $t=Zt(Zt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Je,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:qe,bufferController:Ve,capLevelController:Ye,fpsController:Ze,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Vt,testBandwidth:!0},{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:Kt,subtitleTrackController:Ht,timelineController:jt,audioStreamController:rt,audioTrackController:Qe,emeController:Yt});function Qt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(r),!0).forEach((function(t){tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ar(e,t,r){return t&&nr(e.prototype,t),r&&nr(e,r),e}var ir=function(e){var t,r;function n(t){var r;void 0===t&&(t={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var a=n.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=er(er({},a),t);var i=rr(r).config;if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(void 0===i.liveSyncDuration||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(d.enableLogs)(i.debug),r._autoLevelCapping=-1;var o=r.abrController=new i.abrController(rr(r)),s=new i.bufferController(rr(r)),l=r.capLevelController=new i.capLevelController(rr(r)),u=new i.fpsController(rr(r)),c=new I(rr(r)),h=new M(rr(r)),f=new F(rr(r)),p=new Be(rr(r)),g=r.levelController=new Me(rr(r)),y=new z(rr(r)),m=[g,r.streamController=new Pe(rr(r),y)],v=i.audioStreamController;v&&m.push(new v(rr(r),y)),r.networkControllers=m;var k=[c,h,f,o,s,l,u,p,y];if(v=i.audioTrackController){var b=new v(rr(r));r.audioTrackController=b,k.push(b)}if(v=i.subtitleTrackController){var w=new v(rr(r));r.subtitleTrackController=w,m.push(w)}if(v=i.emeController){var E=new v(rr(r));r.emeController=E,k.push(E)}return(v=i.subtitleStreamController)&&m.push(new v(rr(r),y)),(v=i.timelineController)&&k.push(new v(rr(r))),r.coreComponents=k,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.isSupported=function(){return function(){var e=W();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}()},ar(n,null,[{key:"version",get:function(){return"0.14.13"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return n.defaultConfig?n.defaultConfig:$t},set:function(e){n.defaultConfig=e}}]);var a=n.prototype;return a.destroy=function(){d.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},a.attachMedia=function(e){d.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})},a.detachMedia=function(){d.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},a.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),d.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})},a.startLoad=function(e){void 0===e&&(e=-1),d.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},a.stopLoad=function(){d.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},a.swapAudioCodec=function(){d.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},a.recoverMediaError=function(){d.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},a.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},ar(n,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){d.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){d.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){d.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){d.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){d.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){d.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),n}(X);ir.defaultConfig=void 0},"./src/polyfills/number.js":
/*!*********************************!*\
  !*** ./src/polyfills/number.js ***!
  \*********************************/
/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(e,t,r){"use strict";r.r(t),r.d(t,"isFiniteNumber",(function(){return n})),r.d(t,"MAX_SAFE_INTEGER",(function(){return a}));var n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},a=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":
/*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
/*! exports provided: getSelfScope */function(e,t,r){"use strict";function n(){return"undefined"==typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return n}))},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
/*! exports provided: enableLogs, logger */function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",(function(){return d})),r.d(t,"logger",(function(){return c}));var n=r(/*! ./get-self-scope */"./src/utils/get-self-scope.js");function a(){}var i={trace:a,debug:a,log:a,warn:a,info:a,error:a},o=i;function s(e,t){return t="["+e+"] > "+t}var l=Object(n.getSelfScope)();function u(e){var t=l.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];n[0]&&(n[0]=s(e,n[0])),t.apply(l.console,n)}:a}var d=function(e){if(l.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):u(t)}))}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=i}}else o=i},c=o}}).default},e.exports=n())},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={getBrowserVersion:function(){var e=navigator.userAgent;if(e.toLowerCase().indexOf("mobile")>-1)return"Unknown";if(e.indexOf("Firefox")>-1)return"Firefox "+e.match(/firefox\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("Edge")>-1)return"Edge "+e.match(/edge\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("rv:11")>-1)return"IE 11";if(e.indexOf("Opera")>-1||e.indexOf("OPR")>-1){if(e.indexOf("Opera")>-1)return"Opera "+e.match(/opera\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("OPR")>-1)return"Opera "+e.match(/opr\/[\d.]+/gi)[0].match(/[\d]+/)[0]}else{if(e.indexOf("Chrome")>-1)return"Chrome "+e.match(/chrome\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("Safari")>-1)return"Safari "+e.match(/safari\/[\d.]+/gi)[0].match(/[\d]+/)[0];if(!(e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1))return"Unknown";if(e.indexOf("MSIE")>-1)return"IE "+e.match(/msie [\d.]+/gi)[0].match(/[\d]+/)[0];if(e.indexOf("Trident")>-1){var t=e.match(/trident\/[\d.]+/gi)[0].match(/[\d]+/)[0];return"IE "+(parseInt(t)+4)}}}};t.default=n,e.exports=t.default}]);