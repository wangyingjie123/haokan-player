<!doctype html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>好看-PC播放器</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
    .content {
        margin-top: 30px;
        position: relative;
    }
    .input {
        position: absolute;
        top: 10px;
        left: 30px;
    }
    #app {
        margin: 0 auto;
    }
    </style>
</head>
<body>
<div class="content">
    <div style="width: 1024px; margin: 0 auto;">
        <div id="app"></div>
    </div>
    <div class="input">
        <input type="text" id="input">
        <button class="input-button" onclick="sendDanmu()">发送弹幕</button>
    </div>
    <button id='button'>小窗</button>
</div>
<script src="../browser/index.js"></script>
<script>
const Player = window.Player;
let interval;
let player = new Player({
    id: 'app',
    // diyDuration: 160,
    cssFullscreen: true,
    fluid: true,
    ignores: ['replay'],
    danmu: {
        // comments, //弹幕数组
        area: {  // 弹幕显示区域
            start: 0, // 区域顶部到播放器顶部所占播放器高度的比例
            end: 1 // 区域底部到播放器顶部所占播放器高度的比例
        },
        mouseControl: true,
        mouseControlPause: true, // 鼠标移入暂停
        closeDefaultBtn: false, // 关闭播放器提供的默认开关
        defaultOff: false // 开启此项后弹幕不会初始化，默认初始化弹幕
    },
    playbackRate: [0.75, 1, 1.5, 2],
    url: 'http://s1.pstatp.com/cdn/expire-1-M/byted-player-videos/1.0.0/xgplayer-demo.mp4'
    // url: 'https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/cae-legoup-video-target/461b1dc0-c2e5-4bce-9c58-5ffea8f26c27.mp4'
});
// 清晰度切换
// player.emit('resourceReady', [
//     {
//         name: '1080',
//         url: 'http://s1.pstatp.com/cdn/expire-1-M/byted-player-videos/1.0.0/xgplayer-demo.mp4'
//     },
//     {
//         name: '高清',
//         url: 'https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/cae-legoup-video-target/461b1dc0-c2e5-4bce-9c58-5ffea8f26c27.mp4'
//     },
//     {
//         name: '超清',
//         url: 'https://ss0.bdstatic.com/-0U0bnSm1A5BphGlnYG/cae-legoup-video-target/461b1dc0-c2e5-4bce-9c58-5ffea8f26c27s.mp4'
//     }
// ]);
function sendDanmu() {
    player.danmu.sendComment({
            duration: 5000, //弹幕持续显示时间,毫秒(最低为5000毫秒)
            realTime: true,
            prior: true,
            id: Math.random() + '', //弹幕id，需唯一
            color: true, //该条弹幕为彩色弹幕，默认false
            txt: document.querySelector('#input').value, //弹幕文字内容
            style: {  //弹幕自定义样式
                color: 'red',
                fontSize: '20px',
                border: 'solid 1px red',
                borderRadius: '50px',
                padding: '5px 11px',
                backgroundColor: 'rgba(255, 255, 255, 0.1)'
            }
        })
}
// player.once('canplay', () => {
//     let i = 0;
//     interval = setInterval(() => {
//         i++;
//         player.danmu.sendComment({
//             duration: 5000, //弹幕持续显示时间,毫秒(最低为5000毫秒)
//             // realTime: true,
//             // prior: true,
//             id: i + '1', //弹幕id，需唯一
//             color: true, //该条弹幕为彩色弹幕，默认false
//             txt: `长弹幕长弹幕长弹幕长--第${i + 1}条弹幕`, //弹幕文字内容
//             style: {  //弹幕自定义样式
//                 color: '#ff9500',
//                 fontSize: '20px',
//                 border: 'solid 1px #ff9500',
//                 borderRadius: '50px',
//                 padding: '5px 11px',
//                 backgroundColor: 'rgba(255, 255, 255, 0.1)'
//             }
//         })
//     }, 300);
// });
document.querySelector('#button').onclick = function () {
    player.getPIP();
    clearInterval(interval);
}
</script>
</body>
</html>